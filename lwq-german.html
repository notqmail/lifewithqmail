<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <meta http-equiv="content-language" content="de">
  <meta http-equiv="content-type"
 content="text/html; charset=ISO-8859-1">
<!-- This file was generated using SDF 2.001 by Ian Clatworthy (ianc@mincom.com). SDF is freely available from http://www.mincom.com/mtr/sdf. -->
  <title>Life with qmail</title>
</head>
<body link="ff0000" vlink="0000ff">
<div class="header">
</div>
<div class="title">
<p><img src="logo-small.gif" align="right" alt="Life with qmail"></p>
<h1 class="doc-title">Life with qmail</h1>
<address class="doc-author">Dave Sill</address>
<address class="doc-modified">26 January 2004</address>
<address class="doc-author">&Uuml;bersetzer: Sebastian Wallroth</address>
<img src="contact.gif" alt="Contact">
<address class="doc-modified">28 Februar 2004</address>
Dies ist eine m&ouml;glichst exakte &Uuml;bersetzung des Textes <a
 href="http://lifewithqmail.org/lwq.html">http://lifewithqmail.org/lwq.html</a>.
<br clear="all">
</div>
<div class="contents">
<hr>
<h2>Inhalt</h2>
<div style="margin-left: 50px;"><a href="#introduction">1. Einleitung</a>
<div style="margin-left: 50px;"><a href="#audience">1.1. Zielpublikum</a>
<br>
<a href="#whatitis">1.2. Was ist <i>qmail</i>?</a><br>
<a href="#whyuseit">1.3. Warum sollte man <i>qmail</i> benutzen?</a><br>
<a href="#history">1.4. Geschichte</a><br>
<a href="#features">1.5. Features</a><br>
<a href="#related-packages">1.6. Verwandte Packages</a><br>
<a href="#architecture">1.7. Architektur</a><br>
<a href="#license">1.8. Lizenz</a><br>
<a href="#comparison">1.9. Vergleich mit anderen MTAs</a><br>
<a href="#documentation">1.10. Dokumentation</a><br>
<a href="#support">1.11. Support</a>
</div>
<br>
<a href="#installation">2. Installation</a>
<div style="margin-left: 50px;"><a href="#installation-issues">2.1.
Einleitende Worte zur Installation</a><br>
<a href="#preparation">2.2. Vorbereitung</a><br>
<a href="#system-requirements">2.3. Systemvoraussetzungen</a><br>
<a href="#download">2.4. Quellcode downloaden</a><br>
<a href="#build">2.5. Quellcode kompilieren</a><br>
<a href="#install-ucspi">2.6. ucspi-tcp installieren</a><br>
<a href="#install-daemontools">2.7. daemontools installieren</a><br>
<a href="#start-qmail">2.8. <i>qmail</i> starten</a><br>
<a href="#test">2.9. Testen der Installation</a>
</div>
<br>
<a href="#configuration">3. Konfiguration</a>
<div style="margin-left: 50px;"><a href="#config-files">3.1.
Konfigurationsdateien</a><br>
<a href="#relaying">3.2. Weiterleitung</a><br>
<a href="#multiple-hostnames">3.3. Multiple Hostnamen</a><br>
<a href="#virtual-domains">3.4. Virtuelle Domains</a><br>
<a href="#aliases">3.5. Aliase</a><br>
<a href="#qmail-users">3.6. qmail-Benutzer</a><br>
<a href="#spam">3.7. Spam-Kontrolle</a><br>
<a href="#viruses">3.8. Virus-Scannen</a>
</div>
<br>
<a href="#usage">4. Benutzung</a>
<div style="margin-left: 50px;"><a href="#dot-qmail-files">4.1. <tt>.qmail</tt>-Dateien</a>
<br>
<a href="#sending-messages">4.2. Nachrichten versenden</a><br>
<a href="#environment-variables">4.3. Umgebungsvariables</a>
</div>
<br>
<a href="#advanced-topics">5. Fortgeschrittene Themen</a>
<div style="margin-left: 50px;"><a href="#procmail">5.1. <i>procmail</i></a>
<br>
<a href="#pop-imap-servers">5.2. POP- und IMAP-Server</a><br>
<a href="#pop-imap-clients">5.3. POP- und IMAP-Clients</a><br>
<a href="#multi-rcpt">5.4. Mehrfach-RCPT- versus Einfach-RCPT-Zustellung</a><br>
<a href="#verp">5.5. VERP</a><br>
<a href="#troubleshooting">5.6. Fehlerbeseitigung</a><br>
<a href="#big-servers">5.7. Gro&szlig;e Server</a><br>
<a href="#migrating-to-qmail">5.8. Migration von <i>Sendmail</i> nach <i>qmail</i></a>
<br>
<a href="#mailing-list-managers">5.9. Mailinglistenmanager</a><br>
<a href="#patches">5.10. Patche</a><br>
<a href="#qmtp">5.11. QMTP</a>
</div>
<br>
<a href="#acknowledgments">A. Danksagung</a><br>
<a href="#related-packages">B. Verwandte Packages</a>
<div style="margin-left: 50px;"><a href="#dot-forward">B.1. <i>dot-forward</i></a>
<br>
<a href="#fastforward">B.2. <i>fastforward</i></a><br>
<a href="#ucspi-tcp">B.3. <i>ucspi-tcp</i></a><br>
<a href="#daemontools">B.4. <i>daemontools</i></a><br>
<a href="#qmailanalog">B.5. <i>qmailanalog</i></a><br>
<a href="#rblsmtpd">B.6. <i>rblsmtpd</i></a><br>
<a href="#serialmail">B.7. <i>serialmail</i></a><br>
<a href="#mess822">B.8. <i>mess822</i></a><br>
<a href="#ezmlm">B.9. <i>ezmlm</i></a><br>
<a href="#safecat">B.10. <i>safecat</i></a><br>
<a href="#djbdns">B.11. <i>djbdns</i></a><br>
<a href="#maildrop">B.12. <i>maildrop</i></a><br>
<a href="#syncdir">B.13. <i>syncdir</i></a>
</div>
<br>
<a href="#how-mail-works">C. Wie Internet-Mail funktioniert</a>
<div style="margin-left: 50px;"><a href="#from-a-to-b">C.1. Wie eine
Nachricht von Punkt A zu Punkt B kommt</a><br>
<a href="#more-information">C.2. Mehr Informationen</a>
</div>
<br>
<a href="#architecture-apdx">D. Architektur</a>
<div style="margin-left: 50px;"><a href="#modular">D.1. Modulare
Systemarchitektur</a><br>
<a href="#file-structure">D.2. Dateistruktur</a><br>
<a href="#queue-structure">D.3. Warteschlangenstruktur</a><br>
<a href="#pictures">D.4. Bilder</a>
</div>
<br>
<a href="#IAQ">E. Selten gestellte Fragen</a>
<div style="margin-left: 50px;"><a href="#retry-schedule">E.1. In
welchen Abst&auml;nden versucht qmail aufgeschobene Nachrichten zu
senden?</a><br>
<a href="#dns-problem">E.2. Warum kann ich keine Mail an eine
gro&szlig;en Rechner mit vielen MXs schicken?</a><br>
<a href="#queue_extra">E.3. Was ist <tt>QUEUE_EXTRA</tt>?</a>
</div>
<br>
<a href="#error-messages">F. Fehlermeldungen</a><br>
<a href="#gotchas">G. Gotchas</a>
<div style="margin-left: 50px;"><a href="#root-delivery">G.1. <i>qmail</i>
stellt Superusern keine Mails zu.</a><br>
<a href="#home-dir-ownership">G.2. <i>qmail</i> stellt nicht an
Benutzer zu, die keine eigenes Home-Verzeichnis haben.</a><br>
<a href="#uppercase-usernames">G.3. <i>qmail</i> stellt nicht an
Benutzer zu, deren Benutzername Gro&szlig;buchstaben enth&auml;lt.</a><br>
<a href="#dots-in-extensions">G.4. <i>qmail</i> ersetzt Punkte (.) in
Erweiterungsadressen durch Doppelpunkte (:).</a><br>
<a href="#uppercase-in-extensions">G.5. <i>qmail</i> konvertiert
Gro&szlig;buchstaben in Erweiterungsadressen in Kleinbuchstaben.</a><br>
<a href="#etc-hosts">G.6. <i>qmail</i> verwendet <tt>/etc/hosts</tt>
nicht.</a><br>
<a href="#no-smtp-logging">G.7. <i>qmail</i> loggt SMTP-Aktivit&auml;t
nicht mit.</a><br>
<a href="#deferral-notices">G.8. <i>qmail</i> erzeugt keine
Verz&ouml;gerungshinweise.</a><br>
<a href="#trigger">G.9. <i>qmail</i> ist langsam, wenn <tt>/var/qmail/queue/lock/trigger</tt>
abgeschmiert ist/die falschen Rechte hat/eine regul&auml;re Datei ist.</a>
<br>
<a href="#smtp-slow">G.10. DNS- oder IDENT-Lookups k&ouml;nnen SMTP
langsam machen.</a><br>
<a href="#cr">G.11. Wagenvorlauf/Zeilenvorschub-Zeilen (Carriage
Return/Linefeed, CRLF) funktionieren nicht.</a><br>
<a href="#log-block">G.12. <tt>qmail-send</tt> oder <tt>tcpserver</tt>
h&ouml;ren auf zu arbeiten, wenn das Log gesichert wird.</a><br>
<a href="#smtp-rejection">G.13. <tt>qmail-smtpd</tt>
&uuml;berpr&uuml;ft den lokalen Teil einer Adresse nicht.</a><br>
<a href="#firewalls">G.14. Firewalls k&ouml;nnen einen Externzugriff
auf ihren SMTP-/POP3-/IMAP-Server blockieren.</a><br>
<a href="#anonymous">G.15. <tt>qmail-inject</tt> setzt das <tt>Von</tt>-Feld
auf <tt>anonymous</tt>, wenn <tt>USER</tt> und <tt>LOGNAME</tt>
nicht gesetzt sind.</a><br>
<a href="#killing-qmail-send">G.16. <tt>qmail-send</tt> stoppt nicht
immer sofort, wenn es gekillt wurde.</a>
</div>
<br>
<a href="#lwq-faq">H. Oft gestellte Fragen &uuml;ber <u>Life with qmail</u></a>
<div style="margin-left: 50px;"><a href="#lwq-version">H.1. Welche
Version hat <u>Life with qmail</u>?</a><br>
<a href="#lwq-copyright">H.2. Wem geh&ouml;rt <u>Life with qmail</u>?</a>
<br>
<a href="#lwq-license">H.3. Welcher Lizenz unterliegt <u>Life with
qmail</u>?</a><br>
<a href="#lwq-announce-list">H.4. Wie kann ich benachrichtigt werden,
wenn neue Versionen von LWQ zur Verf&uuml;gung gestellt werden?</a>
<br>
<a href="#lwq-list">H.5. Wo k&ouml;nnen LWQ-Mitarbeiter und -Fans
miteinander kommunizieren?</a><br>
<a href="#lwq-translations">H.6. Wurde <u>Life with qmail</u> in die
Sprache <i>XYZ</i> &uuml;bersetzt?</a>
<br>
<a href="#lwq-formats">H.7. Ist <u>Life with qmail</u> in PostScript,
PDF, einfachem Text oder irgendeinem anderen Format neben HTML
verf&uuml;gbar?</a><br>
<a href="#lwq-warranty">H.8. Ich habe <u>Life with qmail</u> benutzt
und habe mein System abst&uuml;rzen lassen/meine Festplatte
gel&ouml;scht/meine Liebesleben ruiniert/meinen Hund get&ouml;tet/etc.</a>
<br>
<a href="#contributions">H.9. Wie kann ich LWQ unterst&uuml;tzen?</a><br>
<a href="#changes">H.10. Was hat sich in dieser Version von LWQ
ge&auml;ndert?</a>
</div>
</div>
</div>
<div class="main">
<hr>
<h1><a name="introduction">1. Einf&uuml;hrung</a></h1>
<h2><a name="audience">1.1. Zielpublikum</a></h2>
<p><u>Life with qmail</u> richtet sich an jeden, der daran interessiert
ist, <i>qmail</i> zu benutzen, vom Amateur (<i>Newbie</i>), der gerade
Linux auf einem Reserve-PC installiert hat, bis hinauf zum erfahrenen
System- oder Mail-Administator. Wenn sie etwas mangelhaft und unklar
finden, lassen sie es mich wissen. Senden sie ihre Kommentare an <a
 href="mailto:lwq@sill.org">lwq@sill.org</a>.</p>
<p>Es ist eine F&uuml;lle von Informationen &uuml;ber <i>qmail</i> von
den verschiedensten Quellen verf&uuml;gbar. Manche wenden sich an
Newbies, manche setzen voraus, dass der Leser mehr Erfahrung hat. <u>Life
with qmail</u> versucht, diese Informationen in einer einzigen Quelle
zu "verbinden", Geheimtipps zu geben und alles unter der Voraussetzung,
dass der Leser nur Basisf&auml;higeiten hat, wie:</p>
<ul>
  <li>Dateien/Ordner unter UNIX manipulieren</li>
  <li>Mit einem Webbrowser oder FTP-Programm umgehen</li>
  <li>Anweisungen befolgen</li>
</ul>
<h2><a name="whatitis">1.2. Was ist <i>qmail</i>?</a></h2>
<p><i>qmail</i> ist ein Internet Mail Transfer Agent (MTA) f&uuml;r
UNIX-&auml;hnliche Betriebssysteme. Es ist eine Ersetzung f&uuml;r das <i>Sendmail</i>-System,
dass mit UNIX-Betriebssystem ausgeliefert wird. <i>qmail</i> benutzt
das Simple Mail Transfer Protocol (SMTP), um Nachrichten mit MTAs auf
anderen Systemen auszutauschen.</p>
<hr width="80%" align="left"><strong>Hinweis: </strong>Der Name ist
"qmail", nicht "Qmail".
<hr width="80%" align="left">
<h2><a name="whyuseit">1.3. Warum sollte man <i>qmail</i> benutzen?</a></h2>
<p>Ihr Betriebssystem beinhaltet bereits einen MTA, wahrscheinlich <i>Sendmail</i>.
Wenn sie also dieses Dokument lesen, suchen sie wahrscheinlich nach
etwas besserem. Einige Vorteile von <i>qmail</i> gegen&uuml;ber
handels&uuml;blichen MTAs sind:</p>
<h3><a name="security">1.3.1. Sicherheit</a></h3>
<p><i>qmail</i> wurde f&uuml;r hohe Sicherheit entworfen. <i>Sendmail</i>
hat eine lange Geschichte ernsthafter Sicherheitsprobleme. Als <i>Sendmail</i>
geschrieben wurde, war das Netz ein viel friedlicherer Ort. Jeder
kannte jeden und es gab nur eine geringe Notwendigkeit hochsicher zu
entwerfen und zu programmieren. Das heutige Internet ist eine viel
feindseligere Umgebung f&uuml;r Netzwerkserver. Der Autor von <i>Sendmail</i>,
Eric Allman, hat mit der Straffung des Programms gute Arbeit geleistet,
aber mit einem kurzen Redesign kann man keine <i>wahre</i> Sicherheit
erreichen.</p>
<h3><a name="performance">1.3.2. Leistung</a></h3>
<p><i>qmail</i> parallelisiert die Mailzustellung mit
standardm&auml;&szlig;ig bis zu 20 simultanen Zustellungen.</p>
<h3><a name="reliability">1.3.3. Zuverl&auml;ssigkeit</a></h3>
<p>Wenn <i>qmail</i> einmal eine Nachricht akzeptiert, dann garantiert
es, das sie nicht verloren gehen wird. <i>qmail</i> unterst&uuml;tzt
auch ein neues Mailbox-Format, das sogar zuverl&auml;ssiger als NFS
arbeitet, ohne den Locking-Mechanismus zu verwenden.</p>
<h3><a name="simplicity">1.3.4. Einfachheit</a></h3>
<p><i>qmail</i> ist kleiner als jeder andere MTA mit &auml;quivalentem
Funktionsumfang.</p>
<hr width="80%" align="left"><strong>Hinweis: </strong>Die offizielle <i>qmail</i>-Webseite,
<a href="http://cr.yp.to/qmail.html">http://cr.yp.to/qmail.html</a>
behandelt die Vorteile von <i>qmail</i> extensiver.
<hr width="80%" align="left">
<h2><a name="history">1.4. Geschichte</a></h2>
<p><i>qmail</i> wurde von Dan Bernstein (DJB) geschrieben, <a
 href="http://cr.yp.to/djb.html">http://cr.yp.to/djb.html</a>; heute
ein Mathematikprofessor an der University of Illinois in Chicago. Dr.
Bernstein ist auch sehr bekannt f&uuml;r seine Arbeit auf dem Feld der
Kryptografie und seinen Rechtsstreit gegen die US-Regierung wegen des
Ver&ouml;ffentlichens von Verschl&uuml;sselungscode. Sehen sie sich <a
 href="http://www.news.com/News/Item/0,4,36217,00.html?owv">http://www.news.com/News/Item/0,4,36217,00.html?owv</a>
oder <a href="http://cr.yp.to/export.html">http://cr.yp.to/export.html</a>
f&uuml;r mehr Informationen &uuml;ber den Rechtsstreit an.</p>
<p>Das erste &ouml;ffentliche Release von <i>qmail</i>, Betaversion
0.70, erschien am 24. Januar 1996. Das erste Gamma Release, 0.90, kam
am 1. August 1996.</p>
<p>Version 1.0, das erste Generalrelease, wurde am 20. Februar 1997
angek&uuml;ndigt. Die gegenw&auml;rtige Version, 1.03, wurde am 15.
Juni 1998 herausgebracht.</p>
<p>Vom n&auml;chsten Release wird erwartet, dass es eine Testversion
von 2.0 sein wird. Einige Dinge, die in Version 2 auftauchen werden,
sind hier beschrieben: <a href="http://cr.yp.to/qmail/future.html">http://cr.yp.to/qmail/future.html</a>.</p>
<h2><a name="features">1.5. Features</a></h2>
<p>Die <i>qmail</i>-Webseite, <a href="http://cr.yp.to/qmail.html">http://cr.yp.to/qmail.html</a>,
zeigt eine umfassende Liste der Features von <i>qmail</i>. Diese
Sektion basiert ma&szlig;geblich auf dieser Liste.</p>
<h3><a name="feature-setup">1.5.1. Setup</a></h3>
<ul>
  <li>Automatische Adaptation auf ihre UNIX-Variante--keine Portierung
n&ouml;tig</li>
  <li>Automatische Per-Host-Konfiguration</li>
  <li>Schnellinstallation--keine Riesenliste von zu treffenden
Entscheidungen</li>
</ul>
<h3><a name="feature-security">1.5.2. Sicherheit</a></h3>
<ul>
  <li>Klare Trennung zwischen Adressen, Dateien und Programmen</li>
  <li>Minimierung des setuid-Codes</li>
  <li>Minimierung des root-Codes</li>
  <li>F&uuml;nf-Weg-Sicherheits-Partitionierung--Tiefensicherheit</li>
  <li>Optionales Logging von Einwegsnachrichtenhashes, dem gesamten
Nachrichteninhalt, etc. (Siehe <a href="#queue_extra">Was ist
QUEUE_EXTRA?</a> in Anhang E.)</li>
</ul>
<h3><a name="feature-messcon">1.5.3. Nachrichtenerstellung</a></h3>
<ul>
  <li><a href="#rfcs">RFC 822</a> und <a href="#rfcs">RFC 1123</a>
kompatibel</li>
  <li>Volle Unterst&uuml;tzung von Adressgruppen</li>
  <li>Automatische Konvertierung von Adresslisten alten Stils in das
RFC 822-Format</li>
  <li><tt>sendmail</tt>-Befehl f&uuml;r die Kompatibilit&auml;t mit
bestehenden Useragenten</li>
  <li>Die Kopfzeilenl&auml;nge ist nur durch den Speicher begrenzt</li>
  <li>Hostmaskierung (Siehe <a href="#defaulthost">defaulthost)</a></li>
  <li>Usermaskierung (Siehe <a href="#MAILUSER">MAILUSER</a> und <a
 href="#MAILHOST">MAILHOST</a>)</li>
  <li>Automatische Mail-Followup-To-Erstellung (Siehe <a
 href="#QMAILMFTFILE">QMAILMFTFILE</a>)</li>
</ul>
<h3><a name="feature-smtpserv">1.5.4. SMTP-Service</a></h3>
<ul>
  <li><a href="#rfcs">RFC 821, RFC 1123, RFC 1651, RFC 1652, und RFC
1854</a> kompatibel</li>
  <li>8-bit-frei</li>
  <li><a href="#rfcs">RFC 931/1413</a>/ident/TAP callback--kann bei der
Verfolgung von Spammern/F&auml;lschern helfen</li>
  <li>Weiterleitungskontrolle--stoppt unautorisierte Weiterleitung
durch Au&szlig;enstehende</li>
  <li>Keine Interferenz zwischen Weiterleitungskontrolle und Aliasen</li>
  <li>Automatische Ermittlung von lokalen IP-Adressen</li>
  <li>Per-Buffer Timeouts</li>
  <li>Sprungschrittz&auml;hlung (hop counting)</li>
  <li>Parallelisierungslimitierung (mittels <a href="#ucspi-tcp">ucspi-tcp</a>)</li>
  <li>Ablehnung von bekannten Missbrauchern (mittels <a
 href="#ucspi-tcp">ucspi-tcp</a>)</li>
  <li>Weiterleitung und Nachrichtenneuformatierung f&uuml;r
autorisierte Clients</li>
  <li>Optionaler RBL/ORBS-Support (mittels <a href="#rblsmtpd">rblsmtpd</a>)</li>
</ul>
<h3><a name="feature-queueman">1.5.5. Warteschlangenmanagement</a></h3>
<ul>
  <li>Sofortiges Bearbeiten von Nachrichten, die der Warteschlange
zugef&uuml;gt wurden</li>
  <li>Parallelisierungsgrenzen</li>
  <li>Aufteilung des Warteschlangenordners --keine Verlangsamung, wenn
die Warteschlange gro&szlig; wird</li>
  <li>Quadratische Planung der Wiederholung des Zustellungsversuches
von Nachrichten--bei alten Nachrichten wird seltener versucht, sie
zuzustellen (Siehe <a href="#retry-schedule">Anhang E</a>)</li>
  <li>Unabh&auml;ngige Planung der Wiederholung des
Zustellungsversuches von Nachrichten</li>
  <li>Automatisch sichere Warteschlange--kein Verlust von Nachrichten,
wenn das System abst&uuml;rzt</li>
  <li>Automatisches Abarbeiten je Empf&auml;nger</li>
  <li>Automatisches Bereinigen der Warteschlange</li>
  <li>Warteschlange einsehbar (Siehe <tt>qmail-qread</tt>)</li>
  <li>Detaillierte Zustellungsstatistiken (mittels <a
 href="#qmailanalog">qmailanalog</a>)</li>
</ul>
<h3><a name="feature-bounces">1.5.6. Bounces</a></h3>
<ul>
  <li>QSBMF-Bounce-Nachrichten--sowohl f&uuml;r Maschinen als auch
f&uuml;r Menschen lesbar</li>
  <li>HCMSSC-Unterst&uuml;tzung--sprachunabh&auml;ngige <a href="#rfcs">RFC
1893</a>-Fehlercodes</li>
  <li>Doppelte Bounces werden an den Postmaster geschickt</li>
</ul>
<h3><a name="feature-routing">1.5.7. Routing nach Domain</a></h3>
<ul>
  <li>Beliebige Anzahl von Namen f&uuml;r den lokalen Host (Siehe <a
 href="#locals">locals</a>)</li>
  <li>Beliebige Anzahl von virtuellen Domains (Siehe <a
 href="#virtualdomains">virtualdomains</a>)</li>
  <li>Domain-Wildcards (Siehe <a href="#virtualdomains">virtualdomains</a>)</li>
  <li>Konfigurierbarer "Prozent Hack"-Unterst&uuml;tzung (Siehe <a
 href="#percenthack">percenthack</a>)</li>
  <li>UUCP-Hook</li>
</ul>
<h3><a name="feature-smtpdeliv">1.5.8. SMTP-Zustellung</a></h3>
<ul>
  <li><a href="#rfcs">RFC 821-, RFC 974- und RFC 1123</a>-kompatibel</li>
  <li>8-bit-frei</li>
  <li>Automatisches Ignorieren von heruntergefahrenen Hosts</li>
  <li>K&uuml;nstliches Routing--smarthost, localnet, mailertable (Siehe
    <a href="#smtproutes">smtproutes</a>)</li>
  <li>Timeouts pro Puffer</li>
  <li>Passive SMTP-Warteschlange--perfekt f&uuml;r SLIP/PPP (mittels <a
 href="#serialmail">serialmail</a>)</li>
  <li>AutoTUR-Unterst&uuml;tzung (mittels <a href="#serialmail">serialmail</a>)</li>
</ul>
<h3><a name="feature-forwardlists">1.5.9. Weiterleitung und
Mailinglisten</a></h3>
<ul>
  <li><i>Sendmail</i> <tt>.forward</tt>-kompatibel (mittels <a
 href="#dot-forward">dot-forward</a>)</li>
  <li>Gehashte Weiterleitungsdatenbank (mittels <a href="#fastforward">fastforward)</a>
  </li>
  <li><i>Sendmail</i> <tt>/etc/aliases</tt>-kompatibel (mittels <a
 href="#fastforward">fastforward</a>)</li>
  <li>Adresswildcards (Siehe <a href="#extension-addresses">.qmail-default</a>)</li>
  <li>Mailinglistenbesitzer--automatische Weiterleitungsspr&uuml;nge
und Abwesenheitsnachrichten</li>
  <li>VERPs--automatische Empf&auml;nger-Identifikation f&uuml;r
Mailingslistenspr&uuml;nge</li>
  <li>Zugestellt-An--automatisches Schleifenverhinderung, auch zwischen
Hosts</li>
</ul>
<h3><a name="feature-localdeliv">1.5.10. Lokale Zustellung</a></h3>
<ul>
  <li>Benutzerkontrollierte Adresshierarchie--Fred kontrolliert
Fred-irgendwas mbox-Zustellung</li>
  <li>Zuverl&auml;ssige NFS-Zustellung (Siehe <a
 href="#maildir-delivery">maildir</a>)</li>
  <li>Benutzerkontrollierte Programmzustellung: procmail etc. (Siehe <a
 href="#program-delivery">qmail-command</a>)</li>
  <li>Optionale Benachrichtigung bei neuen Mails (Siehe qbiff)</li>
  <li>Optionale NRUDT-Quittungen (Siehe qreceipt)</li>
  <li>Bedingungsabh&auml;ngiges Filtern (Siehe condredirect und
bouncesaying)</li>
</ul>
<h3><a name="feature-pop3">1.5.11. POP3-Service</a></h3>
<ul>
  <li><a href="#rfcs">RFC 1939</a>-kompatibel</li>
  <li>UIDL-Unterst&uuml;tzung</li>
  <li>TOP-Unterst&uuml;tzung</li>
  <li>APOP-Hook</li>
  <li>modulare Passwort&uuml;berpr&uuml;fung (mittels <a
 href="http://www.qmail.org/top.html#checkpassword">checkpassword</a>)</li>
</ul>
<h2><a name="related-packages">1.6. Verwandte Packages</a></h2>
<p><i>qmail</i> folgt der klassischen UNIX-Philosophie, dass jedes Tool
eine einzelne, wohldefinierte Funktion haben soll und dass komplexe
Funktionen gebaut werden sollen, indem eine Serie von einfachen Tools
in einer "Pipeline" verbunden werden. Die Alternative ist, mehr und
mehr komplexe Tools zu bauen, die viel der Funktionalit&auml;t der
einfacheren Tools neu erfinden.</p>
<p>Es ist also nicht &uuml;berraschend, dass <i>qmail</i> nicht alles
das tut, was irgendwer von ihm will. Hier sind einige der bekanntesten
f&uuml;r <i>qmail</i> geschriebenen Add-Ons. Nat&uuml;rlich
k&ouml;nnen auch viele Standard-Unix-Werkzeuge mit <i>qmail</i>
zusammenarbeiten.</p>
<ul>
  <li><a href="#dot-forward">dot-forward</a>--Ein <i>Sendmail</i> <tt>.forward</tt>-Dateikompatibilit&auml;ts-Add-On</li>
  <li><a href="#fastforward">fastforward</a>--Ein <i>Sendmail</i>-Alias-Datenbankkompatibilit&auml;ts-Add-On</li>
  <li><a href="#ucspi-tcp">ucspi-tcp</a>--Eine <i>inetd</i>-Ersetzung</li>
  <li><a href="#daemontools">daemontools</a>--Ein Set von Tools, um
Daemons und ihre Logs zu managen</li>
  <li><a href="#qmailanalog">qmailanalog</a>--Ein Set von Analysetools
f&uuml;r qmail-Log-Dateien</li>
  <li><a href="#serialmail">serialmail</a>--Tools f&uuml;r das Mailen
in langsamen Netzwerken</li>
  <li><a href="#mess822">mess822</a>--Tools f&uuml;r das Parsen von
Internet-Mail-Nachrichten</li>
  <li><a href="#ezmlm">ezmlm</a>--Ein Mailinglistenmanager f&uuml;r <i>qmail</i></li>
</ul>
<h2><a name="architecture">1.7. Architektur</a></h2>
<p><a href="#architecture-apdx">Anhang D</a> behandelt <i>qmail</i>s
funktionale und physikalische Struktur. Vereinfacht gesagt, besteht <i>qmail</i>
aus einer Serie von Programmen (Modulen), die verschiedene Aufgaben
erledigen.</p>
<h2><a name="license">1.8. Lizenz</a></h2>
<p>Das <i>qmail</i>-Copyright geh&ouml;rt dem Autoren Dan Bernstein
und wird ohne Aussage &uuml;ber Benutzerrechte ausgeliefert. Auf <a
 href="http://cr.yp.to/softwarelaw.html">http://cr.yp.to/softwarelaw.html</a>
umrei&szlig;t er, was er f&uuml;r ihre Rechte h&auml;lt, wenn sie unter
US-Copyright-Recht stehen. Auf <a
 href="http://cr.yp.to/qmail/dist.html">http://cr.yp.to/qmail/dist.html</a>
garantiert er das Recht, <i>qmail</i>-Quellcode auszuliefern.
Bin&auml;re Ausgaben sind unter den Bedingungen erlaubt, die auf <a
 href="http://cr.yp.to/qmail/var-qmail.html">http://cr.yp.to/qmail/var-qmail.html</a>
beschrieben sind.</p>
<p>Die Hauptaussagen sind, dass sie <i>qmail</i> f&uuml;r jeden
beliebigen Zweck benutzen <b>k&ouml;nnen</b>, dass sie <i>unmodifizierte</i>
<i>qmail</i>-Quellcode-Ausgaben, eingeschr&auml;nkte <i>var-qmail</i>-Bin&auml;rausgaben
und Patche f&uuml;r <i>qmail</i> weitergeben k&ouml;nnen. Sie
d&uuml;rfen modifizierten <i>qmail</i>-Quellcode oder
Nicht-Bin&auml;rausgaben von <i>var-qmail</i> <b> nicht </b>verbreiten.</p>
<h2><a name="comparison">1.9. Vergleich mit anderen MTAs</a></h2>
<p>Es k&ouml;nnte ein Buch &uuml;ber dieses Thema geschrieben werden,
aber es w&uuml;rde langweilig sein, es zu lesen. Hier ist ein
Schnellvergleich von qmail mit einigen der verbreitetsten UNIX-MTAs.</p>
<table class="columns" border="1">
  <tbody>
    <tr class="heading">
      <td><strong>MTA</strong></td>
      <td><strong>Reifegrad</strong></td>
      <td><strong>Sicherheit</strong></td>
      <td><strong>Features</strong></td>
      <td><strong>Leistung</strong></td>
      <td><strong>Sendmail-&Auml;hnlichkeit</strong></td>
      <td><strong>Modularit&auml;t</strong></td>
    </tr>
    <tr>
      <td><i>qmail</i></td>
      <td>mittel</td>
      <td>hoch</td>
      <td>hoch</td>
      <td>hoch</td>
      <td>Add-Ons</td>
      <td>ja</td>
    </tr>
    <tr>
      <td><i>Sendmail</i></td>
      <td>hoch</td>
      <td>niedrig</td>
      <td>hoch</td>
      <td>niedrig</td>
      <td>x</td>
      <td>nein</td>
    </tr>
    <tr>
      <td><i>Postfix</i></td>
      <td>mittel</td>
      <td>hoch</td>
      <td>mittel</td>
      <td>hoch</td>
      <td>ja</td>
      <td>ja</td>
    </tr>
    <tr>
      <td><i>exim</i></td>
      <td>mittel</td>
      <td>niedrig</td>
      <td>hoch</td>
      <td>mittel</td>
      <td>ja</td>
      <td>nein</td>
    </tr>
    <tr>
      <td><i>Courier</i></td>
      <td>niedrig</td>
      <td>mittel</td>
      <td>hoch</td>
      <td>mittel</td>
      <td>optional</td>
      <td>ja</td>
    </tr>
  </tbody>
</table>
<p><i>Sendmail-&Auml;hnlichkeit</i> meint, dass der MTA sich in einigen
Punkten wie <i>Sendmail</i> verh&auml;lt, die einen Wechsel von <i>Sendmail</i>
zu einem alternativen MTA durchschaubarer f&uuml;r einen Benutzer
machen, wie zum Beispiel das Benutzen von <tt>.forward</tt>-Dateien, <tt>/etc/aliases</tt>
und das Zustellen nach <tt>/var/spool/mail</tt>.</p>
<p>Jonathan de Boyne Pollard bietet Berichte &uuml;ber viele Unix-MTAs
auf <a
 href="http://homepages.tesco.net/%7EJ.deBoynePollard/Reviews/UnixMTSes/">http://homepages.tesco.net/~J.deBoynePollard/Reviews/UnixMTSes/</a>.
Ein anderer detaillierter Vergleich ist verf&uuml;gbar unter <a
 href="http://www.geocities.com/mailsoftware42/">http://www.geocities.com/mailsoftware42/</a>.</p>
<h2><a name="documentation">1.10. Dokumentation</a></h2>
<h3><a name="man-pages">1.10.1. man pages</a></h3>
<p><i>qmail</i> wird mit einem kompletten Set von <tt>man</tt> pages
ausgeliefert. Nach der Installation befinden sie sich in <tt>/var/qmail/man</tt>.
Sie m&uuml;ssen dieses Verzeichnis vermutlich ihrer <tt>MANPATH</tt>-Umgebungsvariablen
hinzuf&uuml;gen.</p>
<table class="columns" border="1">
  <tbody>
    <tr class="heading">
      <td><strong>Shell</strong></td>
      <td><strong>Befehl</strong></td>
    </tr>
    <tr>
      <td>Bourne (/bin/sh)</td>
      <td><tt>MANPATH=$MANPATH:/var/qmail/man; export MANPATH</tt></td>
    </tr>
    <tr>
      <td>bash, Korn</td>
      <td><tt>export MANPATH=$MANPATH:/var/qmail/man</tt></td>
    </tr>
    <tr>
      <td>C Shell</td>
      <td><tt>setenv MANPATH $MANPATH:/var/qmail/man</tt></td>
    </tr>
  </tbody>
</table>
<p>Von nun an sollten Befehle in der Form "<tt>man <i>name-of-qmail-man-page</i></tt>"
die passende man page anzeigen.</p>
<p>Die <tt>man</tt> pages sind online auch im HTML-Format
verf&uuml;gbar:</p>
<ul>
  <li><a href="http://www.qmail.org/man/index.html">http://www.qmail.org/man/index.html</a></li>
</ul>
<hr width="80%" align="left"><strong>Hinweis: </strong>Die <i>qmail</i>
man pages sind mit Informationen nur so angef&uuml;llt, aber sie
fordern ein sorgf&auml;ltiges Lesen, weil sie in einem sehr dichten,
technischen Stil geschrieben sind. Sie sollten sie sich ausdrucken und
einmal durchlesen, um sich damit vertraut zu machen, was vorhanden ist
und wo es zu finden ist. Sehr wenige Informationen werden auf mehreren
Seiten wiederholt, so dass, wenn sich nicht wissen, wo etwas
beschrieben ist, es sehr schwer f&uuml;r sie sein kann, es zu finden.
<hr width="80%" align="left">
<h3><a name="docs">1.10.2. Dokumente</a></h3>
<p><i>qmail</i> wird mit einer Reihe von Dokumenten ausgeliefert, die
unter <tt>/var/qmail/doc</tt> installiert sind. Sie beinhalten:</p>
<ul>
  <li><tt>FAQ</tt>: Oft gestellte Fragen. Mit Antworten.</li>
  <li><tt>INSTALL*</tt>: Installationsdokumentation</li>
  <li><tt>PIC.*</tt>: Beschreibung, wie <i>qmail</i>
Schl&uuml;sselaufgaben l&ouml;st. Suchen sie im <a href="#pictures">Architektur</a>-Anhang
nach mehr Informationen.</li>
  <li>Verschiedene andere installationsbezogene Dokumentationen</li>
</ul>
<p>Diese Dokumente sind auch online verf&uuml;gbar unter:</p>
<ul>
  <li><a href="http://www.qmail.org/man/index.html">http://www.qmail.org/man/index.html</a></li>
</ul>
<h3><a name="faqs">1.10.3. FAQs</a></h3>
<p>Es gibt zwei offizielle FAQ (Oft gestellte Fragen. Mit
Antworten.)-Dokumente:</p>
<ul>
  <li><tt>/var/qmail/doc/FAQ</tt>, die Nur-Text-Version und</li>
  <li>Die Web-FAQ unter <a href="http://cr.yp.to/qmail/faq.html">http://cr.yp.to/qmail/faq.html</a>.</li>
</ul>
<p>Die Web-FAQ ist vollst&auml;ndiger.</p>
<h3><a name="book">1.10.4. B&uuml;cher</a></h3>
<h4><a name="qmail-handbook">1.10.4.1. <u>qmail, Das Handbuch</u></a></h4>
<p>Dave Sill, der Autor von <u>Life with qmail</u> hat ein <i>qmail</i>-Buch
f&uuml;r Apress (<a href="http://www.apress.com/">http://www.apress.com/</a>)
geschrieben. Dieses Buch, <u>qmail, Das Handbuch</u>, behandelt alles,
was in dieser Anleitung steht, geht aber mehr ins Detail und behandelt
au&szlig;erdem eine Menge neuer Themen.</p>
<p>Mehr Informationen finden unter <a
 href="http://www.apress.com/catalog/book/1893115402/">http://www.apress.com/catalog/book/1893115402/</a>.
Um dieses Buch bei Amazon zu bestellen, gehen sie zu <a
 href="http://www.amazon.de/exec/obidos/ASIN/1893115402/viadrina">http://www.amazon.de/exec/obidos/ASIN/1893115402/viadrina</a>.
(Die deutsche Version finden sie unter <a
 href="http://www.amazon.de/exec/obidos/ASIN/382660962X/viadrina/">http://www.amazon.de/exec/obidos/ASIN/382660962X/viadrina/</a>;
Anm. d. &Uuml;bers.)</p>
<h4><a name="oreilly-book">1.10.4.2. <u>qmail</u></a></h4>
<p>John Levine soll angeblich ein <i>qmail</i>-Buch f&uuml;r O'Reilly
&amp; Associates (<a href="http://www.oreilly.com/">http://www.oreilly.com/</a>)
schreiben. (Nur auf englisch unter <a
 href="http://www.amazon.de/exec/obidos/ASIN/1565926285/viadrina/">http://www.amazon.de/exec/obidos/ASIN/1565926285/viadrina/</a>,
Anm. d. &Uuml;bers.) </p>
<h4><a name="sams-book">1.10.4.3. <u>Running qmail</u></a></h4>
<p>Richard Blum hat <u>Running qmail</u> geschrieben, das bei Sams
publiziert wurde. Dieses Buch hat gemischte Besprechungen in der <i>qmail</i>-Mailingliste
erhalten.</p>
<p>Informationen &uuml;ber dieses Buch und eine Bestellm&ouml;glichkeit
finden sie unter <a
 href="http://www.amazon.de/exec/obidos/ASIN/0672319454/viadrina/">http://www.amazon.de/exec/obidos/ASIN/0672319454/viadrina/</a>.</p>
<h3><a name="list-archives">1.10.5. Listenarchive</a></h3>
<p>Die <i>qmail</i>-E-Mail-Liste, die von Dan Bernstein verwaltet
wird, ist eine wertvolle Quelle f&uuml;r Informationen. Ein Webarchiv
dieser Liste wird vorgehalten unter:</p>
<ul>
  <li><a href="http://www.ornl.gov/its/archives/mailing-lists/qmail/">http://www.ornl.gov/its/archives/mailing-lists/qmail/</a>.</li>
</ul>
<p>Eine Suchmaschine f&uuml;r dieses Archiv findet sich unter:</p>
<ul>
  <li><a href="http://www-archive.ornl.gov:8000/">http://www-archive.ornl.gov:8000/</a>.</li>
</ul>
<p>Andere Webarchive sind verf&uuml;gbar unter:</p>
<ul>
  <li><a href="http://www.egroups.com/list/djb-qmail/?refstop=1">http://www.egroups.com/list/djb-qmail/?refstop=1</a>
und</li>
  <li><a href="http://msgs.securepoint.com/qmail/">http://msgs.securepoint.com/qmail/</a>.</li>
</ul>
<p>Antworten auf die meisten Fragen &uuml;ber <i>qmail</i> finden sie
in diesem Listenarchiv.</p>
<h3><a name="other-web-sites">1.10.6. Andere Webseiten</a></h3>
<ul>
  <li><a href="http://cr.yp.to/qmail.html">http://cr.yp.to/qmail.html</a>:
Die offizielle <i>qmail</i>-Homepage.</li>
  <li><a href="http://www.qmail.org">http://www.qmail.org</a>: Die
inoffizielle <i>qmail</i>-Homepage. Enth&auml;lt eine Menge
Informationen &uuml;ber Add-Ons und Patche und verlinkt zu vielen guten
    <i>qmail</i>-Webseiten an anderen Pl&auml;tzen.</li>
  <li><a href="http://www.flounder.net/qmail/qmail-howto.html">http://www.flounder.net/qmail/qmail-howto.html</a>:
Adam McKenna's HOWTO.</li>
</ul>
<h2><a name="support">1.11. Support</a></h2>
<h3><a name="mailing-lists">1.11.1. Mailinglisten</a></h3>
<p>Die folgende Liste befindet sich auf list.cr.yp.to. Um dem Ernten
von E-Mail-Adressen durch Spammer vorzubeugen, vermeide ich das
Benutzen der vollst&auml;ndigen, g&uuml;ltigen Adressen und von
"mailto"-URLs.</p>
<p>Die Listen werden durch <i>ezmlm</i> verwaltet, das verschiedene
Adressen benutzt, um verschiedene Funktionen auszuf&uuml;hren:</p>
<ul>
  <li><tt><i>Listenname</i>@list.cr.yp.to</tt>: Die Zustelladresse.
Nachrichten, die hierher gesandt werden, gehen an alle
Listenmitglieder. Senden sie <b>keine</b> Einschreib-/Austrag-Anfragen
hierher: das funktioniert nicht und es wird die Mitglieder
ver&auml;rgern.</li>
  <li><tt><i>listname</i>-help@list.cr.yp.to</tt>: Die "Hilfe"-Adresse.
Antwortet mit einer Liste von Befehlen und allgemeinen
Benutzerinformationen.</li>
  <li><tt><i>listname</i>-subscribe</tt>: Senden sie eine leere
Nachricht hierher, um sich einzuschreiben.</li>
  <li><tt><i>listname</i>-unsubscribe</tt>: Senden sie eine leere
Nachricht hierher, um sich auszutragen.</li>
</ul>
<p>Um eine einzuschreibende/auszutragende E-Mail-Adresse anzugeben,
sagen wir <tt>joe@beispiel.com</tt>, senden sie eine Nachricht an:</p>
<ul>
  <li><tt><i>listname</i>-subscribe-joe=beispiel.com@list.cr.yp.to</tt>.</li>
</ul>
<h4><a name="qmail-list">1.11.1.1. <u>qmail</u></a></h4>
<p>Die Haupt-<i>qmail</i>-Mailingliste. F&uuml;r die Diskussion, Fragen
und Antworten &uuml;ber die meisten Dinge, die mit <i>qmail</i> zu tun
haben, au&szlig;er den Themen mit einer eigenen Liste. Lesen sie
Charles Cazabons "12 Schritte zur qmail-Listen-Gl&uuml;ckseligkeit"
unter <a
 href="http://www.qcc.sk.ca/%7Echarlesc/writings/12-steps-to-qmail-list-bliss.html">http://www.qcc.sk.ca/~charlesc/writings/12-steps-to-qmail-list-bliss.html</a>
bevor sie hier posten. Lesen sie au&szlig;erdem die FAQs und
durchsuchen die <a href="#list-archives">Listenarchive</a>, bevor sie
eine Frage posten. Wenn sie Fragen stellen, versuchen sie bitte,
ausreichend Details mitzuliefern, um den Leuten zu erm&ouml;glichen, zu
antworten:</p>
<ul>
  <li><b><i>Was haben sie getan?</i></b> Wie ist ihre Konfiguration?
Liefern sie <tt>qmail-showctl</tt>-Output mit, wenn sie nicht sicher
sind, was wichtig ist. Was haben sie unternommen? Wenn es sich um eine
neue Installation handelt, sagen sie, wie sie <i>qmail</i> installiert
haben.</li>
  <li><b><i>Was haben sie erwartet, das passieren sollte?</i></b> Was
war das Ergebnis, das sie erreichen wollten? Glauben sie nicht, dass
der Leser irgendetwas erraten kann.</li>
  <li><b><i>Was <u>ist</u> passiert?</i></b> Beschreiben sie das
aktuelle Resultat. Schlie&szlig;en sie Logdateiausschnitte und Kopien
der Nachrichten samt Headern ein.</li>
</ul>
<hr width="80%" align="left"><strong>Hinweis: </strong>Die <i>qmail</i>-Listen
benutzen ein Werkzeug, das <tt>qsecretary</tt> (q-Sekret&auml;r; Anm.
d. &Uuml;bers.) genannt wird, um sicherzustellen, dass gepostete
Nachrichten kein Spam sind. Aus jeder Nachricht, die in der Liste
gepostet wird, resultiert eine E-Mail-Best&auml;tigungsanfrage vom <tt>qsecretary</tt>.
Lesen sie die Nachricht und folgen die den Anweisungen, um ihre
Nachricht zu best&auml;tigen--normalerweise reicht einfach eine Antwort
auf die <tt>qsecretary</tt>
-Nachricht. Regelm&auml;&szlig;ige Listen-Poster automatisieren diesen
Prozess h&auml;ufig mit Hilfe von Autorespondern wie Charles Cazabons <i>pymsgauth</i>,
verf&uuml;gbar unter <a
 href="http://www.qcc.ca/%7Echarlesc/software/pymsgauth/pymsgauth.html">http://www.qcc.ca/~charlesc/software/pymsgauth/pymsgauth.html</a>.
<i>pymsgauth</i> vergleicht, ob die Nachricht, die an die <i>qmail</i>-Liste
gesandt wurde, wirklich von ihnen kam, so dass es nicht automatisch
gef&auml;lschte Nachrichten best&auml;tigt, die in ihrem Namen an die
Liste geschickt wurden.
<hr width="80%" align="left">
<h4><a name="qmailannounce-list">1.11.1.2. <u>qmailannounce</u></a></h4>
<p>Die <i>qmail</i>-Ank&uuml;ndigungs-Mailingliste. Neue Ausgaben
werden hier angek&uuml;ndigt. Es gibt keine Zustelladresse: es ist eine
Nur-Lesen-Liste.</p>
<h4><a name="serialmail-list">1.11.1.3. <u>serialmail</u></a></h4>
<p>F&uuml;r die Diskussion des <i>serialmail</i>-Packages.</p>
<h4><a name="ezmlm-list">1.11.1.4. <u>ezmlm</u></a></h4>
<p>F&uuml;r die Diskussion der <i>ezmlm</i>-Mailinglistenmanager.</p>
<h3><a name="consultants">1.11.2. Consultants</a></h3>
<p>Besuchen sie <a href="http://www.qmail.org/top.html#paidsup">http://www.qmail.org/top.html#paidsup</a>
f&uuml;r eine Liste von Anbietern kommerziellen Supports.</p>
<h3><a name="faqts">1.11.3. FAQTS Wissensdatenbank</a></h3>
<p>Eine Datenbank mit <i>qmail</i>-bezogenen Fragen und Antworten ist
unter <a href="http://qmail.faqts.com/">http://qmail.faqts.com/</a>
verf&uuml;gbar. Wenn sie eine Frage haben, die die FAQ nicht
beantwortet, versuchen sie diese Wissensdatenbank zu durchsuchen. Es
ist insbesondere geeignet, um "Wie geht das" Fragen zu beantworten.</p>
<hr>
<h1><a name="installation">2. Installation</a></h1>
<p>Dieser Abschnitt behandelt die Installation von <i>qmail</i>. Wenn
sie ein erfahrener Systemadministrator sind, k&ouml;nnen sie <i>qmail</i>
installieren, indem sie den Anweisungen in <tt>INSTALL</tt> aus der
Quelltextauslieferung folgen. Die <tt>INSTALL</tt>-Anweisungen sind
die <b>offiziellen</b> Installationsanweisungen. Sie sind komplexer
als die <u>Life with qmail</u>-Anweisungen und sie setzen voraus, dass
der Leser ein erfahrener System- und Mailadministrator ist. Sie sind
jedoch veraltet und geben nicht Bernsteins derzeit empfohlenen
Praktiken wieder.</p>
<hr width="80%" align="left"><strong>Hinweis: </strong>Wenn sie sich
entscheiden, zu installieren, indem sie die folgenden Anweisungen
befolgen, sollten sie zuerst den ganzen Abschnitt durchlesen, um sich
mit den gesamten Prozess vertraut zu machen.
<hr width="80%" align="left">
<h2><a name="installation-issues">2.1. Einleitende Worte zur
Installation</a></h2>
<h3><a name="binary-vs-source">2.1.1. Bin&auml;r versus Quellcode</a></h3>
<p>Aufgrund <i>qmail</i>s restriktiver Lizenzierung bez&uuml;glich der
Auslieferung von vorbereiteten Packages, wird <i>qmail</i>
&uuml;blicherweise mit einer Quellcodeauslieferung installiert.</p>
<p>Wenn sie nicht mit dem Unterschied zwischen Quellcode und
Bin&auml;rdateien vertraut sind, stellen sie sich vor, sie bestellen
eine Pizza zu sich nach Hause. Die "bin&auml;re" Version der Pizza
trifft essfertig ein. Die "Quellcode"-Pizza kommt als Bausatz mit Mehl,
Hefe, K&auml;se, So&szlig;e, Belag und Anweisungen, wie man eine Pizza
selber backt. Quellcodeinstallationen sind ein bisschen mehr Arbeit
f&uuml;r sie, aber wenn sie den Anweisungen gewissenhaft folgen, dann
ist das Ergebnis das gleiche--oder sogar besser. Die selbst gebackene
Pizza wird frischer sein, sie k&ouml;nnen den Belag nach ihren
Vorlieben ausw&auml;hlen und sie werden eine Menge mehr &uuml;ber ihre
Pizza wissen und sie "funktioniert".</p>
<p>Das sichere Betreiben eines internetzug&auml;nglichen
Netzwerkservices ist nicht einfach. Ein ungeeignet konfigurierter
Service kann den Host in die Gefahr bringen, attackiert zu werden oder
kann benutzt werden, um andere Seiten zu attackieren--und damit
potenziell den Administrator der gesetzlichen Haftbarkeit ausliefern.
Je mehr sie &uuml;ber ihre Netzwerkservices wissen, umso
wahrscheinlicher sind diese passend konfiguriert und sicher.</p>
<h3><a name="tar-vs-package">2.1.2. Tarball versus
betriebssystemspezifische Packages</a></h3>
<p>Einige Betriebssysteme bieten einen Mechanismus f&uuml;r
automatisierte Quellcodeinstallationen. Um zur Pizza-Analogie
zur&uuml;ckzukehren: sie machen es m&ouml;glich, die Zutaten und
Anweisungen so zusammenzupacken, dass sie nur einen Knopf dr&uuml;cken
m&uuml;ssen, um die Pizza sich selbst backen zu lassen.</p>
<p>Klingt gut, oder?</p>
<p>In der Praxis k&ouml;nnte es jedoch weniger gut laufen. Diese
Packages zusammenzustellen ist ziemlich diffizil und sie k&ouml;nnten
nicht so arbeiten, wie es von ihnen erwartet wird. Sie sind Software,
und wie jede Software, k&ouml;nnen sie Fehler enthalten. Aber auch wenn
sie fehlerfrei sind, hat die Bequemlichkeit, die sie bieten, ihren
Preis. Sie verlieren die meisten der Vorteile einer selbstgebackenen
Pizza: die M&ouml;glichkeit, die Bel&auml;ge nach ihren
pers&ouml;nlichen Vorlieben zu w&auml;hlen und das Wissen, wie die
Pizza gemacht wurde und wie sie funktioniert.</p>
<p>Wenn <i>qmail</i> eine Pizza w&auml;re, k&ouml;nnte das
selbsterstellende Verfahren als der einzuschlagende Weg erscheinen.
Aber er ist es nicht: es ist ein grausam kompliziertes System, das der
Installierer/Verwalter sehr gut verstehen muss, um in der Lage zu sein,
es laufruhig arbeiten zu lassen. Das selbstinstallierende <i>qmail</i>
ist einfacher zu installieren als die benutzerinstallierte Version,
aber die benutzerinstallierte Version ist einfacher zu konfigurieren
und nach Fehlern zu durchsuchen. Sie installieren <i>qmail</i> einmal
auf einem System, aber sie werden wahrscheinlich mehrfach in die
Verlegenheit kommen, es neu zu konfigurieren oder erkl&auml;ren zu
m&uuml;ssen, warum die Mails nicht so flutschen, wie sie denken, dass
sie es tun sollten.</p>
<p>Aus diesen Gr&uuml;nden empfehle ich, <i>qmail</i> von Grund auf
und mit dem Quellcode-Tarball zu installieren, nicht mit einem Red
Hat-RPM oder einen anderen selbstinstallierenden Paket.</p>
<h2><a name="preparation">2.2. Vorbereitung</a></h2>
<p>Bevor sie <i>qmail</i> auf einem System installieren, insbesondere,
wenn es ihre erste <i>qmail</i>-Installation ist, gibt es ein paar
Dinge, &uuml;ber die sie nachdenken m&uuml;ssen.</p>
<ul>
  <li>Wenn m&ouml;glich, installieren sie <i>qmail</i> auf einem
"&Uuml;bungs"-System. Das wird ihnen die Chance geben, Fehler zu
machen, ohne wichtige Mails zu verlieren oder den Mailservice ihrer
Benutzer zu unterbrechen.</li>
  <li>Wenn sie keine Reserve haben und ihr System bereits Mails mittels
    <i>sendmail</i>, <i>smail</i> oder einem anderen MTA bearbeitet,
k&ouml;nnen sie die meisten Teile von <i>qmail</i> installieren und
testen, ohne den existierenden Service zu st&ouml;ren.</li>
  <li>Wenn sie ein System von einem anderen MTA nach <i>qmail</i>
umstellen--sogar wenn sie einige <i>qmail</i>-Erfahrung auf dem Buckel
haben--ist es eine gute Idee, vorher einen Plan zu formulieren.</li>
</ul>
<h2><a name="system-requirements">2.3. Systemvoraussetzungen</a></h2>
<p><i>qmail</i> kann man auf den meisten UNIX und UNIX-&auml;hnlichen
Systemen installieren und laufen lassen, aber es gibt einige wenige
Voraussetzungen:</p>
<ul>
  <li>Mehr als 10 Megabytes freier Festplattenplatz w&auml;hrend des
Kompilierens. Nach dem Komilieren k&ouml;nnen sie alles bis auf 4
Megabyte freigeben, indem sie die Objektdateien l&ouml;schen.</li>
  <li>Ein komplettes, funktionierendes C-Entwicklungssytem
einschlie&szlig;lich eines Compilers, System-Header-Dateien und
Bibliotheken. Die Kompilieranweisungen werden ihnen zeigen, woran sie
merken, dass sie die n&ouml;tigen Teile haben.</li>
  <li>Ein paar Megabytes f&uuml;r die Bin&auml;r-, die Dokumentations-
und die Konfigurationsdateien.</li>
  <li>Ein sicheres Dateisystem f&uuml;r die Warteschlange. <i>qmail</i>s
Sicherheitsgarantie erfordert, dass sich die Warteschlange auf einem
Dateisystem mit traditioneller BSD-FFS-Semantik befindet. Die meisten
modernen lokalen Dateisysteme bedienen diese Voraussetzungen, mit einer
wichtigen Ausnahme: der <tt>link()</tt>-Systemaufruf ist oft <i>asynchron</i>--das
bedeutet, dass die Resultate der <tt>link()</tt>-Operation
m&ouml;glicherweise nicht auf die Festplatte geschrieben wurden, wenn
der <tt>link()</tt>-Aufruf zur&uuml;ckkehrt. Bruce Guenters <i>syncdir</i>-Bibliothek
kann benutzt werden, um dieses Problem zu umgehen. Siehe <a
 href="#syncdir">syncdir</a> im "Verwandte Packages"-Anhang.</li>
  <li>Gen&uuml;gend Festplattenplatz f&uuml;r die Warteschlange. Kleine
Ein-Benutzer-Systeme brauchen nur ein paar Megabyte. Gro&szlig;e Server
brauchen m&ouml;glicherweise ein paar Gigabyte.</li>
  <li>Ein kompatibles Betriebssystem. Die meisten Varianten von UNIX
sind akzeptabel. Siehe <tt>README</tt> im Quellcode-Hauptverzeichnis
f&uuml;r eine Liste von bekannten kompatiblen Ausgaben.</li>
  <li>Zugriff auf einen Domainnamensserver (DNS) ist stark zu
empfehlen. Ohne ihn kann <i>qmail</i> nur an externe Systeme senden,
die in seiner <tt>smtproutes</tt>-Konfigurationsdatei konfiguriert
sind.</li>
  <li>Eine ad&auml;quate Netzwerkverbindung. <i>qmail</i> wurde
f&uuml;r gut angeschlossene Systeme entworfen, so dass sie
wahrscheinlich nicht probieren sollten, es f&uuml;r einen
Mailinglistenserver an einer 28,8k-Einw&auml;hlverbindung zu benutzen.
Das <i>serialmail</i>-Package wurde entworfen, <i>qmail</i>
kompatibler mit schlecht angeschlossenen Systemen zu machen. Siehe den <a
 href="#serialmail">serialmail</a>-Abschnitt im "Verwandte
Packages"-Anhang.</li>
</ul>
<hr width="80%" align="left"><strong>Hinweis: </strong>Die
Warteschlange muss auf einem Dateisystem liegen, das das Benutzen von
ausf&uuml;hrbaren und <tt>setuid()</tt>-Dateien erlaubt. Einige
Betriebssystemausgaben mounten automatisch <tt>/var</tt> mit der <tt>nosuid</tt>
oder der <tt>noexec</tt>-Option. Auf solchen Systemen sollten diese
Optionen entweder ausgeschaltet werden oder <tt>/var/qmail/bin</tt>
sollte auf einem anderen Dateisystem, ohne diese Optionen, liegen. Der <a
 href="#create-dirs">Verzeichnisse erstellen</a>-Abschnitt beschreibt,
wie symbolische Links angewandt werden, um letzteres zu erreichen.
<hr width="80%" align="left">
<hr width="80%" align="left"><strong>Hinweis: </strong><i>qmail</i>
wird auf Apples OS X nicht richtig installiert, wenn sie diesen
Anweisungen oder denen in der <tt>INSTALL</tt>-Datei folgen. Jay
Soffian hat eine Prozedur f&uuml;r das Installieren unter OS X
dokumentiert, die unter <a
 href="http://www.soffian.org/docs/qmail_on_os_x.html">http://www.soffian.org/docs/qmail_on_os_x.html</a>
verf&uuml;gbar ist. Kyle Wheeler empfiehlt die folgenden
&Auml;nderungen:
<pre>Bevor sie kompilieren, &auml;ndern sie Zeile 4 von strerr_sys.c wie folgt:<br><br>struct strerr strerr_sys = {0,0,0,0};<br><br>Und &auml;ndern sie Zeile 81 von hier.c wie folgt:<br><br>c(auto_qmail,"doc","INSTALL.txt",auto_uido,auto_gidq,0644);<br><br>Au&szlig;erdem, als vermutlicher Fix daf&uuml;r, dass qmail manchmal beim Booten h&auml;ngen bleibt, f&uuml;hren<br>sie diesen Befehl als root aus (nachdem sie die Benutzer entsprechend der Installations-<br>anweisungen angelegt haben):<br><br>nidump passwd / &gt; /etc/passwd<br></pre>
<hr width="80%" align="left">
<h2><a name="download">2.4. Quellcode downloaden</a></h2>
<p>OK, jetzt haben sie ein System, dass die Voraussetzungen
erf&uuml;llt, fertig f&uuml;r die Installation von <i>qmail</i>. Der
erste Schritt ist das Downloaden des Quelltextes f&uuml;r <i>qmail</i>
und beliebiger anderer Add-Ons. Sie werden nat&uuml;rlich <i>qmail</i>
brauchen und sie sollten vermutlich auch <i>ucspi-tcp</i> und <i>daemontools</i>
holen:</p>
<ul>
  <li><i>qmail</i>, <a href="http://www.qmail.org/netqmail-1.05.tar.gz">http://www.qmail.org/netqmail-1.05.tar.gz</a>
  </li>
  <li><i>ucspi-tcp</i>, <a
 href="ftp://cr.yp.to/ucspi-tcp/ucspi-tcp-0.88.tar.gz">ftp://cr.yp.to/ucspi-tcp/ucspi-tcp-0.88.tar.gz</a>
  </li>
  <li><i>daemontools</i>, <a
 href="ftp://cr.yp.to/daemontools/daemontools-0.76.tar.gz">ftp://cr.yp.to/daemontools/daemontools-0.76.tar.gz</a></li>
</ul>
<p>Laden sie diese Dateien mit Hilfe ihres Webbrowsers, Webclients
(z.B. <tt>wget</tt>) oder FTP-Clients.</p>
<hr width="80%" align="left"><strong>Hinweis: </strong>Wenn einer der
Links nicht funktioniert, dann wahrscheinlich, weil das Package
upgedatet wurde. In diesem Fall sollten sie nach <a
 href="http://cr.yp.to/software.html">http://cr.yp.to/software.html</a>
gehen und dort den Links folgen, um die gegenw&auml;rtige Version zu
downloaden. Es ist m&ouml;glich, dass upgegradete Versionen nicht mit
den folgenden Anweisungen kompatibel sind, also lesen sie unbedingt die
Release-Hinweise im Abschnitt "Upgrading from previous versions...".
<hr width="80%" align="left">
<hr width="80%" align="left"><strong>Hinweis: </strong>Diese
Installation benutzt die <i>netqmail</i>-Distribution von <i>qmail</i>,
die aus dem offiziellen <i>qmail</i> 1.03-Tarball und einem Patch
besteht, der eine Handvoll Bugs, M&auml;ngel und
Inkompatibilit&auml;ten fixt. Siehe <a
 href="http://www.qmail.org/netqmail/">http://www.qmail.org/netqmail/</a>
und die <i>netqmail</i> <tt>CHANGES</tt>-Datei.
<hr width="80%" align="left">
<h2><a name="build">2.5. Quellqode kompilieren<br>
</a></h2>
<h3><a name="verify-compiler">2.5.1. Pr&uuml;fen sie die Build-Umgebung</a></h3>
<p>Zuerst m&uuml;ssen sie sicherstellen, dass sie die notwendigen
Werkzeuge haben, um das Programm zu kompilieren. Wie sie das
feststellen, h&auml;ngt von der UNIX-Variante ab, die sie benutzen. Der
einfachste Weg, obgleich ohne Garantie, ist, es <i>zu versuchen</i>.</p>
<hr width="80%" align="left"><strong>Hinweis: </strong>Wenn einer
dieser Tests fehlschl&auml;gt, k&ouml;nnen sie stoppen und zum
n&auml;chsten Abschnitt gehen.
<hr width="80%" align="left">
<ul>
  <li>Geben sie in der Kommandozeile <tt>cc</tt> ein und dr&uuml;cken
sie Enter:</li>
</ul>
<pre> $ cc<br> cc: No input files specified<br> $<br></pre>
<ul>
  <li>Wenn sie eine &auml;hnliche Antwort erhalten, dann haben sie
einen C-Compiler in ihrem Pfad. Wenn nicht, dann bedeutet es nicht
notwendigerweise, dass sie keinen installiert haben. Sie haben
m&ouml;glicherweise einen, aber vielleicht ist er nicht in ihrem Pfad.
Nat&uuml;rlich kann es auch bedeuten, dass sie <i>keinen</i> haben.
Versuchen sie dies:
    <ul>
      <li><tt>/usr/bin/cc</tt></li>
      <li><tt>/usr/bin/gcc</tt></li>
      <li><tt>/usr/local/bin/cc</tt></li>
      <li><tt>/usr/local/bin/gcc</tt></li>
      <li><tt>/usr/ccs/bin/cc</tt></li>
    </ul>
  </li>
  <li>Wenn nichts davon geht, dann m&uuml;ssen sie etwas mehr
plattformspezifischeres versuchen. Probieren sie auf der Kommandozeile,
je nach Betriebssystem, einen der folgenden Befehle:
    <ul>
      <li>Red Hat Linux: <tt>rpm -qa | grep gcc</tt> oder <tt>rpm -qa
| grep egcs</tt></li>
      <li>FreeBSD: schlie&szlig;t GCC standardm&auml;&szlig;ig ein</li>
    </ul>
  </li>
  <li>Wenn sie keinen installierten Compiler finden, dann m&uuml;ssen
sie einen lokalisieren und ihn installieren. Kontaktieren sie ihren
Betriebssystemanbieter oder einen anderen Betriebssystem-Support-Kanal.</li>
</ul>
<p>In diesem Abschnitt werden wir durch die eigentlichen Schritte des
Kompilierens von <i>qmail</i> gehen. Cut-n-Paste wird von Nutzen sein,
ist aber nicht wirklich notwendig.</p>
<h3><a name="unpack">2.5.2. Entpacken der Distribution</a></h3>
<p>Wenn sie so weit gekommen sind, dann haben sie einen
funktionierenden C-Compiler und Kopien der Tarballs. Als n&auml;chstes
kopieren oder verschieben sie die Tarballs in das Verzeichnis, in dem
sie die Arbeit verrichten wollen. <tt>/usr/local/src</tt> ist eine
gute Wahl f&uuml;r <i>qmail</i> und <i>ucspi-tcp</i>. <i>daemontools</i>
sollte unter <tt>/package</tt> gebaut werden.</p>
<p>Jetzt sollten sie vielleicht root werden, wenn sie es nicht bereits
sind.</p>
<pre> su<br> umask 022<br> mkdir -p /usr/local/src<br> mv netqmail-1.05.tar.gz ucspi-tcp-0.88.tar.gz /usr/local/src<br> mkdir -p /package<br> mv daemontools-0.76.tar.gz /package<br> chmod 1755 /package<br></pre>
<p>Nun k&ouml;nnen sie die Packages entpacken.</p>
<pre> cd /usr/local/src<br> gunzip netqmail-1.05.tar.gz<br> tar xpf netqmail-1.05.tar<br> cd netqmail-1.05<br> ./collate.sh <i># watch for errors here</i><br> cd ..<br> gunzip ucspi-tcp-0.88.tar.gz<br> tar xpf ucspi-tcp-0.88.tar<br> rm *.tar <i># optional, unless space is very tight</i><br> cd /package<br> gunzip daemontools-0.76.tar.gz<br> tar xpf daemontools-0.76.tar<br> rm *.tar <i># optional, again</i>
</pre>
<p>Es sollten jetzt Verzeichnisse mit den Namen <tt>/usr/local/src/netqmail-1.05</tt>,
<tt>/usr/local/src/ucspi-tcp-0.88</tt> und <tt>/package/admin/daemontools-0.76</tt>
existieren.</p>
<h3><a name="create-dirs">2.5.3. Verzeichnisse anlegen</a></h3>
<p>Seit <i>qmail</i>s Installationsprogramm die Unterverzeichnisse so
erzeugt, wie sie gebraucht werden, m&uuml;ssen sie nur das <i>qmail</i>-"home"-Verzeichnis
anlegen:</p>
<pre> mkdir /var/qmail<br></pre>
<p>Und weiter zum n&auml;chsten Abschnitt.</p>
<hr width="80%" align="left"><strong>Hinweis: </strong>Falls sie
einige oder alle der <i>qmail</i>-Dateien woanders ablegen wollen als
in <tt>/var</tt>, kann das durch das Erzeugen von symbolischen Links
unter <tt>/var/qmail</tt> erreicht werden, die zu den anderen
Speicherorten zeigen.
<p>Zum <i><b>Beispiel</b></i> k&ouml;nnen so die <i>qmail</i>-Konfigurationsdateien
in <tt>/etc/qmail</tt> gespeichert werden:</p>
<pre> mkdir /etc/qmail<br> ln -s /etc/qmail /var/qmail/control<br></pre>
<hr width="80%" align="left">
<h3><a name="create-users">2.5.4. Benutzer und Gruppen anlegen</a></h3>
<p>Der einfachste Weg, um die n&ouml;tigen Beutzer und Gruppen
anzulegen, ist, eine kleine Skriptdatei zu erstellen, die das f&uuml;r
sie erledigt. Im Quelltextverzeichnis finden sie eine Datei namens <tt>INSTALL.ids</tt>.
Sie enth&auml;lt die Befehle f&uuml;r viele Plattformen, das macht das
Kopieren mit einem neuen Namen und das Editieren der Datei schnell und
einfach.</p>
<pre> cd /usr/local/src/netqmail-1.05/netqmail-1.05<br> cp INSTALL.ids IDS<br></pre>
<p>Dann l&ouml;schen sie mit ihrem Lieblingseditor alles in der Datei, <b>au&szlig;er</b>
den Zeilen, die sie brauchen. Zum Beispiel sehen sie hier, wie <tt>IDS</tt>
nach dem Editieren f&uuml;r FreeBSD aussehen w&uuml;rde:</p>
<pre> pw groupadd nofiles<br> pw useradd qmaild -g nofiles -d /var/qmail -s /nonexistent<br> pw useradd alias -g nofiles -d /var/qmail/alias -s /nonexistent<br> pw useradd qmaill -g nofiles -d /var/qmail -s /nonexistent<br> pw useradd qmailp -g nofiles -d /var/qmail -s /nonexistent<br> pw groupadd qmail<br> pw useradd qmailq -g qmail -d /var/qmail -s /nonexistent<br> pw useradd qmailr -g qmail -d /var/qmail -s /nonexistent<br> pw useradd qmails -g qmail -d /var/qmail -s /nonexistent<br></pre>
<p>Um es dann laufen zu lassen, benutzen sie entweder <tt>chmod</tt>
um es auf&uuml;hrbar zu machen oder lassen sie es mit <tt>sh</tt>
laufen:</p>
<p>Erste Methode:</p>
<pre> chmod 700 IDS<br> ./IDS<br></pre>
<p>Zweite Methode:</p>
<pre> /bin/sh IDS<br></pre>
<p>Wenn das Skript durchgelaufen ist, werden alle ihre Benutzer und
Gruppen angelegt sein und sie k&ouml;nnen zum n&auml;chsten Abschnitt
weitergehen.</p>
<p>Aber was tun sie, wenn ihr System nicht in <tt>INSTALL.ids</tt>
aufgelistet ist? Sie m&uuml;ssen sie von Hand anlegen. Starten sie
ihren Lieblingseditor und editieren sie <tt>/etc/group</tt>. Sie
m&uuml;ssen folgende zwei Zeilen am Ende der Datei hinzuf&uuml;gen:</p>
<pre> qmail:*:2107:<br> nofiles:*:2108:<br></pre>
<hr width="80%" align="left"><strong>Hinweis: </strong>Stellen sie
sicher, dass 2107 und 2108 nicht bereits benutzt werden. Wenn sie
benutzt werden, w&auml;hlen sie zwei Zahlen, die noch frei sind.
<p>Als n&auml;chstes f&uuml;gen sie mit <tt>vipw</tt> (bei den meisten
Systeme ist es dabei, wenn nicht, werden sie wieder ihren Editor
ben&ouml;tigen, aber jetzt f&uuml;r <tt>/etc/passwd</tt>) diese Zeilen
am Ende der Datei hinzu:</p>
<pre> alias:*:7790:2108::/var/qmail/alias:/bin/true<br> qmaild:*:7791:2108::/var/qmail:/bin/true<br> qmaill:*:7792:2108::/var/qmail:/bin/true<br> qmailp:*:7793:2108::/var/qmail:/bin/true<br> qmailq:*:7794:2107::/var/qmail:/bin/true<br> qmailr:*:7795:2107::/var/qmail:/bin/true<br> qmails:*:7796:2107::/var/qmail:/bin/true<br></pre>
<hr width="80%" align="left"><strong>Hinweis: </strong>Stellen sie
sicher, dass 7790-7796 nicht bereits benutzt werden und dass 2107 und
2108 dieselben Gruppen-IDs sind, die oben benutzt werden.
<hr width="80%" align="left">
<p>Sie m&uuml;ssen keine dieser Zeilen unbedingt am <i>Ende</i> der
Datei einf&uuml;gen, es ist hier einfach der simpelste Weg, es zu
beschreiben.</p>
<p>Sie sind nun bereit, im n&auml;chsten Abschnitt fortzufahren.</p>
<h3><a name="do-build">2.5.5. Kompilieren</a></h3>
<p>Sie k&ouml;nnen jetzt anfangen, <i>qmail</i> zu kompilieren.
Wechseln sie in das Verzeichnis <tt>/usr/local/src/netqmail-1.05/netqmail-1.05</tt>
und los geht's:</p>
<pre> cd /usr/local/src/netqmail-1.05/netqmail-1.05<br></pre>
<p>Im Abschnitt <a href="#verify-compiler">Pr&uuml;fen sie die
Build-Umgebung</a> haben sie ihren C-Compiler lokalisiert. Wenn er
nicht mit <tt>cc</tt> aufgerufen wird oder das Verzeichnis, in dem er
liegt, nicht in ihrer <tt>PATH</tt>-Umgebungsvariablen ist,
m&uuml;ssen sie <tt>conf-cc</tt> editieren und <tt>conf-ld</tt>.
Sagen wir, ihre Compiler ist <tt>gcc</tt> und er ist in ihrem <tt>PATH</tt>.
Editieren sie einfach <tt>conf-cc</tt> und <tt>conf-ld</tt> und
ersetzen sie "cc" mit "gcc".</p>
<p>Nun geben sie das Folgende ein:</p>
<pre> make setup check<br></pre>
<p>Wenn der Build komplett ist, werden sie ihre
Nach-Installations-Konfiguration vornehmen m&uuml;ssen. Ein paar
Skripte werden angeboten, um diesen Job sehr viel einfacher zu machen.</p>
<p>Wenn ihr DNS richtig konfiguriert ist, dann sollte diese Skript
alles sein, was sie jetzt brauchen:</p>
<pre> ./config<br></pre>
<p>Wenn aus irgendeinem Grund <tt>config</tt> ihren Hostnamen nicht im
DNS finden kann, dann m&uuml;ssen sie das <tt>config-fast</tt>-Skript
laufen lassen:</p>
<pre> ./config-fast der<i>.volle.hostname</i>
</pre>
<p>Wenn zum Beispiel ihre Domain beispiel.com und der Hostname ihres
Computers delfin ist, dann w&uuml;rde ihre config-fast-Zeile so
aussehen:</p>
<pre> ./config-fast delfin.beispiel.com<br></pre>
<hr width="80%" align="left"><strong>Hinweis: </strong>In einem
kleinen lokalen LAN k&ouml;nnten sie eine Pseudodomain wie ".local"
benutzen. Wenn ihr Hostname zum Beispiel "mash" ist, k&ouml;nnen sie <tt>./config-fast
mash.local</tt> nehmen. Wenn sie das tun, konfigurieren sie <i>qmail</i>
unbedingt so, dass es einen g&uuml;ltigen Internetdomainnamen in den
Antwortadressen benutzt. (Siehe Abschnitt 3, <a href="#configuration">Konfiguration</a>.)
<hr width="80%" align="left">
<p><i>qmail</i> ist nun auf ihrem System installiert und bereit,
gestartet zu werden! Der n&auml;chste Abschnitt wird sie durch die
Schritte des Startens und Testens qmails f&uuml;hren.</p>
<h2><a name="install-ucspi">2.6. ucspi-tcp installieren</a></h2>
<p>Vorhin haben sie die <i>qmail</i>-, <i>ucspi-tcp</i> und <i>daemontools</i>-Tarballs
ausgepackt. Nun wechseln sie in das <i>ucspi-tcp</i>-Verzeichnis:</p>
<pre> cd /usr/local/src/ucspi-tcp-0.88<br></pre>
<p>Wenn sie im Abschnitt <a href="#do-build">Kompilieren</a> <tt>conf-cc</tt>
und <tt>conf-ld</tt> modifiziert haben, m&uuml;ssen sie dieselben
&Auml;nderungen in diesem Verzeichnis vornehmen.</p>
<p>Dann f&uuml;hren sie folgendes aus:</p>
<pre> patch &lt; /usr/local/src/netqmail-1.05/other-patches/ucspi-tcp-0.88.errno.patch<br> make<br> make setup check<br></pre>
<p>Das war's. <i>ucspi-tcp</i> ist installiert.</p>
<h2><a name="install-daemontools">2.7. daemontools installieren</a></h2>
<p>Wechseln sie in das <i>daemontools</i>-Build-Verzeichnis:</p>
<pre> cd /package/admin/daemontools-0.76<br></pre>
<p>Wie gehabt, wenn sie <tt>conf-cc</tt> und <tt>conf-ld</tt>
w&auml;hrend des <i>qmail</i>- und <i>ucspi-tcp</i>-Builds
modifiziert haben, werden sie dieselben &Auml;nderungen im <tt>src</tt>-Verzeichnis
machen m&uuml;ssen.</p>
<p>Dann f&uuml;hren sie folgendes aus:</p>
<pre> cd src<br> patch &lt; /usr/local/src/netqmail-1.05/other-patches/daemontools-0.76.errno.patch<br> cd ..<br> package/install<br></pre>
<p>Auf BSD-Systemen (kein <tt>/etc/inittab</tt>) werden sie an dieser
Stelle rebooten m&uuml;ssen, um <tt>svscan</tt> zu starten, den Master
Service Control Daemon.</p>
<p>Benutzen sie "<tt>ps -ef | grep svscan</tt>" oder "<tt>ps waux |
grep svscan</tt>" um sicherzustellen, dass <tt>svscan</tt> l&auml;uft.</p>
<hr width="80%" align="left"><strong>Hinweis: </strong>Unter Solaris
werden sie den <tt>/etc/inittab</tt>-Eintrag, der mit <tt>svscan</tt>
beginnt, von:
<pre> SV:123456:respawn:/command/svscanboot<br></pre>
<p>bis:</p>
<pre> SV:123456:respawn:/command/svscanboot &lt;/dev/null &gt;/var/log/svscan 2&gt;&amp;1<br></pre>
<p>oder:</p>
<pre> SV:123456:respawn:/command/svscanboot &lt;/dev/null &gt;/dev/msglog 2&gt;&amp;1<br></pre>
<p>modifizieren m&uuml;ssen, je nachdem, ob sie Fehlermeldungen, die
beim Start von <tt>svscan</tt> auftreten, an eine Logdatei oder an die
Systemkonsole gesandt werden sollen. Eine Erkl&auml;rung, warum das
notwendig ist, finden sie hier:</p>
<p><a href="http://marc.theaimsgroup.com/?l=log&amp;m=100327801309834&amp;w=2">http://marc.theaimsgroup.com/?l=log&amp;m=100327801309834&amp;w=2</a></p>
<hr width="80%" align="left">
<hr width="80%" align="left"><strong>Hinweis: </strong>Ein
Slackware-Benutzer berichtet, dass der <tt>SV</tt>-<tt>/etc/inittab</tt>-Eintrag
vor den <tt>x1</tt>-Eintrag verschoben werden muss, sonst <tt>svscan</tt>
startet nicht beim Booten.
<hr width="80%" align="left">
<h2><a name="start-qmail">2.8. <i>qmail</i> starten</a></h2>
<h3><a name="rc">2.8.1. <tt>/var/qmail/rc</tt></a></h3>
<p>Das <tt>/var/qmail/boot</tt>-Verzeichnis enth&auml;lt Beispiel-<i>qmail</i>-Boot-Skripte
f&uuml;r verschiedene Konfigurationen: <tt>/var/spool/mail</tt> versus
<tt>$HOME/Mailbox</tt>, zur Benutzung von <i>procmail</i> oder <i>dot-forward</i>
und verschiedene Kombinationen davon. Sie k&ouml;nnen sie sich gerne
ansehen, aber f&uuml;r unsere Installation werden wir folgendes Skript
verwenden:</p>
<pre>#!/bin/sh<br><br># stdout wird fuer das Logging verwendet<br># control/defaultdelivery wird von qmail-local standardmaessig benutzt, um Nachrichten zu versenden<br><br>exec env - PATH="/var/qmail/bin:$PATH" \<br>qmail-start "`cat /var/qmail/control/defaultdelivery`"<br></pre>
<hr width="80%" align="left"><strong>Hinweis: </strong>Dieses Skript
benutzt linksgeneigte Hochkommas (<tt>`</tt>), keine einfachen
Hochkommas (<tt>'</tt>). Am besten kopieren sie die Skripte aus dieser
Anleitung und f&uuml;gen sie ein, anstatt sie Abzutippen.
<hr width="80%" align="left">
<p>Benutzen sie ihren Editor, um das obige <tt>/var/qmail/rc</tt> zu
erstellen, dann f&uuml;hren sie diese Befehle aus:</p>
<pre> chmod 755 /var/qmail/rc<br> mkdir /var/log/qmail<br></pre>
<p>An dieser Stelle m&uuml;ssen sie sich f&uuml;r die
Standardzustellmethode f&uuml;r Nachrichten entscheiden, die nicht
durch eine .qmail-Datei zugestellt werden. Die folgende Tabelle
erkl&auml;rt einige &uuml;bliche Wahlm&ouml;glichkeiten.</p>
<table class="columns" border="1">
  <tbody>
    <tr class="heading">
      <td><strong>Mailboxformat</strong></td>
      <td><strong>Name</strong></td>
      <td><strong>Ort</strong></td>
      <td><strong>Standardzustellung</strong></td>
      <td><strong>Kommentare</strong></td>
    </tr>
    <tr>
      <td>mbox</td>
      <td><tt>Mailbox</tt></td>
      <td><tt>$HOME</tt></td>
      <td><tt>./Mailbox</tt></td>
      <td>die &uuml;blichste Methode; funktioniert mit den meisten MUAs</td>
    </tr>
    <tr>
      <td>maildir</td>
      <td><tt>Maildir</tt></td>
      <td><tt>$HOME</tt></td>
      <td><tt>./Maildir/</tt></td>
      <td>zuverl&auml;ssiger; weniger MUA-Support</td>
    </tr>
    <tr>
      <td>mbox</td>
      <td><tt>&nbsp;<i>Benutzername</i></tt></td>
      <td><tt>/var/spool/mail</tt></td>
      <td>Siehe <tt>INSTALL.vsm</tt></td>
      <td>die traditionelle UNIX-Mailbox</td>
    </tr>
  </tbody>
</table>
<p>Siehe <tt>INSTALL.mbox</tt>, <tt>INSTALL.maildir</tt> und <tt>INSTALL.vsm</tt>
f&uuml;r mehr Informationen.</p>
<p>Um den Standardmailboxtyp auszuw&auml;hlen, f&uuml;gen sie einfach
den <i>Standardzustellung</i>-Wert aus dem Tabelle in <tt>/var/qmail/control/defaultdelivery</tt>
ein. Um beispielsweise die Standard-<i>qmail</i>-<tt>Mailbox</tt>-Zustellung
auszuw&auml;hlen, tun sie folgendes:</p>
<pre> echo ./Mailbox &gt;/var/qmail/control/defaultdelivery<br></pre>
<hr width="80%" align="left"><strong>Hinweis: </strong><tt>defaultdelivery</tt>
ist keine Standard-<i>qmail</i>-Kontroll-Datei. Es ist ein Feature der
obigen <tt>/var/qmail/rc</tt>-Datei. Das <i>defaultdelivery</i>-Argument
in <tt>qmail-start</tt> ist das <i>contents</i> einer <tt>.qmail</tt>-Datei.
Dieses spezifiziert die Zustellinstruktionen f&uuml;r den Fall, dass
kein eigentliches <tt>.qmail</tt> gefunden wird. Indem man diese
Instruktionen in ein separate Kontrolldatei auslagert, muss man
keine&nbsp; Shell-Metazeichen in den Zustellinstruktionen zu quoten und
vermeidet unsaubere mehrzeilige Befehlsargumente.
<hr width="80%" align="left">
<h3><a name="system-startup">2.8.2. Systemstartdateien</a></h3>
<h4><a name="qmailctl-script">2.8.2.1. Das <tt>qmailctl</tt>-Skript</a></h4>
<p>Wenn sie das <tt>/var/qmail/rc</tt>-Skript von Hand starten
mussten, dann wurde <i>qmail</i> m&ouml;glicherweise nur <i>teilweise</i>
gestartet. Aber wir wollen <i>qmail</i> jedes Mal automatisch
gestartet haben, wenn das System gebootet wird und wir wollen es sauber
heruntergefahren haben, wenn das System angehalten wird.</p>
<p>Das wird durch das Erstellen eines Start/Stop-Skriptes wie dem
folgenden in <tt>/var/qmail/bin/qmailctl</tt> erreicht:</p>
<pre>#!/bin/sh<br><br># Beschreibung: Das qmail MTA<br><br>PATH=/var/qmail/bin:/bin:/usr/bin:/usr/local/bin:/usr/local/sbin<br>export PATH<br><br>QMAILDUID=`id -u qmaild`<br>NOFILESGID=`id -g qmaild`<br><br>case "$1" in<br> start)<br> echo "qmail wird gestartet"<br> if svok /service/qmail-send ; then<br> svc -u /service/qmail-send /service/qmail-send/log<br> else<br> echo "qmail-send Ueberwachung laeuft nicht"<br> fi<br> if svok /service/qmail-smtpd ; then<br> svc -u /service/qmail-smtpd /service/qmail-smtpd/log<br> else<br> echo "qmail-smtpd Ueberwachung laeuft nicht"<br> fi<br> if [ -d /var/lock/subsys ]; then<br> touch /var/lock/subsys/qmail<br> fi<br> ;;<br> stop)<br> echo "Stoppe qmail..."<br> echo " qmail-smtpd"<br> svc -d /service/qmail-smtpd /service/qmail-smtpd/log<br> echo " qmail-send"<br> svc -d /service/qmail-send /service/qmail-send/log<br> if [ -f /var/lock/subsys/qmail ]; then<br> rm /var/lock/subsys/qmail<br> fi<br> ;;<br> stat)<br> svstat /service/qmail-send<br> svstat /service/qmail-send/log<br> svstat /service/qmail-smtpd<br> svstat /service/qmail-smtpd/log<br> qmail-qstat<br> ;;<br> doqueue|alrm|flush)<br> echo "Leere die Timeouttabelle und sende ein ALRM-Signal an qmail-send."<br> /var/qmail/bin/qmail-tcpok<br> svc -a /service/qmail-send<br> ;;<br> queue)<br> qmail-qstat<br> qmail-qread<br> ;;<br> reload|hup)<br> echo "Sende HUP-Signal an qmail-send."<br> svc -h /service/qmail-send<br> ;;<br> pause)<br> echo "Lasse qmail-send pausieren"<br> svc -p /service/qmail-send<br> echo "Lasse qmail-smtpd pausieren"<br> svc -p /service/qmail-smtpd<br> ;;<br> cont)<br> echo "Setze qmail-send fort"<br> svc -c /service/qmail-send<br> echo "Setze qmail-smtpd fort"<br> svc -c /service/qmail-smtpd<br> ;;<br> restart)<br> echo "Starte qmail neu:"<br> echo "* Stoppe qmail-smtpd."<br> svc -d /service/qmail-smtpd /service/qmail-smtpd/log<br> echo "* Sende SIGTERM an qmail-send und starte es neu."<br> svc -t /service/qmail-send /service/qmail-send/log<br> echo "* Starte qmail-smtpd neu."<br> svc -u /service/qmail-smtpd /service/qmail-smtpd/log<br> ;;<br> cdb)<br> tcprules /etc/tcp.smtp.cdb /etc/tcp.smtp.tmp &lt; /etc/tcp.smtp<br> chmod 644 /etc/tcp.smtp.cdb<br> echo "/etc/tcp.smtp neu geladen."<br> ;;<br> help)<br> cat &lt;&lt;HILFE<br> stop -- stoppt Mailservice (smtp-Verbindungen werden abgewiesen, nichts geht nach draussen)<br> start -- startet Mailservice (smtp-Verbindungen werden akzeptiert, Mail kann nach draussen)<br> pause -- stoppt Mailservice zeitweilig (Verbindungen werden akzeptiert, nichts geht nach draussen)<br> cont -- setzt pausierenden Mailservice fort<br> stat -- zeigt Status des Mailservice an<br> cdb -- baut tcpserver cdb-Datei fuer smtp neu<br>restart -- stoppt und startet smtp neu, sendet qmail-send ein TERM &amp; startet es neu<br>doqueue -- setzt Nachrichten in der Warteschlange auf sofortige Zustellung<br> reload -- sendet qmail-send ein HUP, liest locals und virtualdomains neu<br> queue -- zeigt Status der Warteschlange<br> alrm -- tut das gleiche wie doqueue<br> flush -- tut das gleiche wie doqueue<br> hup -- tut das gleiche wie reload<br>HILFE<br> ;;<br> *)<br> echo "Benutzung: $0 {start|stop|restart|doqueue|flush|reload|stat|pause|cont|cdb|queue|help}"<br> exit 1<br> ;;<br>esac<br><br>exit 0<br><br></pre>
<p>Dieses Skript ist verf&uuml;gbar unter <a
 href="http://www.lifewithqmail.org/qmailctl-script-dt70">http://www.lifewithqmail.org/qmailctl-script-dt70</a>.</p>
<p>Erstellen sie dieses Skript mittels ihres Editors oder indem sie es
mit ihrem Webbrowser downloaden (empfohlen).</p>
<p>Machen sie das <tt>qmailctl</tt>-Skript ausf&uuml;hrbar und
verlinken sie es zu einem Verzeichnis in ihrem Pfad:</p>
<pre> chmod 755 /var/qmail/bin/qmailctl<br> ln -s /var/qmail/bin/qmailctl /usr/bin<br></pre>
<h4><a name="supervise-tree">2.8.2.2. Die <tt>supervise</tt>-Skripte</a></h4>
<p>Nun erstellen sie die <tt>supervise</tt>-Verzeichnisse f&uuml;r die
<i>qmail</i>-Services:</p>
<pre> mkdir -p /var/qmail/supervise/qmail-send/log<br> mkdir -p /var/qmail/supervise/qmail-smtpd/log<br></pre>
<p>Erstellen sie die <tt>/var/qmail/supervise/qmail-send/run</tt>-Datei:</p>
<pre>#!/bin/sh<br>exec /var/qmail/rc<br></pre>
<p>Erstellen sie die <tt>/var/qmail/supervise/qmail-send/log/run</tt>-Datei:</p>
<pre>#!/bin/sh<br>exec /usr/local/bin/setuidgid qmaill /usr/local/bin/multilog t /var/log/qmail<br></pre>
<p>Erstellen sie die <tt>/var/qmail/supervise/qmail-smtpd/run</tt>-Datei:</p>
<pre>#!/bin/sh<br><br>QMAILDUID=`id -u qmaild`<br>NOFILESGID=`id -g qmaild`<br>MAXSMTPD=`cat /var/qmail/control/concurrencyincoming`<br>LOCAL=`head -1 /var/qmail/control/me`<br><br>if [ -z "$QMAILDUID" -o -z "$NOFILESGID" -o -z "$MAXSMTPD" -o -z "$LOCAL" ]; then<br> echo QMAILDUID, NOFILESGID, MAXSMTPD oder LOCAL ist nicht gesetzt in<br> echo /var/qmail/supervise/qmail-smtpd/run<br> exit 1<br>fi<br><br>if [ ! -f /var/qmail/control/rcpthosts ]; then<br> echo "Keine /var/qmail/control/rcpthosts vorhanden!"<br> echo "Verweigere Start des SMTP-Listeners, weil das einen offenen Relay erzeugen wuerde."<br> exit 1<br>fi<br><br>exec /usr/local/bin/softlimit -m 2000000 \<br> /usr/local/bin/tcpserver -v -R -l "$LOCAL" -x /etc/tcp.smtp.cdb -c "$MAXSMTPD" \<br> -u "$QMAILDUID" -g "$NOFILESGID" 0 smtp /var/qmail/bin/qmail-smtpd 2&gt;&amp;1<br></pre>
<hr width="80%" align="left"><strong>Hinweis: </strong><tt>concurrencyincoming</tt>
ist keine Standard-qmail-Kontrolldatei. Es ist ein Feature des obigen
Skriptes. &Uuml;brigens ist es eine <tt>-1</tt> (minus eins) in der <tt>LOCAL</tt>-Zeile
und ein <tt>-l</tt> (minus kleines L) in der <tt>tcpserver</tt>-Zeile.
<hr width="80%" align="left">
<hr width="80%" align="left"><strong>Hinweis: </strong>Unter Solaris
arbeitet das normale <tt>id</tt>-Programm in diesem Skript nicht
richtig. Benutzen sie <tt>/usr/xpg4/bin/id</tt> anstelle von <tt>id</tt>,
z.B.:
<pre> QMAILDUID=`/usr/xpg4/bin/id -u qmaild`<br> NOFILESGID=`/usr/xpg4/bin/id -g qmaild`<br></pre>
<hr width="80%" align="left">
<hr width="80%" align="left"><strong>Hinweis: </strong>Das
Speicherlimit, das im <tt>softlimit</tt>-Befehl angegeben wird, muss
m&ouml;glicherweise erh&ouml;ht werden, abh&auml;ngig von ihrem
Betriebssystem und ihrer Hardwareplattform. Wenn Verbindungsversuche zu
Port 25 fehlschlagen oder externe Systeme keine Mail schicken
k&ouml;nnen, versuchen sie es auf 3000000 oder 4000000 anzuheben.
<hr width="80%" align="left">
<p>Erstellen sie die <tt>concurrencyincoming</tt>-Kontrolldatei:</p>
<pre> echo 20 &gt; /var/qmail/control/concurrencyincoming<br> chmod 644 /var/qmail/control/concurrencyincoming<br></pre>
<p>Erstellen sie die <tt>/var/qmail/supervise/qmail-smtpd/log/run</tt>-Datei:</p>
<pre>#!/bin/sh<br>exec /usr/local/bin/setuidgid qmaill /usr/local/bin/multilog t /var/log/qmail/smtpd<br></pre>
<p>Machen sie die run-Dateien ausf&uuml;hrbar:</p>
<pre> chmod 755 /var/qmail/supervise/qmail-send/run<br> chmod 755 /var/qmail/supervise/qmail-send/log/run<br> chmod 755 /var/qmail/supervise/qmail-smtpd/run<br> chmod 755 /var/qmail/supervise/qmail-smtpd/log/run<br></pre>
<p>Danach richten sie die Logverzeichnisse ein:</p>
<pre> mkdir -p /var/log/qmail/smtpd<br> chown qmaill /var/log/qmail /var/log/qmail/smtpd<br></pre>
<p>Zum Schluss verlinken sie die <tt>supervise</tt>-Verzeichnisse nach
<tt>/service</tt>:</p>
<pre> ln -s /var/qmail/supervise/qmail-send /var/qmail/supervise/qmail-smtpd /service<br></pre>
<p>Das <tt>/service</tt>-Verzeichnis wird erstellt, wenn <i>daemontools</i>
installiert wird.</p>
<hr width="80%" align="left"><strong>Hinweis: </strong>Das <i>qmail</i>-System
wird automatisch starten, bald nachdem diese Links erstellt sind. Wenn
sie es jetzt nicht laufen lassen wollen, tun sie folgendes:
<pre> qmailctl stop<br></pre>
<hr width="80%" align="left">
<h4><a name="smtp-access-control">2.8.2.3. SMTP-Zugriffskontrolle</a></h4>
<p>Erlauben sie dem lokalen Host Mails mittels SMTP einzuf&uuml;gen:</p>
<pre> echo '127.:allow,RELAYCLIENT=""' &gt;&gt;/etc/tcp.smtp<br> qmailctl cdb<br></pre>
<h3><a name="stop-sendmail">2.8.3. Anhalten und Abschalten des
installierten MTA</a></h3>
<p>Obwohl es m&ouml;glich ist, <i>qmail</i> und ihren exististierenden
MTA, was wahrscheinlich <i>Sendmail</i> ist, gleichzeitig laufen zu
lassen, kann ich das nicht empfehlen, au&szlig;er, sie wissen, was sie
tun. Und, offen gesagt, wenn sie das hier lesen, dann wissen sie
vermutlich nicht, was sie tun. :-)</p>
<p>Wenn ihr existierender MTA <i>Sendmail</i> ist, dann sollten sie
ihn durch das Ausf&uuml;hren des <tt>init.d</tt>-Skriptes mit dem
"stop"-Argument stoppen k&ouml;nnen. Beispielsweise sollte einer der
folgenden Befehle funktionieren:</p>
<pre> /etc/init.d/sendmail stop<br> /sbin/init.d/sendmail stop<br> /etc/rc.d/init.d/sendmail stop<br></pre>
<p>Wenn sie kein <tt>init.d/sendmail</tt>-Skript finden k&ouml;nnen,
dann lokalisieren sie <tt>sendmail</tt>s PID mittels "<tt>ps -ef|grep
sendmail</tt>" oder "<tt>ps waux|grep sendmail</tt>" und stoppen sie es
mittels:</p>
<pre> kill <i>PID-of-sendmail</i>
</pre>
<p>Wenn <i>Sendmail</i> nicht ihr MTA ist, dann sehen sie in der
Dokumentation ihres MTA wegen der korrekten Abschaltprozedur nach.</p>
<p>Sie sollten au&szlig;erdem erw&auml;gen, den alten MTA komplett von
ihrem System zu entfernen. Zumindest sollten sie das <tt>init.d</tt>-Skript
abschalten, so dass es nicht versucht, den MTA wieder zu starten, wenn
das System neu gebootet wird.</p>
<p>Bei Red Hat Linux kann das Entfernen von <i>Sendmail</i> so
erreicht werden:</p>
<pre> rpm -e --nodeps sendmail<br></pre>
<hr width="80%" align="left"><strong>Hinweis: </strong>Wenn sie eine
RPM-basierte Linux-Distribution wie Red Hat benutzen, kann das
Entfernen des MTA-Packages einige Probleme bereiten. Werkzeuge, die das
System updaten, k&ouml;nnten versuchen, Sendmail wieder zu installieren
oder MUA-Packages k&ouml;nnen nicht mehr installiert werden, weil sie
nicht feststellen k&ouml;nnen, ob eine MTA installiert ist. Mate Wierdl
bietet ein Rumpfpackage namens "fake_mta" an, dass installiert werden
kann, um diese Probleme zu vermeiden. Installieren sie einfach das RPM,
das hier verf&uuml;gbar ist: <a
 href="http://www.csi.hu/mw/fake_mta-1-1memphis.noarch.rpm">http://www.csi.hu/mw/fake_mta-1-1memphis.noarch.rpm</a>.
<hr width="80%" align="left">
<p>Stellen sie sicher, dass nichts den SMTP-Port (25) abh&ouml;rt.
Schuldige k&ouml;nnten ein alter MTA, <tt>inetd</tt> oder <tt>xinetd</tt>
sein. Der folgende Befehl sollte keinen Output produzieren (es sei
denn, der qmail-smtpd-Service l&auml;uft):</p>
<pre> netstat -a | grep smtp<br></pre>
<p>Wenn etwas l&auml;uft, stellen sie sicher, dass es nicht <i>qmail</i>
ist, indem sie folgendes tun:</p>
<pre> qmailctl stop<br></pre>
<p>Wiederholen sie den <tt>netstat</tt>-Check:</p>
<pre> netstat -a | grep smtp<br></pre>
<p>Wenn sie immer noch Output erhalten, dann m&uuml;ssen sie den
Schuldigen finden und das Problem beseitigen, bevor <i>qmail</i>s
SMTP-Service laufen kann.</p>
<p>Zuletzt ersetzen sie jedes existierende <tt>/usr/lib/sendmail</tt>
mit der <i>qmail</i>-Version:</p>
<pre> mv /usr/lib/sendmail /usr/lib/sendmail.old <i># ignorieren sie Fehlermeldungen</i><br> mv /usr/sbin/sendmail /usr/sbin/sendmail.old <i># ignorieren sie Fehlermeldungen</i><br> chmod 0 /usr/lib/sendmail.old /usr/sbin/sendmail.old <i># ignorieren sie Fehlermeldungen</i><br> ln -s /var/qmail/bin/sendmail /usr/lib<br> ln -s /var/qmail/bin/sendmail /usr/sbin<br></pre>
<hr width="80%" align="left"><strong>Hinweis: </strong>Es ist wichtig,
die <tt>sendmail</tt>-Links zu erstellen, ungeachtet ihres vorherigen
MTA, wenn sie einen hatten. Der <tt>sendmail</tt>-Befehl wird von
vielen Applikationen zum Versenden von Mail aufgerufen.
<hr width="80%" align="left">
<p>Der letzte Schritt ist, ein paar Systemaliase zu erstellen.</p>
<h3><a name="system-aliases">2.8.4. Systemaliase erstellen</a></h3>
<p>Es gibt drei Systemaliase, die auf allen <i>qmail</i>-Installationen
erstellt werden k&ouml;nnen:</p>
<table class="columns" border="1">
  <tbody>
    <tr class="heading">
      <td><strong>Alias</strong></td>
      <td><strong>Zweck</strong></td>
    </tr>
    <tr>
      <td><tt>postmaster</tt></td>
      <td>Nach RFC 2821 erforderlich, zeigt auf den Mailadministrator
(sie)</td>
    </tr>
    <tr>
      <td><tt>mailer-daemon</tt></td>
      <td>De-Facto-Standard-Empf&auml;nger f&uuml;r einige Bounces</td>
    </tr>
    <tr>
      <td><tt>root</tt></td>
      <td>leitet Mail von einem besonderen Account zum
Systemadministrator um</td>
    </tr>
  </tbody>
</table>
<p>Um diese Aliase zu erstellen, entscheiden sie f&uuml;r jedes, wohin
es verweisen soll (einen lolalen Benutzer oder eine entfernte Adresse)
und erstellen und f&uuml;llen sie die zugeh&ouml;rigen <tt>.qmail</tt>-Dateien.
Wenn zum Beispiel der lokale Benutzer <tt>dave</tt> sowohl System- und
Mailadministrator ist:</p>
<pre> echo dave &gt; /var/qmail/alias/.qmail-root<br> echo dave &gt; /var/qmail/alias/.qmail-postmaster<br> ln -s .qmail-postmaster /var/qmail/alias/.qmail-mailer-daemon<br> chmod 644 /var/qmail/alias/.qmail-root /var/qmail/alias/.qmail-postmaster<br></pre>
<p>Siehe <tt>INSTALL.alias</tt> f&uuml;r mehr Details.</p>
<h3><a name="start-it">2.8.5. <i>qmail</i> starten</a></h3>
<p>Wenn sie <i>qmail</i> oben nach der Erstellung der Links in <tt>/service</tt>
gestoppt haben, dann sollten sie es jetzt neu starten:</p>
<pre> qmailctl start<br></pre>
<h2><a name="test">2.9. Testen der Installation</a></h2>
<p><i>qmail</i> sollte nun laufen. Starten sie zuerst <tt>qmailctl stat</tt>,
um sicherzustellen, dass die Services hochgefahren sind und laufen:</p>
<pre> # qmailctl stat<br> /service/qmail-send: up (pid 30303) 187 seconds<br> /service/qmail-send/log: up (pid 30304) 187 seconds<br> /service/qmail-smtpd: up (pid 30305) 187 seconds<br> /service/qmail-smtpd/log: up (pid 30308) 187 seconds<br> messages in queue: 0<br> messages in queue but not yet preprocessed: 0<br></pre>
<p>Alle vier Services sollten l&auml;nger als eine Sekunde "up" sein.
Wenn das nicht so ist, dann haben sie sich m&ouml;glicherweise im
zugeh&ouml;rigen run-Skript vertippt oder sie haben einen oder mehrere
Schritte beim Erstellen der n&ouml;tigen Dateien, Verzeichnisse oder
Links ausgelassen. Gehen sie erneut Schritt f&uuml;r Schritt durch die
Installation und &uuml;berpr&uuml;fen sie ihre Arbeit. Sie k&ouml;nnen
auch das <tt>inst_check</tt>-Skript downloaden und laufen lassen, das
unter <a href="http://lifewithqmail.org/inst_check">http://lifewithqmail.org/inst_check</a>
verf&uuml;gbar ist. Beispiel:</p>
<pre> # sh inst_check<br> ! /var/log/qmail has wrong owner, should be qmaill<br> ...try: chown qmaill /var/log/qmail<br> #<br></pre>
<p>Wenn <tt>inst_check</tt> Probleme findet, beseitigen sie sie und
starten sie das Skript erneut. Wenn alles gut aussieht, wird <tt>inst_check</tt>
melden:</p>
<pre> Congratulations, your LWQ installation looks good!<br></pre>
<p>Das <tt>readproctitle</tt>-Programm h&auml;lt ein Log der
Fehlermeldungen, die von Services generiert werden, die von scscan
gemanagt werden. Um diese Nachrichten zu sehen, benutzen sie <tt>ps</tt>
oder irgend einen anderen Prozessauflistungsbefehl. Beispielsweise
k&ouml;nnten sie soetwas sehen:</p>
<pre> # ps -efl | grep "service errors" | grep -v grep<br> 000 S root 1006 1001 0 76 0 - 334 pipe_w Mar31 ? 00:00:00<br> readproctitle service errors: ...unable to start qmail-smtpd/run: exec format error<br> #<br></pre>
<p>In diesem Fall ist das Problem, dass ein Fehler in der ersten Zeile
des <tt>/service/qmail-smtpd/run</tt>-Skriptes sitzt--meist dadurch
verursacht, dass die Datei im DOS-Format vorliegt (CR-LF-Zeilenenden
anstelle von Unix' nur-LF).</p>
<p>Manchmal hilft es, einen Service von Hand zu starten, um
Konfigurationsprobleme zu finden. Wenn beispielsweise ihr <tt>qmail-smtpd/log</tt>-Service
nicht l&auml;uft, dann tun sie folgendes:</p>
<pre> cd /service/qmail-smtpd/log<br> svc -d .<br> ./run<br> <i>wenn es keine Fehler gibt, geben sie eine Zeile Text ein und dr&uuml;cken sie ENTER</i><br> <i>wenn es weiterhin Fehler gibt, dr&uuml;cken sie STRG-D (Ende der Datei)</i>
</pre>
<p>An dieser Stelle sollten sie in der Lage sein, das Problem zu
identifizieren und es zu beseitigen. Wenn sie das erstmal getan haben,
kehren sie, wenn n&ouml;tig, in das Serviceverzeichnis zur&uuml;ck und
tun sie folgendes:</p>
<pre> svc -u .<br></pre>
<p>Wenn erst alle Services mit &gt;1 Sekunde Betriebszeit oben sind,
folgen die den Instruktionen in <tt>TEST.deliver</tt> und <tt>TEST.receive</tt>,
um sicherzustellen, dass sie korrekt arbeiten. Beachten sie, dass, wenn
sie diese Instruktionen benutzen, das Logging von <tt>multilog</tt>
nach <tt>/var/log/qmail</tt>, nicht von <tt>splogger</tt> nach
soetwas wie <tt>/var/log/maillog</tt> vorgenommen wird.</p>
<hr width="80%" align="left"><strong>Hinweis: </strong>Wenn sie das
maildir-Mailboxformat als Standardzustellmethode gew&auml;hlt haben,
dann m&uuml;ssen sie ein <tt>Maildir</tt>-Verzeichnis in ihrem
Home-Verzeichnis und im Home-Verzeichnis der <tt>alias</tt>e
erstellen, bevor sie diese Instruktionen ausprobieren. Lesen sie den <a
 href="#maildir-delivery">maildir</a>-Abschnitt, um zu verstehen, wie
dieses Verzeichnis richtig erstellt wird.
<hr width="80%" align="left">
<hr>
<h1><a name="configuration">3. Konfiguration</a></h1>
<p>Sie haben <i>qmail</i> mit der empfohlenen
Quellcode-Tarball-Methode, einer der sebstkompilierenden Packages oder
einem var-qmail-Package installiert. Dieser Abschnitt enth&auml;lt
Informationen, die sie brauchen werden, um <i>qmail</i> so zu
konfigurieren, dass es auf die Art funktioniert, die sie wollen.</p>
<h2><a name="config-files">3.1. Konfigurationsdateien</a></h2>
<p>Alle <i>qmail</i>-Systemkonfigurationsdateien, mit Ausnahme der <tt>.qmail</tt>-Dateien
in <tt>~alias</tt>, befinden sich in <tt>/var/qmail/control</tt>. Die
<tt>qmail-control</tt> Man Page enth&auml;lt eine Tabelle, wie die
folgende:</p>
<table class="columns" border="1">
  <tbody>
    <tr class="heading">
      <td><strong>Kontrollelement</strong></td>
      <td><strong>Standardwert</strong></td>
      <td><strong>Benutzt von</strong></td>
      <td><strong>Zweck</strong></td>
    </tr>
    <tr>
      <td><a name="badmailfrom">badmailfrom</a></td>
      <td><i>none</i></td>
      <td>qmail-smtpd</td>
      <td>auf die schwarze Liste gesetzte Absenderadressen</td>
    </tr>
    <tr>
      <td><a name="bouncefrom">bouncefrom</a></td>
      <td>MAILER-DAEMON</td>
      <td>qmail-send</td>
      <td>Benutzername des Bounce-Absenders</td>
    </tr>
    <tr>
      <td><a name="bouncehost">bouncehost</a></td>
      <td>me</td>
      <td>qmail-send</td>
      <td>Hostname des bounce-Absenders</td>
    </tr>
    <tr>
      <td><a name="concurrencyincoming">concurrencyincoming</a></td>
      <td><i>none</i></td>
      <td>/service/qmail-smtpd/run</td>
      <td>Maximum der gleichzeitig hereinkommenden SMTP-Verbindungen</td>
    </tr>
    <tr>
      <td><a name="concurrencylocal">concurrencylocal</a></td>
      <td>10</td>
      <td>qmail-send</td>
      <td>Maximum der gleichzeitigen lokalen Zustellungen</td>
    </tr>
    <tr>
      <td><a name="concurrencyremote">concurrencyremote</a></td>
      <td>20</td>
      <td>qmail-send</td>
      <td>Maximum der gleichzeitigen Remote-Zustellungen</td>
    </tr>
    <tr>
      <td><a name="defaultdelivery">defaultdelivery</a></td>
      <td><i>none</i></td>
      <td>/var/qmail/rc</td>
      <td>Standard-.qmail-Datei</td>
    </tr>
    <tr>
      <td><a name="defaultdomain">defaultdomain</a></td>
      <td>me</td>
      <td>qmail-inject</td>
      <td>Standard-Domainname</td>
    </tr>
    <tr>
      <td><a name="defaulthost">defaulthost</a></td>
      <td>me</td>
      <td>qmail-inject</td>
      <td>Standard-Hostname</td>
    </tr>
    <tr>
      <td><a name="databytes">databytes</a></td>
      <td>0</td>
      <td>qmail-smtpd</td>
      <td>max Anzahl Bytes in einer Nachricht (0=kein Limit)</td>
    </tr>
    <tr>
      <td><a name="doublebouncehost">doublebouncehost</a></td>
      <td>me</td>
      <td>qmail-send</td>
      <td>Hostname des Doppel-Bounce-Absenders</td>
    </tr>
    <tr>
      <td><a name="doublebounceto">doublebounceto</a></td>
      <td>postmaster</td>
      <td>qmail-send</td>
      <td>Benutzer, der die Doppel-Bounces empfangen soll</td>
    </tr>
    <tr>
      <td><a name="envnoathost">envnoathost</a></td>
      <td>me</td>
      <td>qmail-send</td>
      <td>Standard-Domain f&uuml;r Adressen ohne "@"</td>
    </tr>
    <tr>
      <td><a name="helohost">helohost</a></td>
      <td>me</td>
      <td>qmail-remote</td>
      <td>Hostname, der im SMTP-HELO-Befehl benutzt wird</td>
    </tr>
    <tr>
      <td><a name="idhost">idhost</a></td>
      <td>me</td>
      <td>qmail-inject</td>
      <td>Hostname f&uuml;r Nachrichten-IDs</td>
    </tr>
    <tr>
      <td><a name="localiphost">localiphost</a></td>
      <td>me</td>
      <td>qmail-smtpd</td>
      <td>Name, der durch lokale IP-Addresse ersetzt wird</td>
    </tr>
    <tr>
      <td><a name="locals">locals</a></td>
      <td>me</td>
      <td>qmail-send</td>
      <td>Domains, die wir lokal beliefern</td>
    </tr>
    <tr>
      <td><a name="me">me</a></td>
      <td><i>FQDN of system</i></td>
      <td>various</td>
      <td>Standard f&uuml;r viele Kontrolldateien</td>
    </tr>
    <tr>
      <td><a name="morercpthosts">morercpthosts</a></td>
      <td><i>none</i></td>
      <td>qmail-smtpd</td>
      <td>Zweite rcpthosts-Datenbank</td>
    </tr>
    <tr>
      <td><a name="percenthack">percenthack</a></td>
      <td><i>none</i></td>
      <td>qmail-send</td>
      <td>Domains, die "%"-artige Weiterleitungen benutzen d&uuml;rfen</td>
    </tr>
    <tr>
      <td><a name="plusdomain">plusdomain</a></td>
      <td>me</td>
      <td>qmail-inject</td>
      <td>Domain, die durch f&uuml;hrendes "+" ersetzt wird</td>
    </tr>
    <tr>
      <td><a name="qmqpservers">qmqpservers</a></td>
      <td><i>none</i></td>
      <td>qmail-qmqpc</td>
      <td>IP-Adressen der QMQP-Server</td>
    </tr>
    <tr>
      <td><a name="queuelifetime">queuelifetime</a></td>
      <td>604800</td>
      <td>qmail-send</td>
      <td>Sekunden, die eine Nachricht in der Warteschlange verbleiben
kann</td>
    </tr>
    <tr>
      <td><a name="rcpthosts">rcpthosts</a></td>
      <td><i>none</i></td>
      <td>qmail-smtpd</td>
      <td>Domains, f&uuml;r die wir Mails akzeptieren</td>
    </tr>
    <tr>
      <td><a name="smtpgreeting">smtpgreeting</a></td>
      <td>me</td>
      <td>qmail-smtpd</td>
      <td>SMTP-Gru&szlig;botschaft</td>
    </tr>
    <tr>
      <td><a name="smtproutes">smtproutes</a></td>
      <td><i>none</i></td>
      <td>qmail-remote</td>
      <td>k&uuml;nstliche SMTP-Routen</td>
    </tr>
    <tr>
      <td><a name="timeoutconnect">timeoutconnect</a></td>
      <td>60</td>
      <td>qmail-remote</td>
      <td>Wie lange, in Sekunden, auf eine SMTP-Verbindung gewartet wird</td>
    </tr>
    <tr>
      <td><a name="timeoutremote">timeoutremote</a></td>
      <td>1200</td>
      <td>qmail-remote</td>
      <td>Wie lange, in Sekunden, auf einen Remote-Server gewartet wird</td>
    </tr>
    <tr>
      <td><a name="timeoutsmtpd">timeoutsmtpd</a></td>
      <td>1200</td>
      <td>qmail-smtpd</td>
      <td>Wie lange, in Sekunden, auf einen SMTP-Client gewartet wird</td>
    </tr>
    <tr>
      <td><a name="virtualdomains">virtualdomains</a></td>
      <td><i>none</i></td>
      <td>qmail-send</td>
      <td>Virtuelle Domains und Benutzer</td>
    </tr>
  </tbody>
</table>
<p>F&uuml;r mehr Informationen &uuml;ber eine spezielle Kontrolldatei,
lesen sie die Man Page f&uuml;r das Modul, das unter "Benutzt durch"
aufgelistet ist.</p>
<h2><a name="relaying">3.2. Weiterleitung</a></h2>
<h3><a name="relaying-intro">3.2.1. Einleitung</a></h3>
<p>Was ist <i>Weiterleitung</i>? Das ist, wenn ein MTA eine Nachricht
mittels SMTP akzeptiert, die nicht mal so <i>erscheint</i>, als ob sie
entweder <b>f&uuml;r</b> eine lokale Adresse oder <b>von</b> einem
lokalem Absender ist.</p>
<p>In der Vor-Spam-Zeit war es &uuml;blich f&uuml;r MTAs, als <i>offene</i>
Weiterleiter konfiguriert zu sein: nicht w&auml;hlerische Server, die
Mails von jedem, f&uuml;r jeden akzeptieren w&uuml;rden.</p>
<p>Die meisten MTAs sind heute konfiguriert, entweder Weiterleitung
komplett abzuschalten oder nur bestimmten vertrauensw&uuml;rdigen
Benutzern oder Systemen zu erlauben, sie als Weiterleiter zu benutzen.</p>
<p>Chris Johnson hat ein sehr gutes Dokument speziell f&uuml;r <i>qmail</i>-Benutzer
geschrieben. Ich ermuntere sie, <a
 href="http://www.palomine.net/qmail/relaying.html">http://www.palomine.net/qmail/relaying.html</a>
zu besuchen.</p>
<h3><a name="relaying-disabling">3.2.2. Weiterleitung abschalten</a></h3>
<p>Wenn sie den offiziellen Anweisungen f&uuml;r die Installation von <i>qmail</i>
folgen, ist das Weiterleiten standardm&auml;&szlig;ig abgeschaltet. Das
wird erreicht durch das Best&uuml;cken der Datei <tt>/var/qmail/control/rcpthosts</tt>
mit den vollqualifizierten Domainnamen, die in <tt>locals</tt> und <tt>virtualdomains</tt>
(den lokalen Hosts) aufgelistet sind. Der Name der Kontrolldatei, <tt>rcpthosts</tt>,
kommt vom SMTP-<tt>RCPT</tt>-Befehl (engl. RCPT, recipient:
Empf&auml;nger; Anm. d. &Uuml;bers.). In einer SMTP-Session wird RCPT
benutzt, um die Adressen der Empf&auml;nger einer Adresse zu
spezifizieren. <tt>rcpthosts</tt> listet also die g&uuml;ltigen
Hostnamen, die in RCPT-Adressen erscheinen d&uuml;rfen.</p>
<h3><a name="relaying-selective">3.2.3. Selektives Weiterleiten erlauben</a></h3>
<p>Die meisten Einzelbenutzer- und Kleine-Arbeitsgruppen-Server
k&ouml;nnen das Weiterleiten komplett abschalten, wenn sie aber eine
verteilte Benutzergemeinschaft unterst&uuml;tzen m&uuml;ssen, dann
werden sie einen Weg brauchen, um ihren Benutzern zu erlauben, und <i>nur</i>
ihren Benutzern, ihr System als Weiterleiter zu benutzen. Das wird mit <i>tcpserver</i>
gemacht, mit dem die <tt>RELAYCLIENT</tt>-Umgebungsvariable gesetzt
wird, die <tt>qmail-smtpd</tt> anweist, die <tt>rcpthosts</tt>-Datei
zu &uuml;bergehen.</p>
<p>Wenn sie den Installationsanweisungen dieses Dokuments folgen, dann
ist selektives Weiterleiten standardm&auml;&szlig;ig angeschaltet. Um
einem Client Weiterleitungszugriff zu geben, f&uuml;gen sie <tt>/etc/tcp.smtp</tt>
einen Eintrag zu, wie:</p>
<pre> <i>IP-Adresse des Clients</i>:allow,RELAYCLIENT=""<br></pre>
<p>Dann erneuern sie die SMTP-Zugriffssdatendank, indem sie folgendes
tun:</p>
<pre> qmailctl cdb<br></pre>
<p>oder:</p>
<pre> tcprules /etc/tcp.smtp.cdb /etc/tcp.smtp.tmp &lt; /etc/tcp.smtp<br> chmod 644 /etc/tcp.smtp*<br></pre>
<p>Wenn die den offziellen Installationsanweisungen gefolgt sind: Chris
Johnson hat ein anderes sehr gutes Dokument dar&uuml;ber geschrieben,
wie man <i>qmail</i> konfiguriert, um ausgew&auml;hlten Hosts das
Weiterleiten zu erlauben. Siehe <a
 href="http://www.palomine.net/qmail/selectiverelay.html">http://www.palomine.net/qmail/selectiverelay.html</a>.</p>
<h2><a name="multiple-hostnames">3.3. Multiple Hostnamen</a></h2>
<p>Wenn ihr System unter mehr als einem Namen bekannt ist, z.B. wenn
alle Adressen der Form <tt><i>benutzer</i>@host1.beispiel.com</tt>
auch als <tt><i>benutzer</i>@beispiel.com</tt> oder <tt><i>benutzer</i>@mail.beispiel.com</tt>
geschrieben werden k&ouml;nnen, dann m&uuml;ssen sie <i>qmail</i> das
mitteilen, so dass es wei&szlig;, welche Adressen es als lokal
zustellen und welche Nachrichten es von Remote-Systemen akzeptieren
sollte.</p>
<p>Um das zu tun, f&uuml;gen sie einfach alle diese Namen folgenden
zwei Kontrolldateien zu:</p>
<ul>
  <li><tt>rcpthosts</tt>, welche <tt>qmail-smtpd</tt> anweist, alle an
diese Hosts adressierten Mails zu akzeptieren und</li>
  <li><tt>locals</tt>, welche <tt>qmail-send</tt> mitteilt, das
Adressen auf diesen Hosts lokal zugestellt weren sollen.</li>
</ul>
<p>Senden sie <tt>qmail-send</tt> ein <tt>HUP</tt>-Signal (engl. HUP,
hangup: Auflegen; Anm. d. &Uuml;bers.), um es anzuweisen, <tt>locals</tt>
neu zu lesen. Wenn sie <tt>qmailctl</tt> haben, dann k&ouml;nnen sie
folgendes tun:</p>
<pre> qmailctl reload<br></pre>
<h2><a name="virtual-domains">3.4. Virtuelle Domains</a></h2>
<p>Virtuelle Domains sind vergleichbar mit den multiplen Hostnamen, die
im vorigen Abschnitt diskutiert wurden, aber da gibt es ein paar
wichtige Unterschiede. Erstens, wenn <tt>beispiel.net</tt> die
virtuelle Domain <tt>virtuelles.beispiel.com</tt> hostet, dann ist es
normalerweise <b>nicht</b> so, dass Nachrichten, die an <tt>schorsch@beispiel.net</tt>
gesandt werden, in derselben Mailbox enden sollten, wie Nachrichten,
die an <tt>schorsch@virtuelles.beispiel.com</tt> gesandt wurden. Der
Namensraum f&uuml;r jede viruelle Domain ist klar abgegrenzt.</p>
<p>Mit <i>qmail</i> werden virtuelle Domains in der <tt>virtualdomains</tt>-Datei
konfiguriert, die aus einem oder mehreren Eintr&auml;gen in dieser Form
besteht:</p>
<pre> <i>benutzer</i>@<i>domain</i>:<i>prepend</i>
</pre>
<p><i>qmail</i> konvertiert <tt><i>benutzer</i>@<i>domain</i></tt> in <tt><i>prepend</i>-<i>benutzer</i>@<i>domain</i></tt>
und behandelt das Resultat so, als ob <tt><i>domain</i></tt> lokal
w&auml;re. Der <tt><i>benutzer</i>@</tt>-Teil ist optional. Wenn er
ausgelassen wird, dann trifft der Eintrag f&uuml;r <i>alle</i> <tt>@<i>domain</i></tt>-Adressen
zu.</p>
<p>Um zum obigen Beispielszenario zur&uuml;ckzukehren, wenn der
beispiel.net-Mailadministrator die virtuelle Domain <tt>virtuelles.beispiel.com</tt>
unter der administrativen Kontrolle von Benutzer <tt>hans</tt>
erstellen m&ouml;chte, dann w&uuml;rde der folgende Eintrag in <tt>virtualdomains</tt>
das erledigen:</p>
<pre> virtuelles.beispiel.com:hans<br></pre>
<p>Eine hereinkommende Nachricht an <tt>schorsch@virtuelles.beispiel.com</tt>
w&uuml;rde in <tt>hans-schorsch@virtuelles.beispiel.com</tt>
umgeschrieben und lokal zugestellt werden. Lesen sie den <a
 href="#dot-qmail-files">.qmail</a>-Abschnitt und den <a
 href="#extension-addresses">Erweiterungsadressen</a>-Unterabschnitt
f&uuml;r mehr Informationen dar&uuml;ber, wie hans seine virtuelle
Domain managen kann.</p>
<p>Wie multiple Hostnamen m&uuml;ssen alle virtuellen Domains in <tt>rcpthosts</tt>
aufgelistet sein, so dass <tt>qmail-smtpd</tt> wissen kann, dass es
Nachrichten, die an sie adressiert sind, akzeptieren soll. Jedoch,
anders als multiple Hostnamen, <b>d&uuml;rfen</b> virtuelle Domains <b>nicht</b>
<tt>locals</tt> hinzugef&uuml;gt werden.</p>
<p>Nach dem &Auml;ndern von <tt>virtualdomains</tt> senden sie <tt>qmail-send</tt>
ein <tt>HUP</tt> (hangup)-Signal, um es anzuweisen, die Datei neu zu
lesen. Wenn sie <tt>qmailctl</tt> haben, k&ouml;nnen sie folgendes tun:</p>
<pre> qmailctl reload<br></pre>
<p>Vergessen sie nicht, die virtuellen Domains auch <tt>rcpthosts</tt>
hinzuzuf&uuml;gen.</p>
<hr width="80%" align="left"><strong>Hinweis: </strong>Domainnameserver
(DNS)-Mail Exchanger (MX)-Datens&auml;tze m&uuml;ssen daf&uuml;r
hergerichtet werden, um Nachrichten f&uuml;r virtuelle Domains an den
richtigen Mailserver zu dirigieren. Das ist ein Job f&uuml;r den
Nameserveradministrator und jenseits des Themenbereiches dieses
F&uuml;hrers.
<hr width="80%" align="left">
<h2><a name="aliases">3.5. Aliase</a></h2>
<p><i>qmail</i>s Standard-Alias-Mechanismus ist ein nat&uuml;rliches
Nebenprodukt von <i>qmail</i>s lokalem Zustellmechanismus. <tt>qmail-local</tt>
versucht, eine Nachricht, die an <tt><i>lokalerteil</i>@host</tt>
adressiert ist, an einen lokalen Benutzer namens <tt><i>lokalerteil</i></tt>
zuzustellen. Wenn kein passender Benutzer gefunden wurde, wird die
Nachricht an den <tt>alias</tt>-Benutzer, einen Pseudo-Benutzer auf
allen <i>qmail</i>-Systemen geschickt, dessen Home-Verzeichnis
&uuml;blicherweise <tt>/var/qmail/alias</tt> ist.</p>
<p>Wenn sie beispielsweise ein <tt>info@beispiel.com</tt>-Alias
erzeugen wollen, das Nachrichten an den Benutzer <tt>tom</tt>
weiterleitet, dann tun sie auf <tt>beispiel.com</tt> als Benutzer <tt>root</tt>
folgendes:</p>
<pre> echo \&amp;tom &gt; /var/qmail/alias/.qmail-info<br></pre>
<p>Der <tt><a href="#dot-qmail-files">.qmail</a></tt>-Abschnitt und
der <a href="#extension-addresses">Erweiterungsadressen</a>-Unterabschnitt
beschreibt, wie man <tt>.qmail</tt>-Dateien erzeugt, die
spezifizieren, welche Aliase existieren und was mit den Nachrichten
geschehen soll, die an sie geschickt wurden.</p>
<p>Der <a href="#gotchas">Gotchas</a>-Anhang enth&auml;lt ein paar
schwierige F&auml;lle die Verwendung von Aliasen betreffend--Aliase,
die Gro&szlig;buchstaben und Punkte ('.') enthalten--und <tt>man
dot-qmail</tt> enth&auml;lt eine komplette Dokumentation der Verwendung
von <tt>.qmail</tt>-Dateien.</p>
<p>Beachten sie, dass, wegen der Art, in der Aliase in <i>qmail</i>
implementiert sind, ein Alias sich <b>niemals</b> &uuml;ber die
Zustellungen eines g&uuml;ltigen Benutzers hinwegsetzen kann. Wenn
beispielsweise <tt>rachel</tt> eine normale Benutzerin ist, dann wird <tt>~alias/.qmail-rachel</tt>
nicht benutzt.</p>
<p>Das <i><a href="#fastforward">fastforward</a></i>-Package bietet
einen alternativen Aliasmechanismus, der multiple Aliase in einer
einzelnen Datei ablegt, die kompatibel mit <i>Sendmail</i>s
Aliasdatenbank ist.</p>
<p>Der n&auml;chste Abschnitt, qmail-users, beschreibt einen anderen
Mechanismus, der benutzt werden kann, um Aliase zu implementieren.</p>
<h2><a name="qmail-users">3.6. qmail-users</a></h2>
<p><i>qmail-users</i> (engl. users: Benutzer; Anm. d. &Uuml;bers.) ist
ein System f&uuml;r das Zuordnen von Adressen zu Benutzern. Eine Reihe
von Konfigurationsdateien liegen unter <tt>/var/qmail/users</tt>. Die <tt>assign</tt>-Datei
(engl. assign: zuordnen; Anm. d. &Uuml;bers.) ist eine Tabelle von
Zuordnungen. Es gibt zwei Arten von Zuordnungen: einfach und
Platzhalter.</p>
<hr width="80%" align="left"><strong>Hinweis: </strong><tt>assign</tt>
enth&auml;lt eine Reihe von Zuordnungen, eine pro Zeile, gefolgt von
einer Zeile mit einem einzelnen Punkt (.). Wenn sie <tt>assign</tt>
von Hand erstellen, dann vergessen sie die Punkt-Linie nicht.
<hr width="80%" align="left">
<h3><a name="simple-assignment">3.6.1. Einfache Zuordnung</a></h3>
<p>Eine einfache Zuordnung sieht so aus:</p>
<pre>=<i>Adresse</i>:<i>Benutzer</i>:<i>uid</i>:<i>gid</i>:<i>Verzeichnis</i>:<i>Bindestrich</i>:<i>Erweiterung</i>:<br></pre>
<p>Das bedeutet, dass Nachrichten, die f&uuml;r <i>Adressw</i>
empfangen wurden, als Benutzer <i>Benutzer</i> mit der spezifizierten <i>uid</i>
und <i>gid</i> zugestellt werden und die Datei <tt><i>Verzeichnis</i>/.qmail<i>Bindestrich</i><i>Erweiterung</i></tt>
angibt, wie die Nachrichten zuzustellen sind.</p>
<h3><a name="wildcard-assignment">3.6.2. Platzhalterzuordung</a></h3>
<p>Eine Platzhalterzuordung sieht so aus:</p>
<pre>+<i>Vorzeichen</i>:<i>Benutzer</i>:<i>uid</i>:<i>gid</i>:<i>Verzeichnis</i>:<i>Bindestrich</i>:<i>Vorsatz</i>:<i>Rest</i>
</pre>
<p>Das bedeutet, dass Nachrichten, die f&uuml;r Adressen in der Form <i>Vorzeichen</i><i>Rest</i>
als Benutzer <i>Benutzer</i> mit der spezifizierten <i>uid</i> und <i>gid</i>
zugestellt werden und die Datei <tt><i>Verzeichnis</i>/.qmail<i>Bindestrich</i><i>Vorsatz</i><i>Rest</i></tt>
angibt, wie die Nachrichten zuzustellen sind.</p>
<h3><a name="qmail-user-programs">3.6.3. qmail-user-Programme</a></h3>
<p>qmail-user hat zwei Hilfsprogramme: <tt>qmail-newu</tt> und <tt>qmail-pw2u</tt>.</p>
<p><tt>qmail-newu</tt> verarbeitet die <tt>assign</tt>-Datei und
generiert eine konstante Datenbank (CDB)-Datei namens <tt>cdb</tt> in <tt>/var/qmail/users</tt>.
CDB liegt im Bin&auml;rformat vor, auf das schnell durch <tt>qmail-lspawn</tt>
zugegriffen werden kann, auch wenn es Tausende von Zuordnungen gibt.</p>
<p><tt>qmail-pw2u</tt> konvertiert die Systembenutzerdatenbank <tt>/etc/passwd</tt>
in eine Reihe von Zuordnungen, die zu <tt>assign</tt> passen. <tt>qmail-pw2u</tt>
verwendet ein Set von Dateien, um die &Uuml;bersetzungsregeln zu
modifizieren.</p>
<ul>
  <li><tt>include</tt>: Benutzer, die einbezogen werden sollen</li>
  <li><tt>exclude</tt>: Benutzer, die auszuschlie&szlig;en sind</li>
  <li><tt>mailnames</tt>: alternative "Mailnamen" f&uuml;r Benutzer</li>
  <li><tt>subusers</tt>: extra Adressen, die von einem Benutzer
verwendet werden, mit einer optionalen <tt>.qmail</tt>-Erweiterung</li>
  <li><tt>append</tt>: verschiedene Zuordnungen</li>
</ul>
<hr width="80%" align="left"><strong>Hinweis: </strong>Wenn die <tt>qmail-pw2u</tt>
benutzen, vergessen sie nicht, <tt>qmail-pw2u</tt> und <tt>qmail-newu</tt>
neu zu starten, wann immer sie Benutzer hinzuf&uuml;gen oder UIDs oder
GIDs &auml;ndern. Eine typische Sequenz k&ouml;nnte sein:
<pre> qmail-pw2u &lt;/etc/passwd &gt;/var/qmail/users/assign<br> qmail-newu<br></pre>
<hr width="80%" align="left">
<h2><a name="spam">3.7. Spam-Kontrolle</a></h2>
<p>Chris Hardie hat ein exzellentes <i>qmail</i> Anti-Spam HOWTO
geschrieben. Es ist verf&uuml;gbar unter <a
 href="http://www.summersault.com/chris/techno/qmail/qmail-antispam.html">http://www.summersault.com/chris/techno/qmail/qmail-antispam.html</a>.</p>
<h2><a name="viruses">3.8. Virus-Scannen</a></h2>
<p>Jason Haar hat Qmail-Scanner geschrieben, ein inhaltsscannendes
Geschirr f&uuml;r <i>qmail</i>. Siehe <a
 href="http://qmail-scanner.sourceforge.net/">http://qmail-scanner.sourceforge.net/</a>
f&uuml;r mehr Informationen.</p>
<p>Qmail-Scanner schlie&szlig;t einen einfachen eingebauten Scanner
ein, aber seri&ouml;ses Scannen erfordert einen separaten
Virus-Scanner--entweder einen von den unterst&uuml;tzten kommerziellen
Scannern oder Tomasz Kojms freien Clam Antivirus Scanner, der unter <a
 href="http://clamav.elektrapro.com/">http://clamav.elektrapro.com/</a>
verf&uuml;gbar ist.</p>
<hr>
<h1><a name="usage">4. Benutzung</a></h1>
<p>Dieser Abschnitt behandelt die Benutzung von <i>qmail</i> durch
normale Benutzer. Wenn sie Mail auf einem <i>qmail</i>-System lesen
oder schreiben, dann ist hier sie Stelle, wo sie Informationen
dar&uuml;ber finden, wie das mit <i>qmail</i> geht.</p>
<h2><a name="dot-qmail-files">4.1. <tt>.qmail</tt>-Dateien</a></h2>
<p>Die Zustellung einer Benutzermail wird normalerweise von einer oder
mehreren ".qmail" (sprich <i>dot kju meejl</i>)-Dateien--Dateien im
Home-Verzeichnis des Benutzers, dessen Namen mit <tt>.qmail</tt>
beginnen. Die <tt>dot-qmail</tt>-Man Page beschreibt die <tt>.qmail</tt>-Datei-Benutzung.</p>
<p><tt>.qmail</tt>-Bestehen aus einer Liste von Zustellinstruktionen,
eine Instruktion pro Zeile. Das erste Zeichen der Zeile bestimmt,
welche Art von Zustellung angewandt wird:</p>
<table class="columns" border="1">
  <tbody>
    <tr class="heading">
      <td><strong>Zeichen</strong></td>
      <td><strong>Zustellungstyp</strong></td>
      <td><strong>Wert</strong></td>
    </tr>
    <tr>
      <td>#</td>
      <td>leer <i>(Kommentar)</i></td>
      <td>wird ignoriert</td>
    </tr>
    <tr>
      <td>|</td>
      <td>program</td>
      <td>Befehl, der von der Shell ausgef&uuml;hrt werden soll</td>
    </tr>
    <tr>
      <td>/ or .</td>
      <td>mbox <i>(wenn das letzte Zeichen kein / ist)</i></td>
      <td>Pfadname der mbox <i>(einschlie&szlig;lich des / oder .)</i></td>
    </tr>
    <tr>
      <td>/ or .</td>
      <td>maildir <i>(wenn das letzte Zeichen ein / ist)</i></td>
      <td>Pfadname der maildir <i>(einschlie&szlig;lich des / oder .)</i></td>
    </tr>
    <tr>
      <td>&amp;</td>
      <td>forward</td>
      <td>Adresse, an die die Nachricht weitergeleitet werden soll</td>
    </tr>
    <tr>
      <td>Buchstabe oder Zahl</td>
      <td>forward</td>
      <td>Adresse, an die die Nachricht weitergeleitet werden soll <i>(einschlie&szlig;lich
des ersten Zeichens)</i></td>
    </tr>
  </tbody>
</table>
<h3><a name="program-delivery">4.1.1. program-Zustellung</a></h3>
<p>Wenn ein program-Zustellungsinstruktion angetroffen wird, startet <i>qmail</i>
eine Shell (<tt>/bin/sh</tt>), um den Befehl auszuf&uuml;hren und
f&uuml;hrt dem Befehl eine Kopie der hereinkommenden Nachricht auf der
Standardeingabe zu. Die <tt>qmail-command</tt> Man Page dokumentiert
die Details dieses Prozesses.</p>
<p>Die program-Zustellung ist sehr m&auml;chtig und kann benutzt
werden, um ein breites Angebot von Funktionalit&auml;t, wie
Nachrichtenfilterung, automatische Nachrichtenbeantwortung und
Zustellung mit Drittanbieteragenten wie <i>procmail</i> zu
implementieren.</p>
<p>Beispiel:</p>
<pre> |preline /usr/ucb/vacation djb<br></pre>
<p>Das veranlasst <i>qmail</i> <tt>preline</tt> zu starten, ihm <tt>/usr/ucb/vacation</tt>
und <tt>djb</tt> als Argumente zu &uuml;bergeben und eine Kopie der
Nachricht auf der Standardausgabe zuzuf&uuml;hren.</p>
<h3><a name="mbox-delivery">4.1.2. mbox-Zustellung</a></h3>
<p>Mbox ist das Standard-UNIX-Mailboxformat, in dem mehrere Nachrichten
in einer einzelnen Datei gespeichert und Nachrichten mit einer "<tt>Von
</tt>"-Zeile begonnen werden. Diese Zeile sieht aus wie ein Kopffeld,
aber es ist keins; es ist einfach nur etwas, das der Zustellagent
anf&uuml;gt, so dass Mailreader herausfinden k&ouml;nnen, wo jede
Nachricht beginnt.</p>
<p>Beispiel:</p>
<pre> ./Mailbox<br></pre>
<p>Dies f&uuml;hrt dazu, dass Nachrichten der Datei <tt>$HOME/Mailbox</tt>
mit einer vorangestellten "<tt>Von </tt>"-Zeile angeh&auml;ngt werden.
Eine einfache mbox-Mailbox mit einer einzelnen Nachrcht sieht so aus:</p>
<pre> From user1@example.net Thu May 13 18:34:50 1999<br> Received: (qmail 1287205 invoked from network); 13 May 1999 18:34:49 -0000<br> From: user1@example.net<br> To: user2@example.com<br> Subject: hey<br><br> What's up?<br></pre>
<p>Die erste Zeile wurde bei Zustellung durch <i>qmail</i>
hinzugef&uuml;gt.</p>
<h3><a name="maildir-delivery">4.1.3. maildir-Zustellung</a></h3>
<p>Maildir ist ein Mailboxformat, dass von Dan Bernstein erfunden
wurde, um sich den Nachteilen des mbox-Formates zu widmen. Eine
maildir-Mailbox ist ein Verzeichnis, das drei Unterverzeichnisse
enth&auml;lt, <tt>new</tt>, <tt>cur</tt> und <tt>tmp</tt>. Jede
Nachricht in einer maildir-Mailbox ist in einer separaten Datei in
einer der Unterverzeichnisse gespeichert, abh&auml;ngig von ihrem
Status: <tt>new</tt> ist f&uuml;r ungelesene Nachrichten, <tt>cur</tt>
ist f&uuml;r Nachrichten, die versandt wurden und <tt>tmp</tt> ist
f&uuml;r Nachrichten, die sich im Prozess des Zugestelltwerdens
befinden. Die <tt>maildir</tt> Man Page beschreibt das Format einer
maildir im Detail.</p>
<p>Einer der Vorteile des maildir-Formates ist, dass es
zuverl&auml;ssig ist, obgleich es keinen Sperrmechanismus verwendet, um
gleichzeitigen Updates von verschiedenen Zustellagenten vorzubeugen.
Das bedeutet, dass maildir-Mailboxen auf NFS-Dateisystemen sicher sind.</p>
<p>Beispiel:</p>
<pre> ./Maildir/<br></pre>
<p>Dies f&uuml;hrt dazu, dass Nachrichten in <tt>$HOME/Maildir</tt>
gespeichert werden, einer maildir-Format-Mailbox.</p>
<hr width="80%" align="left"><strong>Hinweis: </strong><tt>qmail-local</tt>
kann Mails an maildir-Mailboxen zustellen, aber es kann sie nicht
erstellen. Maildir-Mailboxen sollten mit dem <tt>maildirmake</tt>-Programm
erstellt werden, das mit <i>qmail</i> mitgeliefert wird. Beispiel: "<tt>maildirmake
~/Maildir</tt>". Stellen sie sicher, dass sie <tt>maildirmake</tt> als
Besitzer von maildir laufen lassen, <b>nicht</b> als root. Ihr <tt>useradd</tt>
oder <tt>adduser</tt>-Befehl k&ouml;nnte ein "Ger&uuml;st"-Verzeichnis
unterst&uuml;tzen, beispielsweise <tt>/etc/skel</tt>, wo sie eine
maildir erstellen k&ouml;nnen, die f&uuml;r alle neuen Benutzer kopiert
wird.
<hr width="80%" align="left">
<h3><a name="forward-delivery">4.1.4. forward-Zustellung</a></h3>
<p>Forward-Zustellungen bewirken, dass die Nachricht an die
spezifizierte Adresse weitergesandt wird. Adressen, die in <tt>.qmail</tt>-Dateien
spezifiziert sind, d&uuml;rfen keine Kommentarfelder oder
zus&auml;tzliche Leerzeichen enthalten.</p>
<p>Folgendes ist <b>falsch</b>:</p>
<pre> &amp;&lt;benutzer@beispiel.com&gt;<br> &amp; benutzer@beispiel.com<br> &amp;Schorsch Benutzer &lt;benutzer@beispiel.com&gt;<br></pre>
<p>Folgendes ist richtig:</p>
<pre> &amp;benutzer@beispiel.com<br> benutzer@beispiel.com<br> &amp;benutzer<br></pre>
<p>Die ersten beiden bewirken, dass <tt>benutzer@beispiel.com</tt>
eine Kopie der Nachricht erh&auml;lt. Das letzte sendet eine Kopie an
den lokalen Benutzer <tt>benutzer</tt>.</p>
<h3><a name="extension-addresses">4.1.5. extension addresses</a></h3>
<p><i>qmail</i> unterst&uuml;tzt benutzerkontrollierte
Erweiterungsadressen. Zus&auml;tzlich zur Basisadresse <tt><i>benutzername</i>@<i>hostname</i>.<i>domain</i></tt>
k&ouml;nnen die Benutzer Mails an <tt><i>benutzername</i>-<i>erweiterung</i>@<i>hostname</i>.<i>domain</i></tt>
erhalten. F&uuml;r den Rest dieses Abschnitts werde ich den "@<i>hostname</i>.<i>domain</i>"-Teil
weglassen, weil wir annehmen, das die Aktionen auf dem lokalem System
stattfinden.</p>
<p>Die Zustellinstruktionen f&uuml;r <tt><i>benutzername</i></tt>
stecken in <tt>~<i>benutzername</i>/.qmail</tt> und die
Zustellinstruktionen f&uuml;r <tt><i>benutzername</i>-<i>erweiterung</i></tt>
in <tt>~<i>benutzername</i>/.qmail-<i>erweiterung</i></tt>.</p>
<p>Beispielsweise wird <tt>dave-lwq@sparge.beispiel.com</tt> von <tt>~dave/.qmail-lwq</tt>
auf dem Host sparge kontrolliert.</p>
<p>Erweiterungen k&ouml;nnen mehrere Felder haben, z.B. wird <tt>dave-list-qmail</tt>
von <tt>~dave/.qmail-list-qmail</tt> kontrolliert. In diesem Beispiel
ist <tt>dave-list-qmail</tt> in die qmail-Mailingliste eingeschrieben
und <tt>~dave/.qmail-list-qmail</tt>-Dateien die Listennachrichten in
einer separaten Mailbox.</p>
<p><tt>.qmail</tt>-Dateien k&ouml;nnen mit <i>Platzhaltern versehen
sein</i> unter der Benutzung von <tt>-default</tt>. So k&ouml;nnte <tt>dave-list-qmail</tt>
auch von <tt>~dave/.qmail-list-default</tt> bearbeitet werden. Dies
w&uuml;rde einer allumfassenden <tt>.qmail</tt>-Datei erlauben, alle <tt>dave-list-<i>wasauchimmer</i></tt>-Adressen
zu bearbeiten. Beachten sie, dass <tt>dave-list</tt> nicht von <tt>~dave/.qmail-list-default</tt>
bearbeitet w&uuml;rde, weil es nicht dem Muster "-" nach "list"
entsprechen w&uuml;rde.</p>
<p><i>qmail</i> benutzt die beste &Uuml;bereinstimmung, die es finden
kann. Wenn beispielsweise eine Nachricht hereinkommt, die an <tt>dave-list-qmail</tt>
adressiert ist, wird es das Erste von den Folgenden verwenden, das
zutrifft:</p>
<pre> .qmail-list-qmail<br> .qmail-list-default<br> .qmail-default<br></pre>
<p>Wenn keine zutreffende <tt>.qmail</tt>-Datei gefunden wird, dann
schl&auml;gt die Zustellung fehl und die Nachricht wird an den Absender
zur&uuml;ckgeschickt.</p>
<h2><a name="sending-messages">4.2. Nachrichten versenden</a></h2>
<p>Mailbenutzer verwenden normalerweise den MTA nicht direkt, um
Nachrichten zu versenden. Typischerweise werden Nachrichten mittels
eines Mailbenutzeragenten (Mail User Agent, MUA) wie <i>pine</i> oder <i>mutt</i>
erstellt und versandt, die dann den MTA aufrufen, um die Nachricht
zuzustellen. Der Prozess des Weiterreichens einer Nachricht an den MTA
wird <i>Injektion</i> genannt.</p>
<p>Es gibt zwei Wege, um Nachrichten in die meisten MTAs zu injizieren:
mit Hilfe des Einfachen Mailtransferprotokolls (Simple Mail Transfer
Protocol, SMTP) oder mittels eines Programms, dass von den MTAs
f&uuml;r diesen Zweck angeboten wird.</p>
<h3><a name="smtp">4.2.1. SMTP</a></h3>
<p>MUAs k&ouml;nnen einer TCP-Verbindung an Port 25, dem
Standard-SMTP-Port, auf dem Localhost oder einem bestimmten Mailserver
&ouml;ffnen. Der MUA und der MTA k&ouml;nnen dann in einen Dialog
treten; dessen Resultat ist dann entweder:</p>
<ul>
  <li>die Nachricht wird an den MTA transferiert oder</li>
  <li>ein Fehlerstatus wird an den MUA zur&uuml;ckgeliefert</li>
</ul>
<p>SMTP hat keinen Mechanismus f&uuml;r Authentifizierung, so dass
weder Benutzername noch Passwort notwendig sind, um eine Nachricht zu
versenden. Wie auch immer, viele MTAs verweigern das Akzeptieren von
Nachrichten, die weder von noch f&uuml;r einen lokalen Benutzer zu sein
scheinen. Wenn eine wohlformatiert Nachricht abgewiesen wird, dann dine
Weiterleitungseinschr&auml;nkungen der wahrscheinlichste Grund. Lesen
sie die <a href="#relaying">Abschnitt &uuml;ber Weiterleitung</a>
f&uuml;r mehr Informationen &uuml;ber die Weiterleitungskonfiguration.</p>
<h3><a name="/var/qmail/bin/sendmail">4.2.2. <tt>/var/qmail/bin/sendmail</tt></a></h3>
<p>F&uuml;r viele Jahre war <i>Sendmail</i> <i>der</i> UNIX-MTA. Es
war so allgegenw&auml;rtig, dass viele Programmierer einfach davon
ausgingen, dass er der MTA war. Als ein Resultat davon wurde <i>Sendmail</i>s
lokaler Injektionsmechanismus die standardm&auml;&szlig;ige
Applikationsprogrammierschnittstelle (Application Programmer's
Interface, API) f&uuml;r lokale Mailinjektion. <i>qmail</i> und andere
nicht-<i>Sendmail</i>-MTAs bieten ein <tt>sendmail</tt>-Programm, dass
f&uuml;r lokale Injektion auf dieselbe Art arbeitet, wie des echten <i>Sendmail</i>s
<tt>sendmail</tt>.</p>
<p>Das <i>qmail</i>-<tt>sendmail</tt>, das normalerweise in <tt>/var/qmail/bin/sendmail</tt>
liegt, ersetzt f&uuml;r gew&ouml;hnlich das <i>Sendmail</i>-<tt>sendmail</tt>
auf <i>qmail</i>-Systemen. Typische Aufenthaltsorte des <tt>sendmail</tt>-Programms
sind:</p>
<ul>
  <li><tt>/usr/lib/sendmail</tt></li>
  <li><tt>/usr/sbin/sendmail</tt></li>
</ul>
<p>Auf einerm <i>qmail</i>-System sollte "<tt>ls -l <i>Pfad-zu-sendmail</i></tt>"
zeigen, dass <tt>sendmail</tt> ein symbolischer Link auf <tt>/var/qmail/bin/sendmail</tt>
ist:</p>
<pre> $ ls -l /usr/lib/sendmail<br> lrwxrwxrwx 1 root root 29 Feb 19 11:04 /usr/lib/sendmail -&gt; /var/qmail/bin/sendmail<br></pre>
<h3><a name="qmail-inject">4.2.3. <tt>qmail-inject</tt></a></h3>
<p>Zus&auml;tzlich zum Emulieren der <tt>sendmail</tt>-API hat <i>qmail</i>
sein eigenes Injektionsprogramm: <tt>qmail-inject</tt>.
Tats&auml;chlich ist <tt>sendmail</tt> nur eine H&uuml;lle um <tt>qmail-inject</tt>.</p>
<p>Als eine API ist <tt>sendmail</tt> wahrscheinlich besser, weil ist
viel breiter verf&uuml;gbar ist. Die <i>qmail</i>-API, die von <tt>qmail-inject</tt>
angeboten wird, arbeitet nur auf Systemen mit <i>qmail</i>, aber die <tt>sendmail</tt>-Schnittstelle
ist nahezu universal.</p>
<p>Hier wird beispielsweise eine leere Nachricht an <tt>schorsch@beispiel.com</tt>
gesandt:</p>
<pre> echo To: schorsch@beispiel.com | /var/qmail/bin/qmail-inject<br></pre>
<h2><a name="environment-variables">4.3. Umgebungsvariablen</a></h2>
<p>Einige <i>qmail</i>-Programme setzen oder verwenden
Umgebungsvariablen. Die folgende Tabelle listet diese Variablen auf und
beschreibt deren Verwendung .</p>
<table class="columns" border="1">
  <tbody>
    <tr class="heading">
      <td><strong>Name</strong></td>
      <td><strong>Man Page</strong></td>
      <td><strong>gesetzt oder verwendet</strong></td>
      <td><strong>Zweck</strong></td>
    </tr>
    <tr>
      <td><a name="DATABYTES">DATABYTES</a></td>
      <td><tt>qmail-smtpd</tt></td>
      <td>wird verwendet</td>
      <td>&Uuml;bergeht <tt>control/databytes</tt></td>
    </tr>
    <tr>
      <td><a name="DEFAULT">DEFAULT</a></td>
      <td><tt>qmail-command</tt></td>
      <td>wird gesetzt</td>
      <td>Teil der Adresse, die mit "-default" in einem <tt>.qmail</tt>-Dateinamen
&uuml;bereinstimmt.</td>
    </tr>
    <tr>
      <td><a name="DTLINE">DTLINE</a></td>
      <td><tt>qmail-command</tt></td>
      <td>wird gesetzt</td>
      <td>Gesandt-An-Kopffeld</td>
    </tr>
    <tr>
      <td><a name="EXT">EXT</a></td>
      <td><tt>qmail-command</tt></td>
      <td>wird gesetzt</td>
      <td>Die Adresserweiterung</td>
    </tr>
    <tr>
      <td><a name="EXT2">EXT2</a></td>
      <td><tt>qmail-command</tt></td>
      <td>wird gesetzt</td>
      <td>Der Teil von <tt>EXT</tt>, der dem ersten Bindestrich folgt</td>
    </tr>
    <tr>
      <td><a name="EXT3">EXT3</a></td>
      <td><tt>qmail-command</tt></td>
      <td>wird gesetzt</td>
      <td>Der Teil von <tt>EXT</tt>, der dem zweiten Bindestrich folgt</td>
    </tr>
    <tr>
      <td><a name="EXT4">EXT4</a></td>
      <td><tt>qmail-command</tt></td>
      <td>wird gesetzt</td>
      <td>Der Teil von <tt>EXT</tt>, der dem dritten Bindestrich folgt</td>
    </tr>
    <tr>
      <td><a name="HOME">HOME</a></td>
      <td><tt>qmail-command</tt></td>
      <td>wird gesetzt</td>
      <td>Das Home-Verzeichnis des Benutzers</td>
    </tr>
    <tr>
      <td><a name="HOST">HOST</a></td>
      <td><tt>qmail-command</tt></td>
      <td>wird gesetzt</td>
      <td>Der <i>domain</i>-Teil der Empf&auml;ngeradresse</td>
    </tr>
    <tr>
      <td><a name="HOST2">HOST2</a></td>
      <td><tt>qmail-command</tt></td>
      <td>wird gesetzt</td>
      <td>Der Teil von <tt>HOST</tt>, der dem letzten Punkt voransteht.</td>
    </tr>
    <tr>
      <td><a name="HOST3">HOST3</a></td>
      <td><tt>qmail-command</tt></td>
      <td>wird gesetzt</td>
      <td>Der Teil von <tt>HOST</tt>, der dem zweitletzten Punkt
voransteht.</td>
    </tr>
    <tr>
      <td><a name="HOST4">HOST4</a></td>
      <td><tt>qmail-command</tt></td>
      <td>wird gesetzt</td>
      <td>Der Teil von <tt>HOST</tt>, der dem drittletzten Punkt
voransteht.</td>
    </tr>
    <tr>
      <td><a name="LOCAL">LOCAL</a></td>
      <td><tt>qmail-command</tt></td>
      <td>wird gesetzt</td>
      <td>Der <i>local</i>-Teil der Empf&auml;ngeradresse</td>
    </tr>
    <tr>
      <td><a name="LOGNAME">LOGNAME</a></td>
      <td><tt>qmail-inject</tt></td>
      <td>wird verwendet</td>
      <td>Benutzername im Von-Kopffeld (4)</td>
    </tr>
    <tr>
      <td><a name="MAILHOST">MAILHOST</a></td>
      <td><tt>qmail-inject</tt></td>
      <td>wird verwendet</td>
      <td>Hostname im Von-Kopffeld (2)</td>
    </tr>
    <tr>
      <td><a name="MAILNAME">MAILNAME</a></td>
      <td><tt>qmail-inject</tt></td>
      <td>wird verwendet</td>
      <td>Vollst&auml;ndiger Name im Von-Kopffeld (2)</td>
    </tr>
    <tr>
      <td><a name="MAILUSER">MAILUSER</a></td>
      <td><tt>qmail-inject</tt></td>
      <td>wird verwendet</td>
      <td>Benutzername im Vom-Kopffeld (2)</td>
    </tr>
    <tr>
      <td><a name="NAME">NAME</a></td>
      <td><tt>qmail-inject</tt></td>
      <td>wird verwendet</td>
      <td>Vollst&auml;ndiger Name im Von-Kopffeld (3)</td>
    </tr>
    <tr>
      <td><a name="NEWSENDER">NEWSENDER</a></td>
      <td><tt>qmail-command</tt></td>
      <td>wird gesetzt</td>
      <td>Weiterleitende Absenderadresse (siehe "man dot-qmail")</td>
    </tr>
    <tr>
      <td><a name="QMAILDEFAULTDOMAIN">QMAILDEFAULTDOMAIN</a></td>
      <td><tt>qmail-inject</tt></td>
      <td>wird verwendet</td>
      <td>&Uuml;bergeht <tt>control/defaultdomain</tt></td>
    </tr>
    <tr>
      <td><a name="QMAILDEFAULTHOST">QMAILDEFAULTHOST</a></td>
      <td><tt>qmail-inject</tt></td>
      <td>wird verwendet</td>
      <td>&Uuml;bergeht <tt>control/defaulthost</tt></td>
    </tr>
    <tr>
      <td><a name="QMAILHOST">QMAILHOST</a></td>
      <td><tt>qmail-inject</tt></td>
      <td>wird verwendet</td>
      <td>Hostname im Von-Kopffeld (1)</td>
    </tr>
    <tr>
      <td><a name="QMAILIDHOST">QMAILIDHOST</a></td>
      <td><tt>qmail-inject</tt></td>
      <td>wird verwendet</td>
      <td>&Uuml;bergeht <tt>control/idhost</tt></td>
    </tr>
    <tr>
      <td><a name="QMAILINJECT">QMAILINJECT</a></td>
      <td><tt>qmail-inject</tt></td>
      <td>wird verwendet</td>
      <td>Spezifiziert verschiedene Optionen (siehe n&auml;chste
Tabelle)</td>
    </tr>
    <tr>
      <td><a name="QMAILMFTFILE">QMAILMFTFILE</a></td>
      <td><tt>qmail-inject</tt></td>
      <td>wird verwendet</td>
      <td>Datei, die eine Liste von Mailingslistenadresse zur Erzeugung
der "Diese Nachricht ist eine Antwort auf"-Information enth&auml;lt</td>
    </tr>
    <tr>
      <td><a name="QMAILNAME">QMAILNAME</a></td>
      <td><tt>qmail-inject</tt></td>
      <td>wird verwendet</td>
      <td>Vollst&auml;ndiger Name im Von-Kopffeld (1)</td>
    </tr>
    <tr>
      <td><a name="QMAILPLUSDOMAIN">QMAILPLUSDOMAIN</a></td>
      <td><tt>qmail-inject</tt></td>
      <td>wird verwendet</td>
      <td>&Uuml;bergeht <tt>control/plusdomain</tt></td>
    </tr>
    <tr>
      <td><a name="QMAILSHOST">QMAILSHOST</a></td>
      <td><tt>qmail-inject</tt></td>
      <td>wird verwendet</td>
      <td>Hostname in der Absenderadresse</td>
    </tr>
    <tr>
      <td><a name="QMAILSUSER">QMAILSUSER</a></td>
      <td><tt>qmail-inject</tt></td>
      <td>wird verwendet</td>
      <td>Benutzername in der Absenderadresse</td>
    </tr>
    <tr>
      <td><a name="QMAILUSER">QMAILUSER</a></td>
      <td><tt>qmail-inject</tt></td>
      <td>wird verwendet</td>
      <td>Benutzername im Von-Kopffeld (1)</td>
    </tr>
    <tr>
      <td><a name="RECIPIENT">RECIPIENT</a></td>
      <td><tt>qmail-command</tt></td>
      <td>wird gesetzt</td>
      <td>Empf&auml;ngeradresse</td>
    </tr>
    <tr>
      <td><a name="RELAYCLIENT">RELAYCLIENT</a></td>
      <td><tt>qmail-smtpd</tt></td>
      <td>wird verwendet</td>
      <td>Ignoriere <tt>control/rcpthosts</tt> und h&auml;nge den Wert
an die Empf&auml;ngeradresse an</td>
    </tr>
    <tr>
      <td><a name="RPLINE">RPLINE</a></td>
      <td><tt>qmail-command</tt></td>
      <td>wird gesetzt</td>
      <td>Antwortadresse-Kopffeld</td>
    </tr>
    <tr>
      <td><a name="SENDER">SENDER</a></td>
      <td><tt>qmail-command</tt></td>
      <td>wird gesetzt</td>
      <td>Absenderadresse</td>
    </tr>
    <tr>
      <td><a name="UFLINE">UFLINE</a></td>
      <td><tt>qmail-command</tt></td>
      <td>wird gesetzt</td>
      <td>UUCP-Stil-"Von "-Zeile</td>
    </tr>
    <tr>
      <td><a name="USER">USER</a></td>
      <td><tt>qmail-command</tt></td>
      <td>wird gesetzt</td>
      <td>Der aktuelle Benutzer</td>
    </tr>
    <tr>
      <td><a name="USER">USER</a></td>
      <td><tt>qmail-inject</tt></td>
      <td>wird verwendet</td>
      <td>Benutzername im Von-Kopffeld (3)</td>
    </tr>
  </tbody>
</table>
<table class="columns" border="1">
  <caption align="top">QMAILINJECT Flags</caption> <tbody>
    <tr class="heading">
      <td><strong>Buchstabe</strong></td>
      <td><strong>Zweck</strong></td>
    </tr>
    <tr>
      <td>c</td>
      <td>Verwende Adressen-Kommentar-Stil f&uuml;r das Von-Feld</td>
    </tr>
    <tr>
      <td>s</td>
      <td>Achte nicht auf irgendwelche eintreffenden
Antwortadresse-Felder</td>
    </tr>
    <tr>
      <td>f</td>
      <td>L&ouml;sche jedes eintreffende Von-Feld</td>
    </tr>
    <tr>
      <td>i</td>
      <td>L&ouml;sche jedes eintreffende Nachrichten-ID-Feld</td>
    </tr>
    <tr>
      <td>r</td>
      <td>Verwende ein VERP je Empf&auml;nger</td>
    </tr>
    <tr>
      <td>m</td>
      <td>Verwende ein VERP je Nachricht</td>
    </tr>
  </tbody>
</table>
<hr>
<h1><a name="advanced-topics">5. Fortgeschrittene Themen</a></h1>
<h2><a name="procmail">5.1. <i>procmail</i></a></h2>
<p><i>procmail</i> ist ein popul&auml;rer Nachrichtenzustellagent
(Message Delivery Agent, MDA). Die Funktion eines MDA ist, eine
Nachricht von einem MTA f&uuml;r einen spezifischen Benutzer oder eine
spezifische Mailbox zu akzeptieren und die Nachricht entsprechend der
Benutzerw&uuml;nsche zuzustellen. <i>procmail</i> kann verwendet
werden, um Nachrichten abh&auml;ngig vom Inhalt verschiedener
Kopffelder oder des Haupttextes einer Nachricht zu "filtern".
Beispielsweise k&ouml;nnen die Nachrichten von einer bestimmten Person
in eine Mailbox f&uuml;r gerade diese Peron dirigiert werden.</p>
<p>Es gibt ein paar Tricks, um <i>procmail</i> mit <i>qmail</i>
laufen zu lassen. Erstens ist procmail f&uuml;r gew&ouml;hnlich
eingerichtet, um an eine mbox-Mailbox in <tt>/var/spool/mail</tt>
zuzustellen. Sie k&ouml;nnen <i>procmail</i> umbauen, um
standardm&auml;&szlig;ig an <tt>$HOME</tt> zuzustellen oder sie
k&ouml;nnen Benutzer instruieren, sich nicht auf <i>procmail</i> zu
verlassen, um den Standard f&uuml;r den Ort der mbox festzulegen.
Au&szlig;er wenn sie es f&uuml;r die Zustellung nach <tt>$HOME</tt>
patchen, wird <tt>procmail</tt> immer <tt>/var/spool/mail</tt>
f&uuml;r Tempor&auml;re Dateien verwenden.</p>
<p>Ein anderes Problem ist, dass <tt>qmail-command</tt> und <tt>procmail</tt>
keine allgemeine &Uuml;bereinkunft haben, welche Exitcode was meint. <tt>procmail</tt>
verwendet die Standard-UNIX-Exitcodes: Null bedeutet <i>Erfolg</i>,
Nicht-Null bedeutet <i>Fehler</i> und der Grund des Fehlers wird von <tt>/usr/include/sys/errno.h</tt>
angezeigt. <tt>qmail-command</tt> verwendet bestimmte
Nicht-Null-Codes, um permanente Fehler anzuzeigen und die restlichen
werden als tempor&auml;r angesehen. Ein kleiner
Kommandozeilenskript-Wrapper kann verwendet werden, um die Exitcodes
f&uuml;r <tt>qmail-command</tt> zu &uuml;bersetzen. So ein Wrapper
wurde an die <i>qmail</i>-Liste geschickt und ist in den Archiven
unter <a
 href="http://www.ornl.gov/its/archives/mailing-lists/qmail/1998/04/msg00487.html">http://www.ornl.gov/its/archives/mailing-lists/qmail/1998/04/msg00487.html</a>
verf&uuml;gbar.</p>
<p>Au&szlig;erdem liefern &auml;ltere Versionen von <i>procmail</i>
(bis 3.14) nicht direkt an maildir-Format-Mailboxen. Ihre beste Chance
ist, auf die aktuelle Version von <i>procmail</i> upzugraden. Ein
anderer L&ouml;sungsversuch ist <i>safecat</i>, ein Programm, dass
eine Nachricht auf der Standardeingabe an eine spezifizierten Maildir
schreibt. Benutzer k&ouml;nnen <i>procmail</i>-Rezepte
(Zustellinstruktionen) schreiben, die <i><a href="#safecat">safecat</a></i>
verwenden, um die Nachricht einzuordnen. Sie k&ouml;nnen <i>procmail</i>
auch v&ouml;llig &uuml;bergehen und <i><a href="#maildrop">maildrop</a></i>
verwenden.</p>
<p>Letztendlich erwartet <tt>procmail</tt> von der Nachricht, die es
erh&auml;lt, dass sie im mbox-Format vorliegt. Normale <i>qmail</i>-Programmzustellungen
schlie&szlig;en nur die aktuelle Mailnachricht ein, ohne eine "<tt>Von</tt>"-Zeile.
Der <tt>preline</tt>-Befehl kann verwendet werden, um die Nachricht so
zu formatieren, wie <tt>procmail</tt> es erwartet. Der Wrapper, dessen
Link sie weiter oben gesehen haben, schlie&szlig;t <tt>preline</tt>
ein.</p>
<p>Lassen sie uns zum Beispiel sagen, dass der Benutzer "dave"
m&ouml;chte, dass seine Nachrichten von <tt>procmail</tt> verarbeitet
werden. Sein Systemadministrator hat <tt>procmail</tt> eingerichtet,
um standardm&auml;&szlig;ig an <tt>$HOME</tt> zuzustellen und bietet
den Exitcode-Wrapper an, der oben erw&auml;hnt wurde, und hat ihn <tt>/usr/local/bin/qmail-procmail</tt>
genannt. Seine <tt>.qmail</tt>-Datei sollte so aussehen:</p>
<pre> |/usr/local/bin/qmail-procmail<br></pre>
<h2><a name="pop-imap-servers">5.2. POP- und IMAP-Server</a></h2>
<p><i>qmail</i> schlie&szlig;t einen POP-Server, <i>qmail-pop3d</i>,
ein, aber er wird nicht als Teil des <i>qmail</i>-Installationprozesses
konfiguriert und installiert. Sie k&ouml;nnen auch einen der anderen
verf&uuml;gbaren POP- oder IMAP-Server verwenden, obwohl die meisten
f&uuml;r <i>Sendmail</i> geschrieben wurden und ein bisschen Aufwand
brauchen, um sie mit <i>qmail</i> zu verwenden.</p>
<h3><a name="qmail-pop3d">5.2.1. <i>qmail-pop3d</i></a></h3>
<p><i>qmail-pop3d</i> ist der POP-Server, der bei <i>qmail</i> dabei
ist. Es ist ein ausgezeichneter POP-Server und viele <i>qmail</i>-Sites
verwenden ihn. Er ist modular und unterst&uuml;tzt multiple
Authentifizierungsschemata mittels alternativer
Authentifizierungsmodule.</p>
<hr width="80%" align="left"><strong>Hinweis: </strong><i>qmail-pop3d</i>
unterst&uuml;tzt <b>nur</b> maildir-Format-Mailboxen, wenn sie also
Benutzer haben, die sich beim POP-Server einloggen und MUAs lokal
laufen lassen, dann m&uuml;ssen sie maildir unterst&uuml;tzen. Wenn
alle ihrer Benutzer Mails mittels POP lesen, dann ist das Mailboxformat
auf dem Server kein Thema.
<hr width="80%" align="left">
<h4><a name="pop3d-arch">5.2.1.1. Die Architektur von <i>qmail-pop3d</i></a></h4>
<p>Ein <i>qmail-pop3d</i>-Server besteht aus drei Modulen:</p>
<ul>
  <li><tt>qmail-popup</tt>--holt Benutzername/Passwort</li>
  <li><tt>checkpassword</tt>--authentifiziert Benutzername/Passwort</li>
  <li><tt>qmail-pop3d</tt>--der POP Daemon</li>
</ul>
<p>Normalerweise l&auml;uft <tt>qmail-popup</tt> mittels <tt>inetd</tt>
oder <tt>tcpserver</tt> und wartet an Port 110, dem POP3-Port. Wenn
eine Verbindung hergestellt wird, fragt es nach Benutzername und
Passwort. Dann ruft es <tt>checkpassword</tt> auf, das
Benutzername/Passwort verifiziert und <tt>qmail-pop3d</tt> aufruft,
wenn sie zutreffen.</p>
<h4><a name="pop3d-installation">5.2.1.2. Installation von <i>qmail-pop3d</i></a></h4>
<p>1. Installieren und testen sie <i>qmail</i> komplett. Wenn sie
f&uuml;r alle Benutzer POPige Mailboxen haben wollen, dann stellen sie
sicher, dass <i>defaultdelivery</i> auf <tt>./Maildir/</tt> gesetzt
ist. Wenn sie das <tt>/var/qmail/rc</tt>-Skript aus dem
Installationsabschnitt installiert haben, dann ist das in <tt>control/defaultdelivery</tt>
konfiguriert. Wenn nicht, dann ist es vermutlich in <tt>/var/qmail/rc</tt>
in der <tt>qmail-start</tt>-Befehlszeile.</p>
<p>2. Downloaden sie ein <tt>checkpassword</tt>-Programm von <a
 href="http://www.qmail.org/top.html#checkpassword">http://www.qmail.org/top.html#checkpassword</a>.
Das Standard-<tt>checkpassword</tt>, <a
 href="http://cr.yp.to/checkpwd.html">http://cr.yp.to/checkpwd.html</a>,
ist eine gute Wahl, wenn sie nichts besonders pr&auml;chtiges brauchen.</p>
<p>3. Kompilieren und installieren sie <tt>checkpassword</tt>
gem&auml;&szlig; den Anweisungen. Stellen sie sicher, dass sie es als <tt>/bin/checkpassword</tt>
installieren.</p>
<p>4. Erstellen sie ein <tt>/var/qmail/supervise/qmail-pop3d/run</tt>-Skript,
das folgendes enth&auml;lt:</p>
<pre>#!/bin/sh<br>exec /usr/local/bin/softlimit -m 2000000 \<br> /usr/local/bin/tcpserver -v -R -H -l 0 0 110 /var/qmail/bin/qmail-popup \<br> <i>FQDN</i> /bin/checkpassword /var/qmail/bin/qmail-pop3d Maildir 2&gt;&amp;1<br></pre>
<p>wobei <i>FQDN</i> der vollqualifizierte Domainname des POP-Servers,
den sie einrichten, ist, z.B., <tt>pop.beispiel.net</tt>.</p>
<hr width="80%" align="left"><strong>Hinweis: </strong>Das
Speicherlimit, das im <tt>softlimit</tt>-Befehl spezifiziert ist,
k&ouml;nnte angehoben werden m&uuml;ssen, abh&auml;ngig von ihrem
Betriebssystem und ihrer Hardwareplattform. Wenn Versuche, sich mit
Port 110 zu verbinden fehlschlagen oder POP3-Verbindungen
mysteri&ouml;serweise fehlschlagen, versuchen sie es auf 3000000 oder
5000000 anzuheben.
<hr width="80%" align="left">
<p>5. Erstellen sie ein <tt>/var/qmail/supervise/qmail-pop3d/log/run</tt>
-Skript, das folgendes enth&auml;lt:</p>
<pre>#!/bin/sh<br>exec /usr/local/bin/setuidgid qmaill /usr/local/bin/multilog t \<br> /var/log/qmail/pop3d<br></pre>
<p>6. Richten sie das Log-Verzeichnis und die Zugriffsrechte auf die <tt>run</tt>-Skripte
ein und verlinken sie den Service nach <tt>/service</tt>:</p>
<pre> chmod +t /var/qmail/supervise/qmail-pop3d <i># if daemontools &lt; 0.75</i><br> mkdir /var/log/qmail/pop3d<br> chown qmaill /var/log/qmail/pop3d<br> chmod 755 /var/qmail/supervise/qmail-pop3d/run<br> chmod 755 /var/qmail/supervise/qmail-pop3d/log/run<br> ln -s /var/qmail/supervise/qmail-pop3d /service<br></pre>
<p>7. F&uuml;gen sie das Folgende <tt>qmailctl</tt>s "start"-Sektion
hinzu:</p>
<pre> if svok /service/qmail-pop3d ; then<br> svc -u /service/qmail-pop3d /service/qmail-pop3d/log<br> else<br> echo qmail-pop3d supervise not running<br> fi<br></pre>
<p>8. F&uuml;gen sie das Folgende <tt>qmailctl</tt>s "stop"-Sektion
hinzu:</p>
<pre> echo " qmail-pop3d"<br> svc -d /service/qmail-pop3d /service/qmail-pop3d/log<br></pre>
<p>9. F&uuml;gen sie das Folgende <tt>qmailctl</tt>s "stat"-Sektion
hinzu:</p>
<pre> svstat /service/qmail-pop3d<br> svstat /service/qmail-pop3d/log<br></pre>
<p>10. F&uuml;gen sie das Folgende <tt>qmailctl</tt>s "pause"-Sektion
hinzu:</p>
<pre> echo "Pausing qmail-pop3d"<br> svc -p /service/qmail-pop3d<br></pre>
<p>11. F&uuml;gen sie das Folgende <tt>qmailctl</tt>s "cont"-Sektion
hinzu:</p>
<pre> echo "Continuing qmail-pop3d"<br> svc -c /service/qmail-pop3d<br></pre>
<p>12. F&uuml;gen sie das Folgende <tt>qmailctl</tt>s
"restart"-Sektion hinzu:</p>
<pre> echo "* Restarting qmail-pop3d."<br> svc -t /service/qmail-pop3d /service/qmail-pop3d/log<br></pre>
<h3><a name="qpopper">5.2.2. <i>Qpopper</i></a></h3>
<p>Wenn sie einen POP-Daemon brauchen, der mit mbox-Format-Mailboxen
arbeitet, dann k&ouml;nnen sie Qualcomms <i>Qpopper</i> verwenden. <i>Qpopper</i>
ist unter <a href="http://www.eudora.com/qpopper_general/">http://www.eudora.com/qpopper_general/</a>
verf&uuml;gbar.</p>
<h3><a name="solidpop">5.2.3. <i>SolidPOP</i></a></h3>
<p>Der <i>SolidPOP</i>-POP3-Server unterst&uuml;tzt sowohl maildir-
als auch mbox-Mailboxen. Er ist verf&uuml;gbar unter <a
 href="http://solidpop3d.pld.org.pl/">http://solidpop3d.pld.org.pl/</a>.</p>
<h3><a name="bincimap">5.2.4. <i>Binc IMAP</i></a></h3>
<p>Andreas Hanssen schrieb den <i>Binc IMAP</i>-Server. Binc IMAP ist
entworfen, um den selben Authentifizierungsmechanismus (<tt>checkpassword</tt>)
zu verwenden, denn <tt>qmail-pop3d</tt> verwendet, so dass es gut
f&uuml;r <i>qmail</i>-Server geeignet ist. Wie <tt>qmail-pop3d</tt>
unterst&uuml;tzt es nur Maildir-Mailboxen. Siehe: <a
 href="http://www.bincimap.org/">http://www.bincimap.org/</a>.</p>
<h3><a name="dovecot">5.2.5. <i>Dovecot</i></a></h3>
<p>Timo Sirainen schrieb <i>Dovecot</i>, einen IMAP- und POP-Server,
der sowohl mbox- als auch maildir-Mailboxen unterst&uuml;tzt. Er wurde
entworfen, um sicher zu sein. Er ist verf&uuml;gbar unter <a
 href="http://dovecot.procontrol.fi/">http://dovecot.procontrol.fi/</a>.</p>
<h3><a name="imap-maildir">5.2.6. <i>imap-maildir</i></a></h3>
<p>David R. Harris hat den Patch, der maildir-Unterst&uuml;tzung zum
University of Washington IMAP-Server hinzuf&uuml;gt aufger&auml;umt und
den Installationsprozess dokumentiert. Siehe <a
 href="http://www.davideous.com/imap-maildir/">http://www.davideous.com/imap-maildir/</a>.</p>
<h3><a name="courier-imap">5.2.7. <i>Courier-IMAP</i></a></h3>
<p>Sam Varshavchik schrieb einen IMAP-Server, der <b>ausschlie&szlig;lich</b>
maildir-Mailboxen unterst&uuml;tzt. Er ist verf&uuml;gbar unter <a
 href="http://www.inter7.com/courierimap/">http://www.inter7.com/courierimap/</a>.</p>
<h3><a name="cyrus">5.2.8. <i>Cyrus</i></a></h3>
<p>Das Carnegi Mellon Universit&auml;tsprojekt Cyrus schlie&szlig;t
einen IMAP-Server ein. Er ist verf&uuml;gbar unter <a
 href="http://asg.web.cmu.edu/cyrus/imapd/">http://asg.web.cmu.edu/cyrus/imapd/</a>.
Rick Updegrove schrieb einen <tt>qmail2cyrus</tt>-Wrapper f&uuml;r die
Zustellung von Nachrichten an einen Cyrus Mail Store. Dieser Wrapper
ist verf&uuml;gbar unter <a
 href="http://msgs.securepoint.com/cgi-bin/get/qmail0308/41/1/1.html">http://msgs.securepoint.com/cgi-bin/get/qmail0308/41/1/1.html</a>.</p>
<h2><a name="pop-imap-clients">5.3. POP- und IMAP-Clients</a></h2>
<h3><a name="fetchmail">5.3.1. <i>fetchmail</i></a></h3>
<p><i>fetchmail</i> ist ein Programm, dass Mail von einem POP- oder
IMAP-Server holt und lokal injiziert. <i>fetchmail</i> hat kein
Problem damit, Mail von <i>qmail</i>-Servern zu holen, aber es gibt
ein paar Tricks, um es korrekt auf einem <i>qmail</i>-Client laufen zu
lassen.</p>
<p>Hier ist als Beispiel eine <tt>.fetchmailrc</tt> f&uuml;r einen
Benutzer auf einem <i>qmail</i>-System:</p>
<pre>poll mail.example.net proto pop3 nodns<br> user dsill with password flubgart is dave here<br> fetchall forcecr<br></pre>
<p>Dies instruiert <i>fetchmail</i>, sich mit mail.beispiel.net
mittels POP3 zu verbinden, sich als Benutzer <tt>dsill</tt> mit dem
Passwort <tt>flubgart</tt> einzuloggen, alle Nachrichten abzuholen und
sie an dave@localhost zuzustellen. Das <tt>forcecr</tt> veranlasst <i>fetchmail</i>
jede Zeile mit einem Zeilenvorschub (engl. carriage return, cr; Anm. d.
&Uuml;bers.) zu beenden, wenn die Nachricht auf dem lokalen System
mittels SMTP injiziert wird. <i>qmail</i> braucht das so.</p>
<h3><a name="getmail">5.3.2. <i>getmail</i></a></h3>
<p><i>getmail</i> ist ein Programm, dass alle Mails von einem
POP-Server abholt und es einer maildir-Mailbox zustellt. Es ist derzeit
ein Pythonskript, also m&uuml;ssen sie den Pythoninterpreter
installieren, bevor sie <i>getmail</i> verwenden k&ouml;nnen.</p>
<p><i>getmail</i> wurde von Charles Cazabon geschrieben, der eine
Webseite f&uuml;r es unter <a
 href="http://www.qcc.sk.ca/%7Echarlesc/software/getmail-3.0/">http://www.qcc.sk.ca/~charlesc/software/getmail-3.0/</a>
unterh&auml;lt.</p>
<h2><a name="multi-rcpt">5.4. Mehrfach-RCPT- versus
Einzel-RCPT-Zustellung</a></h2>
<p>Sagen wir, sie sind ein MTA und einer ihrer Benutzer sendet eine
Nachricht an drei Leute bei hostx.beispiel.com. Da gibt es verschiedene
Wege, wie sie das tun k&ouml;nnten.</p>
<ol>
  <li>Sie k&ouml;nnten eine SMTP-Verbindung mit hostx &ouml;ffnen, eine
Kopie der Nachricht an den ersten Benutzer schicken, eine Kopie der
Nachricht an den zweiten Benutzer schicken, eine Kopie der Nachricht an
den dritten Benutzer schicken und dann die Verbindung schlie&szlig;en.</li>
  <li>Sie k&ouml;nnten drei Prozesse starten, von denen jeder eine
SMTP-Verbindung mit hostx &ouml;ffnet, eine Kopie der Nachricht an
einen der Benutzer schickt und dann die Verbindung schlie&szlig;t.</li>
  <li>Sie k&ouml;nnten eine SMTP-Verbindung mit hostx &ouml;ffnen, eine
Kopie der Nachricht, die an <i>alle drei Benutzer</i> adressiert ist
schicken und dann die Verbindung schlie&szlig;en.</li>
</ol>
<p>Die erste Methode ist klar minderwertig gegen&uuml;ber der dritten.
Auch wenn die Nachricht winzig ist, wird sie mindestens genausolange
brauchen. Und wenn die Nachricht riesig ist, dann wird sie viel
l&auml;nger brauchen <i>und</i> viel mehr Bandbreite verwenden.</p>
<p>Also streichen sie sie.</p>
<p>Die zweite und die dritte Methode sind ein bisschen interessanter.</p>
<p>Die dritte Methode &ouml;ffnet nur eine Verbindung mit hostx und
sendet nur eine Kopie der Nachricht. Das f&uuml;hrt zu einer
effizienten Nutzung von Bandbreite.</p>
<p>Die zweite Methode verwendet mehrere Verbindungen und sendet mehrere
Kopien der Nachricht. Das "verschwendet" Bandbreite, ben&ouml;tigt aber
aufgrund der Natur des SMTP-Protokolls weniger Round-Trip
Verz&ouml;gerungen und ist schneller als die dritte Methode. Sie auch
einfacher als die dritte Methode, so dass der MTA auf eine
verst&auml;ndlichere Art programmiert werden kann. Und zuletzt, weil
jeder Empf&auml;nger seine eigene Kopie der Nachricht erh&auml;lt, ist
es m&ouml;glich f&uuml;r den MTA VERPs zu implementieren (siehe
n&auml;chster Abschnitt).</p>
<p><i>qmail</i> verwendet <i>immer</i> die zweite Methode
(Einzel-RCPT). Es gibt keine Patches um die dritte Methode zu
implementieren (Mehrfach-RCPT)--es w&uuml;rde einen <b>Haufen</b>
Arbeit erforden.</p>
<p>Obgleich es pathologische F&auml;lle geben kann, bei denen es
langsamer als Mehrfach-RCPT ist, wiegen die Einfachheit und die
VERP-Vorteile das alles auf.</p>
<p>Einzel-RCPT-Zustellung <i>verwendet</i> mehr Bandbreite als die
Mehrfach-RCPT-Zustellung, aber der Unterschied wird oft
&uuml;berbetont. Die meisten Nachrichten haben h&ouml;chstens ein paar
Empf&auml;nger und die sind normalerweise auf verschiedenen Hosts, so
dass Mehrfach-RCPT-Zustellung nichts bringt. Auch auf einem
Listenserver, wo Mehrfach-RCPT-Zustellung helfen sollte, sind die
potenziellen Vorteile klein, weil SMTP nur einen Bruchteil der
Bandbreite verwendet--HTTP kriegt normalerweise den L&ouml;wenanteil.</p>
<p>Wenn zum Beispiel 10% ihrer abgehenden Bandbreite an SMTP gehen und
ihre SMTP-Bandbreite durch Verwendung von Mehrfach-RCPT-Zustellung um,
sagen wir, 25% reduziert werden k&ouml;nnte, dann w&uuml;rde das ihre
SMTP-Bandbreite um 7.5% vermindern.</p>
<h2><a name="verp">5.5. VERP</a></h2>
<p>Wenn eine Nachricht unzustellbar ist, dann sollte der
zust&auml;ndige MTA versuchen, eine Bounce-Nachricht an die
Absenderadresse (engl. envelope return path, ERP; Anm. d. &Uuml;bers.)
zu schicken. Die Bounce-Nachricht sollte die Adresse des
Empf&auml;ngers, den Grund, warum die Nachricht nicht zustellbar ist
und die Information, ob der Fehler vor&uuml;bergehend oder permanent
ist, enthalten. Manche MTAs machen es nicht richtig. Sie senden
eventuell die Bounce-Nachricht an die Adresse aus dem "Von"-Kopffeld
oder die Bounce-Nachricht nennt den Empf&auml;nger nicht.</p>
<p>F&uuml;r die meisten Benutzer-an-Benutzer-Nachrichten sind diese
Probleme nicht so schlimm. Man kann normalerweise einiges anhand der
Zeitinformation oder anhand des Inhalts herausfinden. F&uuml;r
Mailing-Listen ist das Problem mit schlechten Bounce-Nachrichten
schwerwiegender. Abonnenten ziehen um und lassen Mails an ihre neue
Adresse weiterleiten. Wenn die neue Adresse anf&auml;ngt,
Zustellprobleme zu haben, kann es unm&ouml;glich sein herauszufinden,
wes' Abonnenten Mail eine Bounce-Nachricht zur&uuml;ckliefert, wenn die
Bounce-Nachricht nur die neue Adresse enth&auml;lt.</p>
<p>Dan Bernstein hatte die Idee f&uuml;r eine L&ouml;sung dieses
Problems, die er VERP (Variable Envelope Return Path,
Ver&auml;nderliche Absenderadresse) nannte. Wenn man VERPs verwendet,
dann hat jede Nachricht, die an jeden Abonnenten einer Liste gesandt
wird, eine einzigartige Antwortadresse. Das erlaubt einer
Bounce-Nachrichten-Behandlungsprozedur die problematischen Abonnenten
zu identifizieren.</p>
<p>Eine typische nichtgeVERPte Mailing-Liste hat z. B. eine
Absenderadresse in der Form <tt><i>listenname</i>-besitzer@<i>domain</i></tt>.
F&uuml;r eine geVERPte Liste w&uuml;rde die Absenderadresse so
aussehen: <tt><i>listenname</i>-besitzer-<u><i>abonnent</i>=<i>sdomain</i></u>@<i>ldomain</i></tt>,
wobei die Abonnentenadresse <tt><i>abonnent</i>@<i>sdomain</i></tt>
zwischen dem "besitzer" und dem "@" eingebettet ist. (Das "@" in der
Abonnentenadresse wird durch ein "=" ersetzt.)</p>
<p>Der <i><a href="#ezmlm">ezmlm</a></i>-Listenmanager verwendet VERP
automatisch, um Bounce-Nachrichten zu behandeln. Es bietet Abonnenten
mit zeitweiligen Zustellproblemen sogar eine Liste der Nachrichten, die
sie verpasst haben, so dass sie sie aus dem Archiv anfordern
k&ouml;nnen.</p>
<p>Russell Nelson schrieb einen Bounce-Manager f&uuml;r <i>Majordomo</i>
unter <i>qmail</i>, aber er pflegt ihn nicht l&auml;nger. Er ist
verf&uuml;gbar unter <a href="http://www.qmail.org/bounceman-0.4.shar">http://www.qmail.org/bounceman-0.4.shar</a>.</p>
<h2><a name="troubleshooting">5.6. Fehlerbeseitung</a></h2>
<h3><a name="processes">5.6.1. Prozesse</a></h3>
<p>Eine gut laufende, komplette, aber minimale <i>qmail</i>-Installation
sollte immer die folgenden vier Prozesse haben:</p>
<ul>
  <li><tt>qmail-send</tt> als Benutzer <tt>qmails</tt></li>
  <li><tt>qmail-clean</tt> als Benutzer <tt>qmailq</tt></li>
  <li><tt>qmail-rspawn</tt> als Benutzer <tt>qmailr</tt></li>
  <li><tt>qmail-lspawn</tt> als Benutzer <tt>root</tt></li>
</ul>
<p>Abh&auml;ngig von ihrer UNIX-Variante, sollte eine der folgenden
zwei Befehle diese Prozesse auflisten und vielleicht ein paar mehr:</p>
<pre> ps -ef | grep qmail<br> ps waux | grep qmail<br></pre>
<p>Zum Beispiel:</p>
<pre>[dave@sparge dave]$ <b>ps waux|grep qmail</b><br>dave 2222 0.0 0.8 836 348 p4 S 10:25 0:00 grep qmail<br>qmaild 351 0.0 1.0 840 400 ? S N 12:43 0:00 /usr/local/bin/tcpserver -v -x /etc/tcp.smtp.cdb -u 49491 -g 31314 0 smtp /var/qmail/bin/qmail-smtpd-<br>qmaild 2220 0.0 1.0 844 420 ? S N 10:25 0:00 /usr/local/bin/tcpserver -v -x /etc/tcp.smtp.cdb -u 49491 -g 31314 0 smtp /var/qmail/bin/qmail-smtpd-<br>qmaill 365 0.0 0.8 748 344 ? S N 12:43 0:00 splogger qmail<br><b>qmailq 368 0.0 0.7 736 292 ? S N 12:43 0:00 qmail-clean</b><br><b>qmailr 367 0.0 0.6 732 272 ? S N 12:43 0:00 qmail-rspawn</b><br><b>qmails 350 0.0 0.8 776 336 ? S N 12:43 0:00 qmail-send</b><br>root 340 0.0 0.6 724 252 ? S N 12:43 0:00 /usr/local/sbin/supervise /var/supervise/qmail-send /var/qmail/rc<br>root 341 0.0 0.6 724 252 ? S N 12:43 0:00 /usr/local/sbin/supervise /var/supervise/tcpserver-qmail /usr/local/bin/tcpserver -v -x /etc/tcp.smtp<br><b>root 366 0.0 0.7 736 276 ? S N 12:43 0:00 qmail-lspawn ./Mailbox</b><br>[dave@sparge dave]$<br></pre>
<p>Wenn sie <i>qmail</i> oder <tt>qmail-smtpd</tt> unter <tt>supervise</tt>
laufen lassen, wie im Beispiel oben, dann sollten sie auch diese
Prozesse sehen. Und wenn sie <tt>qmail-smtpd</tt> unter <tt>tcpserver</tt>
laufen lassen, dann sollten sie einen Elternprozess <tt>tcpserver</tt>
<i>plus</i> einen zus&auml;tzlichen <tt>tcpserver</tt>-Prozess
f&uuml;r jede aktive <i>hereinkommende</i> SMTP-Verbindung sehen.</p>
<p>Wenn sie <tt>splogger</tt> (oder <tt>multilog</tt> oder <tt>cyclog</tt>)
verwenden, um das Loggin zu behandeln, dann werden sie einen <tt>splogger</tt>
(oder <tt>multilog</tt> oder <tt>cyclog</tt>) -Prozess, oder zwei,
als Benutzer <tt>qmaill</tt> laufen haben.</p>
<p>Au&szlig;erdem, wenn <i>qmail</i> sehr besch&auml;ftigt damit ist,
Nachrichten lokal oder extern zuzustellen, dann werden sie bis zu <tt>concurrencylocal</tt>
<tt>qmail-local</tt>-Prozesse und bis zu <tt>concurrencyremote</tt> <tt>qmail-remote</tt>-Prozesse
sehen.</p>
<h3><a name="logs">5.6.2. Logs</a></h3>
<h4><a name="multilog">5.6.2.1. <tt>multilog</tt></a></h4>
<p><tt>multilog</tt>, das Teil des <i><a href="#daemontools">daemontools</a></i>-Packages
ist, loggt Nachrichten in eine Reihe von Dateien in einem
spezifizierten Verzeichnis.</p>
<p>Das Log-Verzeichnis wird in der <tt>multilog</tt>-Befehlszeile
spezifiziert, so dass sie es finden k&ouml;nnen, indem sie ihre <i>qmail</i>-Startskripte
untersuchen .</p>
<p>Die Anzahl der Dateien im Log-Verzeichnis und die maximale
Gr&ouml;&szlig;e jede dieser Dateien werden durch die <tt>multilog</tt>-Optionen
festgelegt. Die Logdateinamen sind der TAI- (Temps Atomique
International) Zeitstempel der Zeit, an der die Datei begonnen wurde.
Der <tt>tai64nlocal</tt>-Befehl, auch von <i>daemontools</i>,
konvertiert TAI-Zeitstempel in lokale, menschenlesbare Zeitstempel.</p>
<p>Ein typischer <tt>multilog</tt>-Logeintrag sieht so aus:</p>
<pre>@4000000038c3eeb104a6ecf4 delivery 153: success: did_1+0+0/<br></pre>
<p>"@4000000038c3eeb104a6ecf4" ist der optionale, aber empfohlene
TAI-Zeitstempel. "delivery 153: success: did_1+0+0/" ist die
Lognachricht selber.</p>
<h4><a name="splogger">5.6.2.2. <tt>splogger</tt></a></h4>
<p><tt>splogger</tt> verwendet das <i>syslog</i>-Log-System, um
Nachrichten zeitzustempeln und sie an den <i>syslog</i>-Daemon zu
senden. <i>Syslog</i> wird in <tt>/etc/syslog.conf</tt> konfiguriert.
Nachrichten, die an <i>syslog</i> gesandt wurden, haben eine <i>facility</i>
(engl. facility: M&ouml;glichkeit; Anm. d. &Uuml;bers.) und eine <i>priority</i>
(engl. priority: Priorit&auml;t; Anm. d. &Uuml;bers.). Eintr&auml;ge in
<tt>/etc/syslog.conf</tt> filtern nach der facility und der priority um
die Nachrichten an die gew&uuml;nschte Logdatei, einen externen Loghost
oder die Konsole zu senden. <tt>splogger</tt> loggt
standardm&auml;&szlig;ig in die <tt>mail</tt>-facility, so dass das <tt>grep</tt>en
der <tt>syslog.conf</tt>-Datei nach "mail" die Disposition von <i>qmail</i>s
Lognachrichten zeigen sollte.</p>
<p>Typische Orte sind:</p>
<ul>
  <li><tt>/var/log/syslog</tt></li>
  <li><tt>/var/adm/SYSLOG</tt></li>
  <li><tt>/var/log/maillog</tt></li>
</ul>
<p>Ein typischer <i>syslog</i>-Logeintrag sieht so aus:</p>
<pre>Jun 3 11:35:23 sparge qmail: 928424123.963558 delivery 153: success: did_1+0+0/<br></pre>
<p>"Jun 3 11:35:23" ist der <i>syslog</i>-Zeitstempel.</p>
<p>"sparge" ist der Name des Systems, das sie Nachricht sandte.</p>
<p>"qmail:" ist der Tag, den <tt>splogger</tt> in allen <i>qmail</i>-Logeintr&auml;gen
platziert.</p>
<p>"928424123.963558" ist ein optionaler TAI-Zeitstempel (siehe
n&auml;chster Abschnitt).</p>
<p>"delivery 153: success: did_1+0+0/" ist die Lognachricht selber.</p>
<h4><a name="log-messages">5.6.2.3. Lognachrichten</a></h4>
<p>Hier ist eine typische Log-Sequenz f&uuml;r eine Nachricht, die an
ein externes System von einem lokalen System gesandt wurde:</p>
<pre><b>1</b> @4000000038c3eeb027f41c7c new msg 93869<br><b>2</b> @4000000038c3eeb027f6b0a4 info msg 93869: bytes 2343 from &lt;dave@sill.org&gt; qp 18695 uid 49491<br><b>3</b> @4000000038c3eeb02877ee94 starting delivery 2392: msg 93869 to remote lwq@w3.to<br><b>4</b> @4000000038c3eeb0287b55ac status: local 0/10 remote 1/20<br><b>5</b> @4000000038c3eeb104a13804 delivery 2392: success: 209.85.127.177_accepted_message.<br> /Remote_host_said:_250_CAA01516_Message_accepted_for_delivery/<br><b>6</b> @4000000038c3eeb104a4492c status: local 0/10 remote 0/20<br><b>7</b> @4000000038c3eeb104a6ecf4 end msg 93869<br></pre>
<p>Zeile 1 sagt, dass <i>qmail</i> eine neue Nachricht erhalten hat
und dass seine Warteschlangen-ID 93869 ist. Die Warteschlangen-ID ist
die i-Knotennummer der <tt>/var/qmail/queue/mess/<i>NN</i>/</tt>-Datei--die
Warteschlangendatei, die die Nachricht enth&auml;lt. Die
Warteschlangen-ID ist garantiert einzigartig, so lange, wie die
Nachricht in der Warteschlange verbleibt.</p>
<p>Zeile 2 sagt, dass die Nachricht von <tt>dave@sill.org</tt> ist und
dass sie 2343 Bytes gro&szlig; ist.</p>
<p>Zeile 3 sagt, dass <tt>qmail-remote</tt> startet, um die Nachricht
an <tt>lwq@w3.to</tt> zuzustellen und dass es der Zustellung die ID
2392 zuordnet.</p>
<p>Zeile 4 sagt, dass 0 lokale Zustellungen und eine externe Zustellung
warten.</p>
<p>Zeile 5 sagt, dass die Zustellung 2392 komplett und erfolgreich ist
und dass sie die externe Serverantwort zur&uuml;ckgibt, die oft
Informationen enth&auml;lt, die der externe Mail-Administrator
hilfreich finden sollte, um die Zustellung nachzuverfolgen. In diesem
Fall ist "CAA01516" die Zustell-ID des externen Systems.</p>
<p>Zeile 6 sagt, dass 0 lokale Zustellungen und 0 externe Zustellungen
warten, d.h., dass die Zustellung komplett ist.</p>
<p>Zeile 7 sagt, dass die Nachricht komplett zugestellt und aus der
Warteschlange entfernt wurde. Von nun an ist die Warteschlangen-ID
93869 f&uuml;r eine andere Zustellung wiederverwendbar.</p>
<h2><a name="big-servers">5.7. Gro&szlig;e Server</a></h2>
<p>Siehe auch <i><a href="#qmail-ldap">qmail-ldap</a></i>.</p>
<h3><a name="scalable-parallelism">5.7.1. Skalierbare Parallelit&auml;t</a></h3>
<p>Verwenden sie einen schnellen NFS-Netzwerkdateiserver, um die
Benutzerverzeichnisse zu speichern. Setzen sie mehrere gleichrangige
SMTP-Server auf, die an die maildir-Mailboxen auf diesem Dateiserver
zustellen.</p>
<h2><a name="migrating-to-qmail">5.8. Migration von <i>Sendmail</i>
nach <i>qmail</i></a></h2>
<p>Lesen sie Dan Bernsteins <i>Sendmail</i>-&gt;<i>qmail</i> Seite
unter <a href="http://cr.yp.to/qmail/sendmail.html">http://cr.yp.to/qmail/sendmail.html</a>.</p>
<h2><a name="mailing-list-managers">5.9. Mailinglistenmanager</a></h2>
<p>Mailinglistenmanager (MLM) sind Systeme, die Listenbesitzern helfen,
Mailingslisten laufen zu lassen. Ihre Pflichten fallen in zwei
Bereiche: die Liste der Abbonenten zu managen und die Weiterleitung der
Nachrichten an die Abonnenten zu kontrollieren.</p>
<p>Die meisten (alle?) UNIX-Mailinglistenmanager k&ouml;nnen dazu
gebracht werden, mit <i>qmail</i> zusammenzuarbeiten.</p>
<h3><a name="mlm-ezmlm">5.9.1. <i>ezmlm</i></a></h3>
<p><i>ezmlm</i> wurde von Dan Bernstein geschrieben, dem Autoren von <i>qmail</i>.
Es wurde f&uuml;r die Verwendung mit <i>qmail</i> geschrieben und
verl&auml;sst sich auf einige Features von <i>qmail</i>. H&ouml;chst
beachtenswert ist, dass es <a href="#verp">VERPs</a> verwendet, um
Bounce-Nachrichten verl&auml;sslich zu behandeln. <i>ezmlm</i> ist ein
bisschen einzigartig unter den MLM derart, dass es Befehle, die an eine
zentrale MLM-Adresse gesandt wurden, nicht behandelt: es h&auml;ngt den
Befehl an den Namen der Liste an. Um sich, zum Beispiel, in die Liste
"irgendeine@liste.beispiel.net"-Liste einzuschreiben, sendet jemand ein
Nachricht an "irgendeine-subscribe@liste.beispiel.net" (engl.
subscribe: einschreiben; Anm. d. &Uuml;bers.).</p>
<p>F&uuml;r mehr Informationen &uuml;ber <i>ezmlm</i>, siehe <a
 href="http://www.ezmlm.org/">http://www.ezmlm.org/</a>, die
inoffizielle <i>ezmlm</i>-Webseite und die offizielle Homepage von <i>ezmlm-idx</i>,
einen sehr guten Add-On, dass viele n&uuml;tzliche Features
einschlie&szlig;t.</p>
<h3><a name="mlm-majordomo">5.9.2. <i>Majordomo</i></a></h3>
<p><i>Majordomo</i> ist einer der popul&auml;rsten UNIX-MLM. Es
arbeitet hervorragend mit einem <i>qmail</i>, an dem ein paar
einfachen Ver&auml;nderungen vorgenommen wurden. Russ Allbery hat eine
FAQ &uuml;ber <i>qmail</i>/<i>Majordomo</i> geschrieben, die unter <a
 href="http://www.eyrie.org/%7Eeagle/faqs/mjqmail.html">http://www.eyrie.org/~eagle/faqs/mjqmail.html</a>
verf&uuml;gbar ist.</p>
<h2><a name="patches">5.10. Patche</a></h2>
<p>Verschiedene Quellcodepatches sind f&uuml;r <i>qmail</i>
verf&uuml;gbar. Um einen Patch zu installieren, downloaden sie ihn,
wechseln sie in den <i>qmail</i>-Quellcodepfad und aktivieren sie ihn
mit Hilfe des <tt>patch</tt>-Befehls.</p>
<pre> cd /usr/local/src/qmail/qmail-1.03<br> patch -p0 &lt;/tmp/patchfile<br></pre>
<hr width="80%" align="left"><strong>Hinweis: </strong>Lesen sie die <tt>patch</tt>-<tt>man</tt>-Page
f&uuml;r mehr Informationen. Das war nur ein einfaches Beispiel.
Au&szlig;erdem k&ouml;nnten sie die aktuelle Version des GNU-Patches
verwenden m&uuml;ssen, um einige Patche erfolgreich zu installieren.
Siehe <a href="http://www.gnu.org/software/patch/patch.html">http://www.gnu.org/software/patch/patch.html</a>.
<hr width="80%" align="left">
<p>Stoppen sie <i>qmail</i>, indem sie <tt>qmail-send</tt> killen,
oder, wenn sie <tt>qmailctl</tt>-Skript aus dem Installationsabschnitt
installiert haben, indem sie folgendes tun:</p>
<pre> qmailctl stop<br></pre>
<p>Danach bauen sie die Bin&auml;rdateien neu und installieren sie sie:</p>
<pre> make setup check<br></pre>
<p>Und starten sie <i>qmail</i> neu:</p>
<pre> qmailctl start<br></pre>
<p>Zuletzt testen sie <i>qmail</i>--insbesondere den Teil, den sie
ge&auml;ndert haben.</p>
<hr width="80%" align="left"><strong>Hinweis: </strong>Obwohl <a
 href="http://www.qmail.org/">http://www.qmail.org/</a> viele Patche
f&uuml;r <i>qmail</i> auflistet, ist <b>keiner</b> von ihnen vom
Autoren von qmail best&auml;tigt worden. Sie m&ouml;gen Sicherheits-,
Verl&auml;sslichkeits-, Effizienz- oder funktionale Probleme
herbeif&uuml;hren, die es in <i>qmail</i> nicht gibt. Die meisten <i>qmail</i>-Installationen
brauchen nur einige der empfohlenen Patche. <b>Sie</b> <b>sollten
keine Patche installieren, die sie nicht unbedingt brauchen.</b>
<hr width="80%" align="left">
<h3><a name="recommended-patches">5.10.1. Empfohlene Patche</a></h3>
<p>qmail.org f&uuml;hrt einen "Empfohlene Patche"-Abschnitt: <a
 href="http://qmail.org/top.html#patches">http://qmail.org/top.html#patches</a>.
Diese Patche widmen sich einigen bekannten Bugs in qmail.</p>
<hr width="80%" align="left"><strong>Hinweis: </strong>Alle
empfohlenen Patche sind in der <i>netqmail</i>-Distribution enthalten.
Siehe <a href="http://www.qmail.org/netqmail/">http://www.qmail.org/netqmail/</a>.
<hr width="80%" align="left">
<h4><a name="errno-patch">5.10.1.1. <tt>errno.h</tt>-Patche</a></h4>
<p>Dieser Patch beseitigt ein Problem mit fehlenden <tt>errno.h</tt>-Einschl&uuml;ssen.
Siehe <a
 href="http://news.gmane.org/article.php?id=13960&amp;group=gmane.mail.qmail.general">http://news.gmane.org/article.php?id=13960&amp;group=gmane.mail.qmail.general</a>
f&uuml;r eine detaillierte Erl&auml;uterung und den Patch selber.</p>
<p>Mate Wierdl hat <tt>errno.h</tt>-Patche f&uuml;r alle Software von
Dan Bernstein, einschlie&szlig;lich <i>qmail</i>, <i>daemontools</i>
und <i>ucspi-tcp</i>. Diese Patche sind verf&uuml;gbar unter <a
 href="ftp://moni.csi.hu/pub/glibc-2.3.1/">ftp://moni.csi.hu/pub/glibc-2.3.1/</a>.</p>
<h4><a name="qmail-local-tab-patch">5.10.1.2. qmail-local TAB patch</a></h4>
<p>Dieser Patch repariert einen kleinen Bug beim Bestimmen von <tt>.qmail</tt>-Dateien,
die mit einem TAB-Zeichen beginnen. <a
 href="http://www.ornl.gov/its/archives/mailing-lists/qmail/2000/10/msg00696.html">http://www.ornl.gov/its/archives/mailing-lists/qmail/2000/10/msg00696.html</a></p>
<h4><a name="0.0.0.0-patch">5.10.1.3. IP 0.0.0.0 patch</a></h4>
<p>Dieser Patch verursacht, dass die IP-Adresse 0.0.0.0 als lokal
erkannt wird. <a
 href="http://www.suspectclass.com/%7Esgifford/qmail/qmail-0.0.0.0.patch">http://www.suspectclass.com/~sgifford/qmail/qmail-0.0.0.0.patch</a></p>
<h3><a name="dns-patches">5.10.2. DNS</a></h3>
<p>Aus historischen Gr&uuml;nden wurden DNS-Antworten auf 512 Bytes
limitiert. Einige gro&szlig;e Seiten haben begonnen, MX-Antworten
zur&uuml;ckzuliefern, die l&auml;nger sind als das. <i>qmail</i> und
viele andere Programme haben ein Problem mit Domainnamensserver
(DNS)-Anfragen, die sehr gro&szlig;e Ergebnisse zur&uuml;ckliefern. Es
gibt drei Wege, um das in <i>qmail</i> zu fixen.</p>
<h4><a name="dnscache">5.10.2.1. Lassen sie <tt>dnscache</tt> von <i>djbdns</i>
laufen</a></h4>
<p><tt>dnscache</tt> ist, wie der Name impliziert, ein cachender
DNS-Server. Er wei&szlig;, wie er gro&szlig;e DNS-Antworten behandeln
muss und verbessert allgemein die DNS-Suchleistung f&uuml;r alle
Services, die DNS verwenden. Weil es kein Patchen von <i>qmail</i>
erfordert, ist das bei weitem die beste L&ouml;sung. Siehe den <a
 href="#djbdns">djbdns</a>-Abschnitt unter <a href="#related-packages">Related
Packages</a> f&uuml;r mehr Informationen.</p>
<h4><a name="dns-bump">5.10.2.2. Knallen sie die
Paketpuffergr&ouml;&szlig;e rauf auf 65536</a></h4>
<p>Das funktioniert mit modernen
BIND-Namensaufl&ouml;sungsbibliotheken, die automatisch eine TCP-Suche
innerhalb des Bibliothekscodes ausf&uuml;hren, wenn die Antwort mit
einem gesetzten K&uuml;rzungs-Bit zur&uuml;ckkommt. Das ist der
einfachste Fix, obwohl es <i>potenziell</i> auch der am meisten
speicherverschwendende ist, abh&auml;ngig davon, wie ihr System das
Paging behandelt. Um es zu tun, ersetzen sie einfach <tt>PACKETSZ</tt>
mit <tt>65536</tt> in <tt>dns.c</tt> und bauen sie <i>qmail</i> neu.</p>
<h4><a name="dns-davis"> </a>5.10.2.3. Christopher K. Davis' Patch, <a
 href="http://www.ckdhr.com/ckd/qmail-103.patch">http://www.ckdhr.com/ckd/qmail-103.patch</a></h4>
<p>Das ist eine Adaption des Patches von Chuck Foster, die mit jeder
Namensaufl&ouml;serbibliothek, egal wie alt, zusammenarbeiten sollte
und ein W&auml;chter-Byte verwendet, um den "Anzahl von Bytes, die im
Puffer platziert sind"-Bibliotheksbug zu vermeiden. Es teilt nur einmal
bis zu 65536 zu, etwas mehr als die Gr&ouml;&szlig;e, die notwendig
ist, so dass es weniger speichereffizient sein kann als Chucks Patch
(obwohl es, wie sein Patch, nur Speicher zuteilt, wenn die Antwort
l&auml;nger als PACKETSZ ist, das standardm&auml;&szlig;ig auf 512
Bytes gesetzt ist). Nach der Zuteilung erzwingt es eine TCP-Anfrage,
anstatt die Namensaufl&ouml;sungsbibliothek aufzufordern, es zu tun
(eine Extrarunde zwischen qmail und dem Namensserver vermeidend, obwohl
es, wenn sie auf derselben Maschine oder in einem lokalen Netzwerk
sind, keine gro&szlig;e Sorge ist).</p>
<h3><a name="qmail-ldap">5.10.3. <i>qmail-ldap</i></a></h3>
<p>Dieser Patch von Andr&eacute; Oppermann, implementiert Lightweight
Directory Access Protocol (LDAP) -Unterst&uuml;tzung in qmail. LDAP ist
wie ein Netzwerktelefonbuch. Wenn er <i>qmail-ldap</i> verwendet,
sollte es f&uuml;r einen POP-Server m&ouml;glich sein, viele Tausen
Benutzer zu bedienen. Siehe <a href="http://www.nrg4u.com/">http://www.nrg4u.com/</a>.</p>
<h2><a name="qmtp">5.11. QMTP</a></h2>
<p>QMTP ist das Quick Mail Transfer Protocol (engl. Quick Mail Transfer
Protocol: Schnelles Mail&uuml;bertragungsprotokoll; Anm. d.
&Uuml;bers.), ein SMTP-Ersetzungsprotokoll, dass von Dan Bernstein
entworfen wurde. Das Protokoll ist definiert unter <a
 href="http://cr.yp.to/proto/qmtp.txt">http://cr.yp.to/proto/qmtp.txt</a>.
QMTP ist SMTP &auml;hnlich, aber einfacher, schneller und nicht mit
SMTP kompatibel. <i>qmail</i> schlie&szlig;t einen QMTP-Server, <tt>qmail-qmtpd</tt>,
ein, der fast genauso wie <tt>qmail-smtpd</tt> laufen gelassen wird.
QMTP verwendet normalerweise Port 209.</p>
<p><i>qmail</i> schlie&szlig;t keinen QMTP-<i>Client</i> ein, aber das <i>serialmail</i>-Package
tut das. <tt>maildirqmtp</tt> nimmt eine Maildir-Mailbox und stellt
die darin enthaltenenen Nachrichten den jeweiligen QMTP-Servern mittels
QMTP zu.</p>
<p>QMTP ist keine Drop-In Ersetzung f&uuml;r SMTP und ist im Internet
noch nicht in breiter Verwendung.</p>
<p>Russ Nelson hat einen Patch f&uuml;r <tt>qmail-remote</tt>, der
QMTP unterst&uuml;tzt. Er ist verf&uuml;gbar unter <a
 href="http://www.qmail.org/qmail-1.03-qmtpc.patch">http://www.qmail.org/qmail-1.03-qmtpc.patch</a>.
Er hat au&szlig;erdem einen Tarball, der in <tt>/service</tt> entpackt
werden kann, um einen QMTP-Service zu erm&ouml;glichen. Er ist
verf&uuml;gbar unter <a
 href="http://www.qmail.org/qmtpd-service.tar.gz">http://www.qmail.org/qmtpd-service.tar.gz</a>.</p>
<hr>
<h1><a name="acknowledgments">A. Danksagung</a></h1>
<p>Zuerst, Danke an Dan Bernstein f&uuml;r das Entwerfen und das
Schreiben solch eines m&auml;chtigen und eleganten Systems. Nach
f&uuml;nf Jahren Anwendung beeindruckt <i>qmail</i> mich immer noch.</p>
<p>Ich m&ouml;chte au&szlig;erdem den Mitgliedern der <i>qmail</i>-Mailingliste
danken. Russell Nelson verdient spezielle Erw&auml;hnung als einer der
hilfreichsten, geduldigsten, sachkundigsten und <i>lustigsten</i>
Beitragsschreiber. Sein Beitrag zur <i>qmail</i>-Gemeinde steht gleich
an zweiter Stelle nach DJBs Beitrag.</p>
<p>Danke auch an jeden, der dieses Dokument gepr&uuml;ft oder dazu
beigetragen hat, einschlie&szlig;lich:</p>
<ul>
  <li>Vince Vielhaber</li>
  <li>Chris Green</li>
  <li>Christopher K. Davis</li>
  <li>Scott Schwartz</li>
  <li>Fred Lindberg</li>
  <li>Russell P. Sutherland</li>
  <li>Alex Miller</li>
  <li>Tim Hunter</li>
  <li>Frank D. Cringle</li>
  <li>Mahlon Smith</li>
  <li>Rogerio Brito</li>
  <li>Tony Hansmann</li>
  <li>Matthias Andree</li>
  <li>Tillman Hodgson</li>
  <li>Stefan Witzel</li>
  <li>Scott Gifford</li>
  <li>zu viele, um alle zu erw&auml;hnen ...</li>
</ul>
<p>Speziellen Dank an Henning Brauer f&uuml;r das Stiften der
lifewithqmail.org-Domain <i>und</i> dass er sie hostet!</p>
<p><u>Life with qmail</u> wurde unter der Verwendung des Simple
Document Format (SDF) geschrieben, einer sehr coolen, Perl-basierten
Markup Language, die HTML, einfachen Text, PostScript, POD und viele
andere Formate schreibt. Es machte den Job <i>viel</i> einfacher.
Siehe <a href="http://search.cpan.org/author/IANC/sdf-2.001/">http://search.cpan.org/author/IANC/sdf-2.001/</a>
f&uuml;r mehr Informationen.</p>
<hr>
<h1><a name="related-packages">B. Verwandte Packages</a></h1>
<h2><a name="dot-forward">B.1. <i>dot-forward</i></a></h2>
<p><i>Sendmail</i> verwendet <tt>.forward</tt>-Dateien, ausgesprochen <i>dot
forward</i>, um Benutzern zu erlauben, die Zustellung der Nachrichten,
die sie erhalten, zu kontrollieren. <i>qmail</i> verwendet einen
&auml;hnlichem Mechanismus: <tt>.qmail</tt>-Dateien. Das <i>dot-forward</i>-Package
gibt <i>qmail</i> die M&ouml;glichkeit, <tt>.forward</tt>-Dateien zu
verwenden. Systeme mit <i>Sendmail</i> oder irgendeinem anderen MTA,
die <tt>.forward</tt>-Dateien verwenden, k&ouml;nnten in Erw&auml;gung
ziehen, <i>dot-forward</i> zu verwenden, um zu vermeiden, ihre
vorhandenen <tt>.forward</tt> in ihre <tt>.qmail</tt>-&Auml;quivalente
konvertieren zu m&uuml;ssen--oder einfach um den Wechsel zu <i>qmail</i>
weniger sichtbar f&uuml;r ihre Benutzer zu machen.</p>
<p><i>dot-forward</i> ist ein kleines Package: einfach zu installieren
und zu konfigurieren. Der Quellcode ist verf&uuml;gbar unter <a
 href="ftp://cr.yp.to/software/dot-forward-0.71.tar.gz">ftp://cr.yp.to/software/dot-forward-0.71.tar.gz</a>.</p>
<p><i>dot-forward</i> wurde von Dan Bernstein geschrieben, der f&uuml;r
es eine Webseite unter <a href="http://cr.yp.to/dot-forward.html">http://cr.yp.to/dot-forward.html</a>
betreibt.</p>
<h2><a name="fastforward">B.2. <i>fastforward</i></a></h2>
<p><i>fastforward</i> ist ein anderes <i>Sendmail</i>-Kompatibilit&auml;ts-Add-On.
<i>Sendmail</i> verwendet eine zentrale Alias-Datenbank, die in einer
einzigen Datei vorgehalten wird, normalerweise ist das <tt>/etc/aliases</tt>.
<i>qmail</i> verwendet eine Reihe von <tt>dot-qmail</tt>-Dateien in <tt>/var/qmail/alias</tt>,
eine Datei pro Alias. Wenn sie zu <i>qmail</i> migrieren und sie haben
eine <i>Sendmail</i>-Format-Alias-Datei, die sie nicht konvertieren
wollen, dann gibt <i>fastforward</i> <i>qmail</i> die
M&ouml;glichkeit, die Alias-Datei zu verwenden, so wie sie ist.</p>
<p>Der Quellcode ist verf&uuml;gbar unter <a
 href="ftp://cr.yp.to/software/fastforward-0.51.tar.gz">ftp://cr.yp.to/software/fastforward-0.51.tar.gz</a>.</p>
<p><i>fastforward</i> wurde von Dan Bernstein geschrieben, der f&uuml;r
es eine Webseite unter <a href="http://cr.yp.to/fastforward.html">http://cr.yp.to/fastforward.html</a>
betreibt.</p>
<h2><a name="ucspi-tcp">B.3. <i>ucspi-tcp</i></a></h2>
<p><i>qmail</i>s SMTP-Server l&auml;uft nicht als unabh&auml;ngiger
Daemon. Ein Hilfsprogramm wie <i>inetd</i>, <i>xinetd</i> oder <tt>tcpserver</tt>
l&auml;sst es als Daemon laufen. Wenn es eine TCP-Verbindung an Port 25
empf&auml;ngt, dem SMTP-Port, dann f&uuml;hrt es eine Kopie von <tt>qmail-smtpd</tt>
aus.</p>
<p><i>Inetd</i> ist der Standard-Netzwerkserver "super-server". Es kann
mit Hilfe von <tt>/etc/inetd.conf</tt> konfiguriert werden, <tt>qmail-smtpd</tt>
laufen zu lassen, aber das empfohlene Werkzeug ist <tt>tcpserver</tt>,
das Teil des <i>ucspi-tcp</i>-Packages ist. <i>ucspi-tcp</i> ist ein
Acronym f&uuml;r UNIX Client-Server Program Interface for TCP
(UNIX-Client-Server-Programmschnittstelle f&uuml;r TCP; Anm. d.
&Uuml;bers.) und es wird <i>uukspi ti &szlig;i pi</i> ausgesprochen.</p>
<p><tt>tcpserver</tt> wird <i>inetd</i> vorgezogen, weil:</p>
<ul>
  <li><tt>tcpserver</tt> einem erlaubt, die Anzahl der gleichzeitigen
Verbindungen zu einem Service zu begrenzen. <i>Inetd</i> hat einen
Verbindungsratenbegrenzungsmechanismus, der zeitweise Service
abschaltet, die "zu" betriebsam sind.</li>
  <li><tt>tcpserver</tt> konfiguriert werden kann, den Zugriff auf
bestimmte Hosts zu verbieten oder lokale Hosts zu identifizieren und
sie so zu markieren, dass <tt>qmail-smtpd</tt> sie unterschiedlich
behandeln kann.</li>
  <li><tt>tcpserver</tt> der einzige Server ist, der vom Autoren von <i>qmail</i>
unterst&uuml;tzt wird.</li>
</ul>
<p>Der Quellcode ist verf&uuml;gbar unter <a
 href="ftp://cr.yp.to/ucspi-tcp/ucspi-tcp-0.88.tar.gz">ftp://cr.yp.to/ucspi-tcp/ucspi-tcp-0.88.tar.gz</a>.</p>
<p>Gerrit Pape bietet eine Dokumentation f&uuml;r <i>ucspi-tcp</i> als
<tt>man</tt> Page unter <a href="http://smarden.org/pape/djb/">http://smarden.org/pape/djb/</a>
an.</p>
<p><i>ucspi-tcp</i> wurde von Dan Bernstein geschrieben, der f&uuml;r
es eine Webseite unter <a href="http://cr.yp.to/ucspi-tcp.html">http://cr.yp.to/ucspi-tcp.html</a>
betreibt.</p>
<h2><a name="daemontools">B.4. <i>daemontools</i></a></h2>
<p>Das <i>daemontools</i>-Package enth&auml;lt ein Set von Werkzeugen
f&uuml;r die Kontroll- und &Uuml;berwachungsservices. Es ist nicht
obligatorisch, aber es ist &auml;u&szlig;erst empfehlenswert,
insbesondere f&uuml;r hochbeanspruchte Systeme. Es enth&auml;lt:</p>
<ul>
  <li><tt>supervise</tt>, das einen Service &uuml;berwacht und ihn neu
startet, wenn dieser abstirbt.</li>
  <li><tt>svc</tt>, das mit <tt>supervise</tt> kommuniziert und ihm
erlaubt, den Service zu stoppen, anzuhalten oder neu zu starten.</li>
  <li><tt>multilog</tt>, das einen Log f&uuml;r einen Service
verwaltet, wobei es den Log automatisch rotieren l&auml;sst, um ihn
unter der konfigurierten Gr&ouml;&szlig;e zu halten.</li>
  <li><tt>setuidgid</tt>, das Programme f&uuml;r den Superbenutzer mit
der UID und GID eines normalen Benutzers laufen l&auml;sst.</li>
</ul>
<p>Der Quellcode f&uuml;r <i>daemontools</i> ist verf&uuml;gbar unter:
<a href="http://cr.yp.to/daemontools/daemontools-0.76.tar.gz">http://cr.yp.to/daemontools/daemontools-0.76.tar.gz</a>.</p>
<p>Gerrit Pape bietet eine Dokumentation f&uuml;r <i>daemontools</i>
als <tt>man</tt> Pages unter <a href="http://smarden.org/pape/djb/">http://smarden.org/pape/djb/</a>
an.</p>
<p><i>daemontools</i> wurde von Dan Bernstein geschrieben, der f&uuml;r
es eine Webseite unter <a href="http://cr.yp.to/daemontools.html">http://cr.yp.to/daemontools.html</a>
betreibt.</p>
<h2><a name="qmailanalog">B.5. <i>qmailanalog</i></a></h2>
<p><i>qmailanalog</i> verarbeitet <i>qmail</i>s Logdateien und erzeugt
eine Reihe von Berichten, die einem sagen, wie viel und welche Art von
Arbeit das System tut. Wenn sie Statistiken dar&uuml;ber brauchen, wie
viele Nachrichten versandt oder empfangen uwrden, wie gro&szlig; sie
sind und wie schnell sie verarbeitet wurden, dann ist <i>qmailanalog</i>
das, was sie brauchen.</p>
<p>Als Zugabe kombiniert das <tt>matchup</tt>-Programm <i>qmail</i>s
mehrere Logzeilen pro Zustellung in eine--nicht ganz anders als die
vertrauten <i>Sendmail</i> Logs.</p>
<p>Der Quellcode f&uuml;r <i>qmailanalog</i> ist verf&uuml;gbar unter <a
 href="http://cr.yp.to/software/qmailanalog-0.70.tar.gz">http://cr.yp.to/software/qmailanalog-0.70.tar.gz</a>.</p>
<p><i>qmailanalog</i> wurde von Dan Bernstein geschrieben, der f&uuml;r
es eine Webseite unter <a href="http://cr.yp.to/qmailanalog.html">http://cr.yp.to/qmailanalog.html</a>
betreibt.</p>
<hr width="80%" align="left"><strong>Hinweis: </strong><i>qmailanalog</i>
verl&auml;sst sich auf Logeintrag-Zeitstempel im fraktionalen
Sekundenformat, das von <tt>accustamp</tt> verwendet wird. Um es mit
von <tt>multilog</tt> erzeugten Logs im TAI64N-Format zu verwenden,
werden sie sie in das alte Format &uuml;bertragen m&uuml;ssen. Ein
Programm, dass das tut, ist verf&uuml;gbar unter <a
 href="http://www.qmail.org/tai64nfrac">http://www.qmail.org/tai64nfrac</a>.
<hr width="80%" align="left">
<h2><a name="rblsmtpd">B.6. <i>rblsmtpd</i></a></h2>
<p>Wenn sie noch nie gespammt wurden, dann k&ouml;nnen sie sich <i>sehr</i>
gl&uuml;cklich sch&auml;tzen. Die meisten E-Mail-Benutzer sind nur zu
vertraut mit Unerw&uuml;nschter Massen E-Mail (Unsolicited Bulk E-mail,
UBE), auch bekannt als "Spam". Das meiste davon ist Werbung f&uuml;r
Sexseiten, Kettenbriefe und andere Betr&uuml;gereien. Fr&uuml;her, bis
etwa 1998 oder so, waren die meisten MTAs im Internet <i>offene Relais</i>,
d.h., sie akzeptierten Mails von jedem <i>f&uuml;r</i> jeden, egal ob
weder der Absender oder der Empf&auml;nger lokal waren. Spammer
verwenden offene Relais, wenn sie welche finden k&ouml;nnen, um ihre
Spam zu versenden. Es verbirgt ihre Wege, leitet den R&uuml;ckschlag
zur "unschuldigen" Relaisseite um und spart ihnen eine Menge CPU-Zeit
und Netzwerkbandbreite.</p>
<p>Solche offenen Relais werden heutzutage als <b>sehr</b> schlecht
angesehen und mehrere Anti-Spam Freiwilligengruppen haben eine
Mechanismus erschaffen, um offene Relais und andere &uuml;bliche
Quellen f&uuml;r Spam zu identifizieren, so dass sie verhindern
k&ouml;nnen, dass SMTP-Verbindungen von ihnen akzeptiert werden.</p>
<p><i>rblsmtpd</i> ist ein RBL-SMTP-Daemon. Er sitzt zwischen <tt>tcpserver</tt>
und <tt>qmail-smtpd</tt> und weist Verbindungen von Systemen ab, die
von einer dieser Listen identifiziert wurden.</p>
<p>Um beispielsweise <tt>rblsmtpd</tt> unter <tt>tcpserver</tt>
laufen zu lassen, versuchen sie sowas wie:</p>
<pre>#!/bin/sh<br>QMAILDUID=`id -u qmaild`<br>NOFILESGID=`id -g qmaild`<br>MAXSMTPD=`cat /var/qmail/control/concurrencyincoming`<br>exec /usr/local/bin/softlimit -m 2000000 \<br> /usr/local/bin/tcpserver -v -R -H -l 0 -x /etc/tcp.smtp.cdb -c "$MAXSMTPD" \<br> -u "$QMAILDUID" -g "$NOFILESGID" 0 smtp /usr/local/bin/rblsmtpd\<br> -r relays.ordb.org /var/qmail/bin/qmail-smtpd 2&gt;&amp;1<br></pre>
<p><i>rblsmtpd</i> war vormals als unabh&auml;ngiges Werkzeug
verf&uuml;gbar, kommt aber nun mit <a href="#ucspi-tcp">ucspi-tcp</a>
mit.</p>
<p><i>rblsmtpd</i> wurde von Dan Bernstein geschrieben, der f&uuml;r es
eine Webseite unter <a href="http://cr.yp.to/ucspi-tcp/rblsmtpd.html">http://cr.yp.to/ucspi-tcp/rblsmtpd.html</a>
betreibt.</p>
<h2><a name="serialmail">B.7. <i>serialmail</i></a></h2>
<p><i>qmail</i> wurde f&uuml;r Systeme mit
Vollzeit-Hochgeschwindigkeits-Verbindung entworfen. <i>serialmail</i>
ist ein Satz von Werkzeugen, die <i>qmail</i> besser f&uuml;r
periodische Niedriggeschwindigkeitsverbindungen r&uuml;stet. Mit <i>serialmail</i>
auf so einem System ist <i>qmail</i> konfiguriert, um alle externen
Mails einer einzelnen maildir zuzustellen. Der <i>serialmail</i>-<tt>maildirsmtp</tt>-Befehl
wird verwendet, um die Maildir zum Mail-Rechner des ISPs zu schicken,
wenn die Verbindung aufgebaut wurde. Wenn der ISP QMTP (siehe <a
 href="#qmtp">QMTP</a> unter <a href="#advanced-topics">Fortgeschrittene
Themen</a>) unterst&uuml;tzt, kann auch <tt>maildirqmtp</tt> verwendet
werden.</p>
<p><i>serialmail</i> kann auf der ISP-Seite der Verbindung verwendet
werden, um <i>AutoTURN</i> zu implementieren: Eine SMTP-Verbindung vom
Clienten aus animiert den Server, eine Verbindung zur&uuml;ck zum
Clienten aufzubauen, um Nachrichten zu senden, die auf dem Server
f&uuml;r den Client in eine Warteschlange eingereiht wurden. Das ist
vergleichbar mit der ETRN-SMTP-Funktion.</p>
<p>Der Quelltext f&uuml;r <i>serialmail</i> ist verf&uuml;gbar unter <a
 href="http://cr.yp.to/software/serialmail-0.75.tar.gz">http://cr.yp.to/software/serialmail-0.75.tar.gz</a>.</p>
<p><i>serialmail</i> wurde von Dan Bernstein geschrieben, der f&uuml;r
es eine Webseite unter <a href="http://cr.yp.to/serialmail.html">http://cr.yp.to/serialmail.html</a>
betreibt.</p>
<h2><a name="mess822">B.8. <i>mess822</i></a></h2>
<p><i>mess822</i> ist eine Bibliothek und ein Satz von Anwendungen, um
RFC 822-konforme Mailnachrichten syntaktisch zu analysieren. Die
Anwendungen schlie&szlig;en ein:</p>
<ul>
  <li><tt>ofmipd</tt>: Ein Daemon, der Nachrichten von Clients
akzeptiert und Von-Felder basierend auf einer Datenbank neuschreibt.</li>
  <li><tt>new-inject</tt>: Eine <tt>qmail-inject</tt>-Ersetzung, die
benutzerkontrollierte Hostnamen-Neuschreibung unterst&uuml;tzt.</li>
  <li><tt>iftocc</tt>: Ein <tt>.qmail</tt>-Werkzeug, um zu
&uuml;berpr&uuml;fen, ob eine Nachricht an eine bestimmte Adresse
gesandt wurde.</li>
  <li><tt>822header</tt>, <tt>822field</tt>, <tt>822date</tt> und <tt>822received</tt>:
Informationen aus einer Nachricht extrahieren.</li>
  <li><tt>822print</tt>: versch&ouml;nert eine Nachricht.</li>
</ul>
<p>Der Quellcode f&uuml;r <i>mess822</i> ist verf&uuml;gbar unter <a
 href="http://cr.yp.to/software/mess822-0.58.tar.gz">http://cr.yp.to/software/mess822-0.58.tar.gz</a>.</p>
<p><i>mess822</i> wurde von Dan Bernstein geschrieben, der f&uuml;r es
eine Webseite unter <a href="http://cr.yp.to/mess822.html">http://cr.yp.to/mess822.html</a>
betreibt.</p>
<h2><a name="ezmlm">B.9. <i>ezmlm</i></a></h2>
<p><i>ezmlm</i> ist ein einfach benutzbarer
Hochleistungs-Mailinglisten-Manager (MLM) f&uuml;r qmail. Wenn sie mit <i>LISTSERV</i>
oder <i>Majordomo</i> vertraut sind, dann wissen sie, was eine
Mailingslisten-Manager tut. F&uuml;r mehr Informationen &uuml;ber
Mailinglisten unter <i>qmail</i> siehe <a
 href="#mailing-list-managers">Mailinglisten-Manager</a> unter <a
 href="#advanced-topics">Fortgeschrittene Themen</a>.</p>
<p>Der Quellcode f&uuml;r <i>ezmlm</i> ist verf&uuml;gbar unter <a
 href="http://cr.yp.to/software/ezmlm-0.53.tar.gz">http://cr.yp.to/software/ezmlm-0.53.tar.gz</a>.</p>
<p><i>ezmlm</i> wurde von Dan Bernstein geschrieben, der f&uuml;r es
eine Webseite unter <a href="http://cr.yp.to/ezmlm.html">http://cr.yp.to/ezmlm.html</a>
betreibt.</p>
<p>Fred Lindberg und Fred B. Ringel haben eine Erweiterung f&uuml;r <i>ezmlm</i>
namens <i>ezmlm-idx</i> entwickelt. Sie f&uuml;gt eine Menge
n&uuml;tzlicher Eigenschaften hinzu und wird stark empfohlen. Es sit
verf&uuml;gbar unter <a href="http://www.ezmlm.org/">http://www.ezmlm.org/</a>.</p>
<h2><a name="safecat">B.10. <i>safecat</i></a></h2>
<p><i>safecat</i> schreibt eine Datei verl&auml;sslich in eine
Maildir-Mailbox. Es ist insbesondere n&uuml;tzlich, um Nachrichten mit
Hilfe von <i>procmail</i>-Rezepten abzulegen. Das folgende Rezept legt
beispielsweise alle Nachrichten in <tt>Maildir</tt> ab:</p>
<pre>:0w<br>|safecat Maildir/tmp Maildir/new<br></pre>
<p><i>safecat</i> wurde von Len Budney geschrieben, der f&uuml;r es
eine Webseite unter <a
 href="http://www.pobox.com/%7Elbudney/linux/software/safecat.html">http://www.pobox.com/~lbudney/linux/software/safecat.html</a>
betreibt.</p>
<h2><a name="djbdns">B.11. <i>djbdns</i></a></h2>
<p><i>djbdns</i> ist ein DNS-Server, der von dem Autoren von <i>qmail</i>
geschrieben wurde. Es schlie&szlig;t <tt>tinydns</tt>, einen
DNS-Content-Server und <tt>dnscache</tt>, einen cachenden DNS-Server,
ein.</p>
<p>Die offizielle Webseite f&uuml;r <i>djbdns</i> ist <a
 href="http://cr.yp.to/djbdns.html">http://cr.yp.to/djbdns.html</a>.</p>
<h2><a name="maildrop">B.12. <i>maildrop</i></a></h2>
<p><i>maildrop</i> ist ein Mail-Filter vergleichbar mit <i>procmail</i>.</p>
<p><i>maildrop</i> wurde von Sam Varshavchik geschrieben, der f&uuml;r
es eine Webseite unter <a
 href="http://www.flounder.net/%7Emrsam/maildrop">http://www.flounder.net/~mrsam/maildrop</a>
betreibt.</p>
<h2><a name="syncdir">B.13. <i>syncdir</i></a></h2>
<p><i>syncdir</i> ist eine kleine Bibliothek, die die <tt>link()</tt>-Systemaufrufe
synchronisiert. Das ist notwendig, wenn <i>qmail</i> mit der
Warteschlange auf einem Dateisystem verwendet wird, das <tt>link()</tt>-Aufrufe
nicht synchron ausf&uuml;hrt, wie Linux' ext2fs, Reiserfs, SGIs XFS und
BSD FFS mit Softupdates.</p>
<p><i>syncdir</i> wurde von Bruce Guenter geschrieben und ist
verf&uuml;gbar unter <a href="http://untroubled.org/syncdir/">http://untroubled.org/syncdir/</a>.
Installationsanweisungen sind verf&uuml;gbar unter <a
 href="http://www.ornl.gov/its/archives/mailing-lists/qmail/2001/12/msg00949.html">http://www.ornl.gov/its/archives/mailing-lists/qmail/2001/12/msg00949.html</a>.</p>
<hr>
<h1><a name="how-mail-works">C. Wie Internet-Mail funktioniert</a></h1>
<h2><a name="from-a-to-b">C.1. Wie eine Nachricht von Punkt A nach
Punkt B kommt</a></h2>
<p>Wenn ein Benutzer auf einem Host eine Nachricht an einen Benutzer
auf einem anderen Host schickt, passieren viele Dinge hinter den
Kulissen, die sie nicht erwarten w&uuml;rden.</p>
<p>Sagen wir Alice, <tt>alice@alpha.beispiel.com</tt>, m&ouml;chte
eine Nachricht an Bob, <tt>bob@beta.beispiel.com</tt>, schicken. Hier
ist, was passiert:</p>
<p>1. Alice schreibt die Nachricht mit ihrem Mail-User-Agenten (MUA),
sowas wie <i>mutt</i> oder <i>pine</i>. Sie gibt den Empf&auml;nger
in einem <i>An</i>-Feld an, das Betreff der Nachricht in einem <i>Betreff</i>-Feld
und den Text der Nachricht selbst. Das sieht dann etwa so aus:</p>
<pre> An: bob@beta<br> Betreff: Mittagessen<br><br> Wie w&auml;r's mit 'ner Pizza?<br></pre>
<p>2. Wenn sie mit den Nachricht zufrieden ist, weist sie den MUA an,
sie abzuschicken.</p>
<p>3. Jetzt kann der MUA zus&auml;tzliche Kopffelder wie <i>Datum</i>
und <i>Nachrichten-Id</i> hinzuf&uuml;gen und die Eingaben von Alice
modifizieren (z.B. <tt>bob@beta</tt> durch "<tt>Bob
&lt;bob@beta.beispiel.com</tt>&gt;" ersetzen). Als n&auml;chstes <i>injiziert</i>
der MUA die Nachricht in das Mail-System. Es gibt zwei Wege, um das zu
tun: er kann eine Programm laufen lassen, das vom Mail-System f&uuml;r
das Mail-Injizieren bereitgestellt wird oder er kann eine Verbindung
mit dem Simple Mail Transfer Protocol (SMTP)-Port entweder auf dem
lokalen System oder mit einem externen Mail-Server herstellen. In
diesem Beispiel wollen wir annehmen, dass der MUA eine lokales
Injektionsprogramm verwendet, um Nachrichten an den MTA
weiterzureichen. Die Details des Injektionsprozesses variieren je nach
MTA, aber auf UNIX-Systemen ist die <i>sendmail</i>-Methode der de
facto-Standard. Mit dieser Methode kann der MUA die Kopfzeilen und den
Nachrichtentext, getrennt durch eine Leerzeile, in eine Datei tun und
die Datei an das <tt>sendmail</tt>-Programm weiterreichen.</p>
<p>4. Wenn die Injizierung klappt--die Nachricht war syntaktisch
korrekt und <tt>sendmail</tt> wurde vorschriftsgem&auml;&szlig;
aufgerufen--dann f&auml;llt die Nachricht jetzt in der
Zust&auml;ndigkeit des MTA. Die Detail variieren je nach MTA sehr, aber
generell untersucht der MTA auf alpha die Kopfzeilen, um
herauszufinden, wohin die Nachricht zu senden ist, &ouml;ffnet eine
SMTP-Verbindung mit beta und leitet die Nachricht an den MTA auf dem
beta-System weiter. Der SMTP-Dialog erfordert, die Nachrichten in zwei
Teilen zu senden: den <i>Umschlag</i>, der die Empf&auml;ngeradresse (<tt>bob@beta.beispiel.com</tt>)
und die Antwortadresse (<tt>alice@alpha.beispiel.com</tt>) spezifiziert
und die Nachricht selber, die aus Kopfzeilen und Nachrichtentext
besteht.</p>
<p>5. Wenn der beta-MTA die Nachricht abweist, vielleicht, weil es
keinen Benutzer <i>bob</i> auf dem System gibt, sendet der MTA auf
alpha eine <i>bounce</i>-Nachricht an die Antwortadresse, <tt>alice@alpha</tt>,
um sie auf das Problem hinzuweisen.</p>
<p>6. Wenn der beta-MTA die Nachricht akzeptiert, dann schaut er auf
die Empf&auml;ngeradresse, stellt fest, ob sie lokal auf beta oder auf
einem externen System ist. In diesem Fall ist sie lokal, so dass der
MTA entweder die Nachricht selber zustellt oder an einen <i>mail
delivery agent</i> (MDA) wie <tt>/bin/mail</tt> oder <tt>procmail</tt>
weiterreicht.</p>
<p>7. Wenn die Zustellung fehlschl&auml;gt, vielleicht, weil Bob sein
Mailboxlimit &uuml;berschritten hat, sendet der beta-MTA eine
Bounce-Nachricht an die Anwortadresse vom Umschlag , <tt>alice@alpha</tt>.</p>
<p>8. Wenn die Zustellung erfogreich ist, wartet die Nachricht in Bobs
Mailbox, bis sein MUA sie liest und anzeigt.</p>
<h2><a name="more-information">C.2. Mehr Informationen</a></h2>
<p>F&uuml;r Informationen dar&uuml;ber, wie Internet-Mail funktioniert,
lesen eins oder mehr von den folgenden :</p>
<ul>
  <li>Internet-Mail, vom Autoren von <i>qmail</i>. <a
 href="http://cr.yp.to/im.html">http://cr.yp.to/im.html</a></li>
  <li>SMTP, vom Autoren von <i>qmail</i>. <a
 href="http://cr.yp.to/smtp.html">http://cr.yp.to/smtp.html</a></li>
  <li>Internet-Mailnachrichten-Kopfzeilen-Format, vom Autoren von <i>qmail</i>.
    <a href="http://cr.yp.to/immhf.html">http://cr.yp.to/immhf.html</a></li>
</ul>
<h3><a name="rfcs">C.2.1. Internet RFCs</a></h3>
<p>Die sogenannten "Bitten um Kommentare zum Internet" (Internet
Internet Requests for Comment, RFC) sind die offizielle Dokumentation
des Internets. Die meisten davon gehen weit &uuml;ber den
Kommentarstatus hinaus und definieren Internetprotokolle wie TCP, FTP,
Telnet und die verschiedenen Mailstandards und Protokolle.</p>
<ul>
  <li>RFC 821, Simple Mail Transfer Protocol (veraltet durch RFC 2821) <a
 href="http://www.ietf.org/rfc/rfc0821.txt">http://www.ietf.org/rfc/rfc0821.txt</a>
  </li>
  <li>RFC 822, Standard f&uuml;r das Format von
ARPA-Internet-Textnachrichten (veraltet durch RFC 2822) <a
 href="http://www.ietf.org/rfc/rfc0822.txt">http://www.ietf.org/rfc/rfc0822.txt</a>
  </li>
  <li>RFC 931, Authentifizierungsserver. <a
 href="http://www.ietf.org/rfc/rfc0931.txt">http://www.ietf.org/rfc/rfc0931.txt</a>
  </li>
  <li>RFC 974, Mail-Lotsen und das Domain-System. <a
 href="http://www.ietf.org/rfc/rfc0974.txt">http://www.ietf.org/rfc/rfc0974.txt</a>
  </li>
  <li>RFC 1123, Anforderungen f&uuml;r Internet-Hosts -- Application
and Support. <a href="http://www.ietf.org/rfc/rfc1123.txt">http://www.ietf.org/rfc/rfc1123.txt</a>
  </li>
  <li>RFC 1413, Identifizierungsprotokoll. <a
 href="http://www.ietf.org/rfc/rfc1413.txt">http://www.ietf.org/rfc/rfc1413.txt</a>
  </li>
  <li>RFC 1423, Datenschutzerweiterung fpr Elektronische Mail im
Internet: Teil III: Algorithmen, Modi und Bezeichner. <a
 href="http://www.ietf.org/rfc/rfc1423.txt">http://www.ietf.org/rfc/rfc1423.txt</a>
  </li>
  <li>RFC 1651, SMTP-Service-Erweiterungen. <a
 href="http://www.ietf.org/rfc/rfc1651.txt">http://www.ietf.org/rfc/rfc1651.txt</a>
  </li>
  <li>RFC 1652, SMTP-Service-Erweiterungen f&uuml;r 8bit-MIMEtransport.
    <a href="http://www.ietf.org/rfc/rfc1652.txt">http://www.ietf.org/rfc/rfc1652.txt</a>
  </li>
  <li>RFC 1806, Die Inhaltsdispositionskopfzeile. <a
 href="http://www.ietf.org/rfc/rfc1806.txt">http://www.ietf.org/rfc/rfc1806.txt</a>
  </li>
  <li>RFC 1854, SMTP-Service-Erweiterung f&uuml;r parallele
Befehlsverarbeitung. <a href="http://www.ietf.org/rfc/rfc1854.txt">http://www.ietf.org/rfc/rfc1854.txt</a>
  </li>
  <li>RFC 1891, SMTP-Service-Erweiterung f&uuml;r
Zustellstatusmeldungen. <a href="http://www.ietf.org/rfc/rfc1891.txt">http://www.ietf.org/rfc/rfc1891.txt</a>
  </li>
  <li>RFC 1892, Der Multipart/Report-Inhaltstyp von
Mail-System-Administrationsnachrichten. <a
 href="http://www.ietf.org/rfc/rfc1892.txt">http://www.ietf.org/rfc/rfc1892.txt</a>
  </li>
  <li>RFC 1893, Erweiterte Mail-System-Status-Codes. <a
 href="http://www.ietf.org/rfc/rfc1893.txt">http://www.ietf.org/rfc/rfc1893.txt</a>
  </li>
  <li>RFC 1894, Ein erweiterbares Nachrichtenformat f&uuml;r
Zustellstatusmeldungen. <a href="http://www.ietf.org/rfc/rfc1894.txt">http://www.ietf.org/rfc/rfc1894.txt</a>
  </li>
  <li>RFC 1939, Post Office Protocol - Version 3. <a
 href="http://www.ietf.org/rfc/rfc1939.txt">http://www.ietf.org/rfc/rfc1939.txt</a>
  </li>
  <li>RFC 1985, SMTP-Service-Erweiterung f&uuml;r das Fernstarten von
Nachrichtenwarteschlagen (ETRN). <a
 href="http://www.ietf.org/rfc/rfc1985.txt">http://www.ietf.org/rfc/rfc1985.txt</a>
  </li>
  <li>RFC 1991, PGP-Nachrichtenaustauschformate. <a
 href="http://www.ietf.org/rfc/rfc1991.txt">http://www.ietf.org/rfc/rfc1991.txt</a>
  </li>
  <li>RFC 2015, MIME-Sicherheit mit Pretty Good Privacy. (PGP). <a
 href="http://www.ietf.org/rfc/rfc2015.txt">http://www.ietf.org/rfc/rfc2015.txt</a>
  </li>
  <li>RFC 2045, MIME-Internetnachrichtenteste. <a
 href="http://www.ietf.org/rfc/rfc2045.txt">http://www.ietf.org/rfc/rfc2045.txt</a>
  </li>
  <li>RFC 2046, MIME-Medientypen. <a
 href="http://www.ietf.org/rfc/rfc2046.txt">http://www.ietf.org/rfc/rfc2046.txt</a>
  </li>
  <li>RFC 2047, MIME-Kopfzeilen. <a
 href="http://www.ietf.org/rfc/rfc2047.txt">http://www.ietf.org/rfc/rfc2047.txt</a>
  </li>
  <li>RFC 2048, MIME-Anmeldungsprozeduren. <a
 href="http://www.ietf.org/rfc/rfc2048.txt">http://www.ietf.org/rfc/rfc2048.txt</a>
  </li>
  <li>RFC 2049, MIME-Konformit&auml;tskriterien. <a
 href="http://www.ietf.org/rfc/rfc2049.txt">http://www.ietf.org/rfc/rfc2049.txt</a>
  </li>
  <li>RFC 2142, Mailboxnamen f&uuml;r allgemein &uuml;bliche Services. <a
 href="http://www.ietf.org/rfc/rfc2142.txt">http://www.ietf.org/rfc/rfc2142.txt</a>
  </li>
  <li>RFC 2183, Inhaltsdispositionskopfzeilen. <a
 href="http://www.ietf.org/rfc/rfc2183.txt">http://www.ietf.org/rfc/rfc2183.txt</a>
  </li>
  <li>RFC 2821, Simple Mail Transfer Protocol. <a
 href="http://www.ietf.org/rfc/rfc2821.txt">http://www.ietf.org/rfc/rfc2821.txt</a>
  </li>
  <li>RFC 2822, Internet-Nachrichtenformat <a
 href="http://www.ietf.org/rfc/rfc2822.txt">http://www.ietf.org/rfc/rfc2822.txt</a></li>
</ul>
<p>Eine umfassende Liste von auf Mail bezogenen RFCs ist verf&uuml;gbar
vom Internet-Mail-Konsortium unter <a
 href="http://www.imc.org/mail-standards.html">http://www.imc.org/mail-standards.html</a>.</p>
<hr>
<h1><a name="architecture-apdx">D. Architektur</a></h1>
<h2><a name="modular">D.1. Modulare Systemarchitektur</a></h2>
<p>Internet MTAs f&uuml;hren eine Vielfalt von Aufgaben aus. Fr&uuml;he
Entw&uuml;rfe wie <i>Sendmail</i> und <i>smail</i> sind <i>monolitisch</i>.
Mit anderen Worten, sie haben ein gro&szlig;es, komplexes Programm, das
"die Kost&uuml;me wechselt": es zieht ein Kost&uuml;m an, um ein
SMTP-Server zu sein, ein anderes, um ein SMTP-Client zu sein, ein
anderes, um Mails lokal zu injizieren, ein anderes, um die
Warteschlange zu verwalten, usw.</p>
<p><i>qmail</i> ist <i>modular</i>. Jede dieser Funktionen wird von
einem separaten Programm ausgef&uuml;hrt. Das Ergebnis ist, dass die
Programme kleiner, einfacher und weniger anf&auml;llig sind,
funktionale oder sicherheitsrelevante Softwarefehler zu enthalten. Um
die Sicherheit weiter steigern, laufen <i>qmail</i>s Module mit
verschiedenen Privilegien und sie "vertrauen" einander nicht: sie
nehmen nicht an, dass die anderen Module immer nur das tun, was von
ihnen erwartet wird.</p>
<p>Die Basismodule sind:</p>
<table class="columns" border="1">
  <tbody>
    <tr class="heading">
      <td><strong>Modul</strong></td>
      <td><strong>Funktion</strong></td>
    </tr>
    <tr>
      <td><tt>qmail-smtpd</tt></td>
      <td>akzeptiert/weist Nachrichten mittels SMTP ab</td>
    </tr>
    <tr>
      <td><tt>qmail-inject</tt></td>
      <td>injiziert Nachrichten lokal</td>
    </tr>
    <tr>
      <td><tt>qmail-rspawn</tt>/<tt>qmail-remote</tt></td>
      <td>bearbeitet externe Zustellungen</td>
    </tr>
    <tr>
      <td><tt>qmail-lspawn</tt>/<tt>qmail-local</tt></td>
      <td>bearbeitet lokale Zustellungen</td>
    </tr>
    <tr>
      <td><tt>qmail-send</tt></td>
      <td>bearbeitet die Warteschlange</td>
    </tr>
    <tr>
      <td><tt>qmail-clean</tt></td>
      <td>leert die Warteschlange</td>
    </tr>
  </tbody>
</table>
<p>Es gibt auch eine Kehrseite des modularen Ansatzes. Anders als bei
einem monolitischen MTA sind Interaktionen zwischen Modulen fest
definiert und die Module tauschen nur das Minimum der notwendigen
Informationen untereinander aus. Das ist generell eine gute Sache, aber
manchmal macht es es schwer, bestimme Dinge zu erledigen Der <tt>sendmail</tt>
"-v" Parameter weist <i>Sendmail</i> beispielsweise an, eine
Mitschrift seiner Aktionen f&uuml;r Debug-Zwecke in den Standard-Output
zu schreiben. Weil nur die eine <tt>sendmail</tt>-Bin&auml;rdatei
Injektion, Warteschlange, Alias-Verarbeitung, <tt>.forward</tt>-Datei-Verarbeitung
und externes Weiterleiten mittels SMTP abhandelt, ist es einfach, den
ganzen Zustellprozess zu verfolgen, bis die Nachricht zugestellt ist.
Eine gleichwertige M&ouml;glichkeit existiert bei <i>qmail</i> nicht
und w&uuml;rde substanzielle Quelltext&auml;nderungen und
zus&auml;tzliche Komplexit&auml;t erfordern, um das Weiterreichen des
"debug"-Parameters von Modul zu Modul zu implementieren.</p>
<h2><a name="file-structure">D.2. Dateistruktur</a></h2>
<p><tt>/var/qmail</tt> ist das Wurzelverzeichnis der <i>qmail</i>-Dateistruktur.
Das kann ge&auml;ndert werden, w&auml;hrend <i>qmail</i> kompiliert
wird, aber es ist eine gute Idee, es unver&auml;ndert zu lassen, so
dass andere Administratoren wissen, wo sie bestimmte Dinge finden
k&ouml;nnen. Wenn sie wirklich die gesamte oder einiges aus der <i>qmail</i>-Verzeichnisstruktur
verschieben wollen, ist es besser, das mittels symbolischer Links zu
tun. Siehe den <a href="#create-dirs">Verzeichnisse erstellen</a>-Abschnitt
des Installationsabschnittes f&uuml;r Details.</p>
<p>Die Hauptverzeichnisse sind:</p>
<table class="columns" border="1">
  <tbody>
    <tr class="heading">
      <td><strong>Verzeichnis</strong></td>
      <td><strong>Inhalt</strong></td>
    </tr>
    <tr>
      <td><tt>alias</tt></td>
      <td><tt>.qmail</tt>-Dateien f&uuml;r systemweite Aliase</td>
    </tr>
    <tr>
      <td><tt>bin</tt></td>
      <td>Programmbin&auml;rdateien und Skripte</td>
    </tr>
    <tr>
      <td><tt>boot</tt></td>
      <td>Autostartskripte</td>
    </tr>
    <tr>
      <td><tt>control</tt></td>
      <td>Konfigurationsdateien</td>
    </tr>
    <tr>
      <td><tt>doc</tt></td>
      <td>Dokumentation (ohne Man Pages)</td>
    </tr>
    <tr>
      <td><tt>man</tt></td>
      <td>Man Pages</td>
    </tr>
    <tr>
      <td><tt>queue</tt></td>
      <td>Die Warteschlange noch nicht versendeter Nachrichten</td>
    </tr>
    <tr>
      <td><tt>users</tt></td>
      <td>Die <tt>qmail-users</tt> (qmail-Benutzer; Anm. d.
&Uuml;bers.) -Datenbankdateien</td>
    </tr>
  </tbody>
</table>
<h2><a name="queue-structure">D.3. Warteschlangenstruktur</a></h2>
<p>Die Datei <tt>INTERNALS</tt> im Kompilierverzeichnis bespricht die
Details der Warteschlange gr&uuml;ndlicher. Das ist mehr ein
&Uuml;berblick der Struktur einer Warteschlange.</p>
<table class="columns" border="1">
  <tbody>
    <tr class="heading">
      <td><strong>Unterverzeichnis</strong></td>
      <td><strong>Inhalt</strong></td>
    </tr>
    <tr>
      <td>bounce</td>
      <td>permanente Zustellfehler</td>
    </tr>
    <tr>
      <td>info*</td>
      <td>Absenderadressen</td>
    </tr>
    <tr>
      <td>intd</td>
      <td>Umschl&auml;ge, die gerade von <tt>qmail-queue</tt>
bearbeitet werden</td>
    </tr>
    <tr>
      <td>local*</td>
      <td>lokale Empf&auml;ngeradressen</td>
    </tr>
    <tr>
      <td>lock</td>
      <td>Sperrdateien</td>
    </tr>
    <tr>
      <td>mess*</td>
      <td>Nachrichtendateien</td>
    </tr>
    <tr>
      <td>pid</td>
      <td>von <tt>qmail-queue</tt> verwendet, um eine i-node-Nummer
herauszufinden</td>
    </tr>
    <tr>
      <td>remote*</td>
      <td>externe Empf&auml;ngeradressen</td>
    </tr>
    <tr>
      <td>todo</td>
      <td>fertige Umschl&auml;ge</td>
    </tr>
  </tbody>
</table>
<hr width="80%" align="left"><strong>Hinweis: </strong>Verzeichnisse,
die mir einem "*" gekennzeichnet sind, enthalten eine Reihe von <i>aufgeteilten</i>
Unterverzeichnissen namens "0", "1", ..., bis (<i>conf-split</i>-1),
wobei <i>conf-split</i> eine Einstellung ist, die beim Kompilieren in
der Datei <tt>conf-split</tt> im Kompilierverzeichnis angegeben wird.
Der Standardwert ist 23. Der Zweck des Aufteilens dieser Verzeichnisse
ist, die Anzahl der Dateien in einem einzelnen Verzeichnis auf stark
beanspruchten Servern zu verringern. <i>conf-split</i> muss eine
Primzahl sein.
<hr width="80%" align="left">
<p>Dateien im <tt>mess</tt>-Unterverzeichnis sind nach ihrer
i-node-Nummer benannt. Was das bedeutet ist, dass sie sie nicht von
Hand mit Standard-UNIX-Werkzeugen wie <tt>mv</tt>, <tt>dump</tt>/<tt>restore</tt>
und <tt>tar</tt> bearbeiten k&ouml;nnen. Es gibt ein paar von
Benutzern beigesteuerte Werkzeugen auf <a href="http://www.qmail.org/">http://www.qmail.org/</a>,
die Warteschlangendateien korrekt umbenennen k&ouml;nnen.</p>
<hr width="80%" align="left"><strong>Hinweis: </strong><b>Es ist
gef&auml;hrlich, Warteschlangendateien zu bearbeiten, wenn <i>qmail</i>
l&auml;uft</b>. Wenn sie die Warteschlange bearbeiten wollen, stoppen
sie zuerst <i>qmail</i>, spielen sie <i>vorsichtig</i> mit der
Warteschlange und starten sie dann <i>qmail</i> neu.
<hr width="80%" align="left">
<h2><a name="pictures">D.4. Bilder</a></h2>
<p>Ese gibt eine Reihe von Dateien in <tt>/var/qmail/doc</tt>, deren
Namen mit <tt>PIC</tt> beginnen. Das sind "Bilder" in Textform von
verschiedenen Situationen, die <i>qmail</i> behandelt. Sie zeigen die
Flusskontrolle zwischen den verschiedenen Modulen und sind sehr
hilfreich f&uuml;r das Debuggen und die Erstellung komplexer
Konfigurationen.</p>
<table class="columns" border="1">
  <tbody>
    <tr class="heading">
      <td><strong>Dateiname</strong></td>
      <td><strong>Szenario</strong></td>
    </tr>
    <tr>
      <td>PIC.local2alias</td>
      <td>lokal injizierte Nachricht, die an ein lokales Alias
zugestellt wird</td>
    </tr>
    <tr>
      <td>PIC.local2ext</td>
      <td>lokal injizierte Nachricht, die an eine Erweiterungsadresse
zugestellt wird</td>
    </tr>
    <tr>
      <td>PIC.local2local</td>
      <td>lokal injizierte Nachricht, die an einen lokalen Benutzer
zugestellt wird</td>
    </tr>
    <tr>
      <td>PIC.local2rem</td>
      <td>lokal injizierte Nachricht, die an eine externe Adresse
zugestellt wird</td>
    </tr>
    <tr>
      <td>PIC.local2virt</td>
      <td>lokal injizierte Nachricht, die an eine lokale Adresse auf
einer lokalen virtuellen Domain zugestellt wird</td>
    </tr>
    <tr>
      <td>PIC.nullclient</td>
      <td>eine Nachricht, die in einen Null-Client injiziert wird</td>
    </tr>
    <tr>
      <td>PIC.relaybad</td>
      <td>ein Fehlversuch, den lokalen Host als Relais zu verwenden</td>
    </tr>
    <tr>
      <td>PIC.relaygood</td>
      <td>ein erfolgreicher Versuch, den lokalen Host als Relais zu
verwenden</td>
    </tr>
    <tr>
      <td>PIC.rem2local</td>
      <td>eine Nachricht, die mittels SMTP f&uuml;r einen lokalen
Benutzer empfangen wurde</td>
    </tr>
  </tbody>
</table>
<p>Diese Dateien sind auch online verf&uuml;gbar unter:</p>
<ul>
  <li><a href="http://www.qmail.org/man/index.html">http://www.qmail.org/man/index.html</a></li>
</ul>
<p>Wenn sie <i>echte</i> Bilder von <i>qmail</i> haben wollen, dann
lesen sie Andre Oppermans "Gro&szlig;es qmail-Bild" unter <a
 href="http://www.nrg4u.com/">http://www.nrg4u.com/</a>.</p>
<hr>
<h1><a name="IAQ">E. Selten gestellte Fragen</a></h1>
<p>Das sind Fragen, die nicht als <i>oft</i> gestellt eingeordnet
werden k&ouml;nnen, die aber wichtig und nicht leicht zu beantworten
sind.</p>
<h2><a name="retry-schedule">E.1. In welchen Abst&auml;nden versucht
qmail aufgeschobene Nachrichten zu senden?</a></h2>
<p>Jede Nachricht hat ihren eigenen Wiederholungsplan. Je l&auml;nger
eine Nachricht unzustellbar bleibt, desto seltener versucht <i>qmail</i>
sie zu versenden. Der Wiederholungsplan ist nicht konfigurierbar. Die
folgende Tabelle zeigt den Wiederholungsplan f&uuml;r eine Nachricht,
die einem externen Empf&auml;nger nicht zugestellt werden kann, bis sie
abgewiesen wird. Lokale Nachrichten verwenden einen &auml;hnlichen,
aber geraffteren Plan.</p>
<table class="columns" border="1">
  <tbody>
    <tr class="heading">
      <td align="center"> <strong>Zustellversuch</strong></td>
      <td align="right"> <strong>Sekunden</strong></td>
      <td align="right"> <strong>D-HH:MM:SS</strong></td>
    </tr>
    <tr>
      <td align="center">1</td>
      <td align="right">0</td>
      <td align="right">0-00:00:00</td>
    </tr>
    <tr>
      <td align="center">2</td>
      <td align="right">400</td>
      <td align="right">0-00:06:40</td>
    </tr>
    <tr>
      <td align="center">3</td>
      <td align="right">1600</td>
      <td align="right">0-00:26:40</td>
    </tr>
    <tr>
      <td align="center">4</td>
      <td align="right">3600</td>
      <td align="right">0-01:00:00</td>
    </tr>
    <tr>
      <td align="center">5</td>
      <td align="right">6400</td>
      <td align="right">0-01:46:40</td>
    </tr>
    <tr>
      <td align="center">6</td>
      <td align="right">10000</td>
      <td align="right">0-02:46:40</td>
    </tr>
    <tr>
      <td align="center">7</td>
      <td align="right">14400</td>
      <td align="right">0-04:00:00</td>
    </tr>
    <tr>
      <td align="center">8</td>
      <td align="right">19600</td>
      <td align="right">0-05:26:40</td>
    </tr>
    <tr>
      <td align="center">9</td>
      <td align="right">25600</td>
      <td align="right">0-07:06:40</td>
    </tr>
    <tr>
      <td align="center">10</td>
      <td align="right">32400</td>
      <td align="right">0-09:00:00</td>
    </tr>
    <tr>
      <td align="center">11</td>
      <td align="right">40000</td>
      <td align="right">0-11:06:40</td>
    </tr>
    <tr>
      <td align="center">12</td>
      <td align="right">48400</td>
      <td align="right">0-13:26:40</td>
    </tr>
    <tr>
      <td align="center">13</td>
      <td align="right">57600</td>
      <td align="right">0-16:00:00</td>
    </tr>
    <tr>
      <td align="center">14</td>
      <td align="right">67600</td>
      <td align="right">0-18:46:40</td>
    </tr>
    <tr>
      <td align="center">15</td>
      <td align="right">78400</td>
      <td align="right">0-21:46:40</td>
    </tr>
    <tr>
      <td align="center">16</td>
      <td align="right">90000</td>
      <td align="right">1-01:00:00</td>
    </tr>
    <tr>
      <td align="center">17</td>
      <td align="right">102400</td>
      <td align="right">1-04:26:40</td>
    </tr>
    <tr>
      <td align="center">18</td>
      <td align="right">115600</td>
      <td align="right">1-08:06:40</td>
    </tr>
    <tr>
      <td align="center">19</td>
      <td align="right">129600</td>
      <td align="right">1-12:00:00</td>
    </tr>
    <tr>
      <td align="center">20</td>
      <td align="right">144400</td>
      <td align="right">1-16:06:40</td>
    </tr>
    <tr>
      <td align="center">21</td>
      <td align="right">160000</td>
      <td align="right">1-20:26:40</td>
    </tr>
    <tr>
      <td align="center">22</td>
      <td align="right">176400</td>
      <td align="right">2-01:00:00</td>
    </tr>
    <tr>
      <td align="center">23</td>
      <td align="right">193600</td>
      <td align="right">2-05:46:40</td>
    </tr>
    <tr>
      <td align="center">24</td>
      <td align="right">211600</td>
      <td align="right">2-10:46:40</td>
    </tr>
    <tr>
      <td align="center">25</td>
      <td align="right">230400</td>
      <td align="right">2-16:00:00</td>
    </tr>
    <tr>
      <td align="center">26</td>
      <td align="right">250000</td>
      <td align="right">2-21:26:40</td>
    </tr>
    <tr>
      <td align="center">27</td>
      <td align="right">270400</td>
      <td align="right">3-03:06:40</td>
    </tr>
    <tr>
      <td align="center">28</td>
      <td align="right">291600</td>
      <td align="right">3-09:00:00</td>
    </tr>
    <tr>
      <td align="center">29</td>
      <td align="right">313600</td>
      <td align="right">3-15:06:40</td>
    </tr>
    <tr>
      <td align="center">30</td>
      <td align="right">336400</td>
      <td align="right">3-21:26:40</td>
    </tr>
    <tr>
      <td align="center">31</td>
      <td align="right">360000</td>
      <td align="right">4-04:00:00</td>
    </tr>
    <tr>
      <td align="center">32</td>
      <td align="right">384400</td>
      <td align="right">4-10:46:40</td>
    </tr>
    <tr>
      <td align="center">33</td>
      <td align="right">409600</td>
      <td align="right">4-17:46:40</td>
    </tr>
    <tr>
      <td align="center">34</td>
      <td align="right">435600</td>
      <td align="right">5-01:00:00</td>
    </tr>
    <tr>
      <td align="center">35</td>
      <td align="right">462400</td>
      <td align="right">5-08:26:40</td>
    </tr>
    <tr>
      <td align="center">36</td>
      <td align="right">490000</td>
      <td align="right">5-16:06:40</td>
    </tr>
    <tr>
      <td align="center">37</td>
      <td align="right">518400</td>
      <td align="right">6-00:00:00</td>
    </tr>
    <tr>
      <td align="center">38</td>
      <td align="right">547600</td>
      <td align="right">6-08:06:40</td>
    </tr>
    <tr>
      <td align="center">39</td>
      <td align="right">577600</td>
      <td align="right">6-16:26:40</td>
    </tr>
    <tr>
      <td align="center">40</td>
      <td align="right">608400</td>
      <td align="right">7-01:00:00</td>
    </tr>
  </tbody>
</table>
<h2><a name="dns-problem">E.2. Warum kann ich keine Mail an einen
gro&szlig;en Rechner mit vielen MXs senden?</a></h2>
<p>Wenn sie folgendes erhalten:</p>
<pre>deferral: CNAME_lookup_failed_temporarily._(#4.4.3)/<br></pre>
<p>dann kann das Problem sein, dass <i>qmail</i> keine langen
Namensserver-Suchantworten verarbeiten kann. Die L&ouml;sung ist, <a
 href="#djbdns">djbdns</a> zu installieren. Siehe <a
 href="#dns-patches">Patche</a> unter Fortgeschrittenen Themen.</p>
<p>Es bleibt die Fragen, warum einige Leute <i>kein</i> Problem haben,
solche Server zu erreichen. Grunds&auml;tzlich kann, abh&auml;ngig von
der zeitlichen Abfolge und der Reihenfolge der Suchanfragen, die an
ihren lokalen Namensserver gestellt werden, die Gr&ouml;&szlig;e der
Antwort auf eine <tt>ANY</tt> (IRGENDWER, Anm. d. &Uuml;bers.) -Suche
bei "aol.com" gr&ouml;&szlig;er sein als das 512 Bytelimit eines
UDP-Packetes oder auch nicht.</p>
<p>"Oder auch nicht" wird wahrscheinlich zutreffen, wenn der A und
MX-Eintrag die Zeit &uuml;berschreiten, der NS-Eintrag jedoch nicht.
Weil die .COM-Server ein 2-Tages-TTL setzen, AOL jedoch ein
1-Stunden-TTL, wird das &ouml;fter auf weniger besch&auml;ftigten
Namensservern passieren. Besch&auml;ftigtere Namensserver werden mit
gr&ouml;&szlig;erer Wahrscheinlichkeit solche Eintr&auml;ge zu
irgendeiner Zeit in ihrem Cache haben und damit ein ungepatchtes <i>qmail</i>
frustieren, das versucht, CNAMEn herauszufinden.</p>
<p>Ein besserer Test ist, eine Mail an <tt>gibtesgarnicht@grosser-mx.ckdhr.com</tt>
zu senden; wenn das ihre Warteschlange entleert und Bounce-Nachrichten
von ckdhr.com ausl&ouml;st, dann kann ihr MTA Mails an Hosts mit
MX-Listen versenden, die die 512 Byte &uuml;berschreiten. (Wen sie ein
einzelnes RRset verwenden, mit einem einzelnen TTL, das 512 Bytes
&uuml;berschreitet, dann kann das Problem untersucht werden, ohne auf
das zeitliche Abfolge und die Reihenfolge anderer Suchanfragen
abh&auml;ngig zu sein.)</p>
<h2><a name="queue_extra">E.3. Was ist <tt>QUEUE_EXTRA</tt>?</a></h2>
<p><tt>QUEUE_EXTRA</tt> ist eine Konfigurationsvariable f&uuml;r das
Kompilieren, die einen zus&auml;tzlichen Empf&auml;nger angibt, der
jeder Zustellung zugef&uuml;gt wird. Das wird in erster Linie f&uuml;r
Logs verwendet. Beispielsweise beschreibt die FAQ, wie man <tt>QUEUE_EXTRA</tt>
verwendet, um Kopien aller hereinkommenden und hinausgehenden
Nachrichten aufzubewahren.</p>
<p>Um <tt>QUEUE_EXTRA</tt> zu verwenden, editieren sie <tt>extra.h</tt>,
wobei sie den zus&auml;tzlichen Empf&auml;nger im Format <tt>"T<i>Empf&auml;nger</i>\0"</tt>
angeben und geben sie die L&auml;nge der <tt>QUEUE_EXTRA</tt>-Zeichenkette
in <tt>QUEUE_EXTRALEN</tt> an (das "\0" z&auml;hlt als ein Zeichen).
Zum Beispiel:</p>
<pre> #define QUEUE_EXTRA "Tlog\0"<br> #define QUEUE_EXTRALEN 5<br></pre>
<p>Stoppen sie <i>qmail</i>, wenn es l&auml;uft. Wenn sie das <tt>qmailctl</tt>-Skript
aus dem Installationsabschnitt installiert haben, dann k&ouml;nnen sie
das tun, indem sie folgendes machen:</p>
<pre> qmailctl stop<br></pre>
<p>Wenn sie das <tt>qmailctl</tt>-Skript nicht haben, sollten sie ihr
Start/Stop-Skript verwenden oder <tt>qmail-send</tt> ein <tt>TERM</tt>-Signal
senden.</p>
<p>Dann kompilieren sie <i>qmail</i> neu, indem sie folgendes
verwenden:</p>
<pre> make setup check<br></pre>
<p>Best&uuml;cken sie <tt>~alias/.qmail-log</tt> mit irgend einer
Log-Methode. Z.B. um Message-IDs zu loggen, mit:</p>
<pre> | awk '/^$/ { exit } /^[mM][eE][sS][sS][aA][gG][eE]-/ { print }'<br></pre>
<p>Zuletzt starten sie <i>qmail</i> neu.</p>
<hr>
<h1><a name="error-messages">F. Fehlermeldungen</a></h1>
<p><i>qmail</i>-Fehlermeldungen und was sie bedeuten.</p>
<p>Siehe <a href="#rfcs">RFC 1893</a> f&uuml;r eine Beschreibung der
Fehlerkodes im Klammerteil.</p>
<p><i>Dieser Anhang ist unvollst&auml;ndig.</i></p>
<hr>
<h1><a name="gotchas">G. Gotchas</a></h1>
<p>Diese "gotchas" machen <i>qmail</i>-Neulingen oft Schwierigkeiten.</p>
<h2><a name="root-delivery">G.1. <i>qmail</i> stellt Superusern keine
Mails zu.</a></h2>
<p>Um der M&ouml;glichkeit vorzubeugen, dass <tt>qmail-local</tt>
Befehle als privilegierter Benutzer ausf&uuml;hrt, ignoriert <i>qmail</i>
alle Benutzer, deren UID 0 ist. Das ist in der <tt>qmail-getpw</tt>-Man
Page dokumentiert.</p>
<p>Das bedeutet nicht, dass <i>qmail</i> nicht an <tt>root</tt>
zustellen w&uuml;rde, es bedeutet nur, dass solch eine Zustellung von
einem nicht-privilegierten Benutzer vorgenommen werden muss.
Normalerweise erstellt man ein Alias f&uuml;r root in <tt>~alias/.qmail-root</tt>.</p>
<h2><a name="home-dir-ownership">G.2. <i>qmail</i> stellt nicht an
Benutzer zu, die kein eigenes Home-Verzeichnis haben.</a></h2>
<p>Ein weiters Sicherheitsmerkmal und einfach gute allgemeine Praxis.
Das ist in der <tt>qmail-getpw</tt>-Man-Page dokumentiert.</p>
<h2><a name="uppercase-usernames">G.3. <i>qmail</i> stellt nicht an
Benutzer zu, deren Benutzernamen Gro&szlig;buchstaben enthalten.</a></h2>
<p><i>qmail</i> konvertiert den gesamten "lokalen Teil"--alles links
des "@" in einer Adresse, in Kleinbuchstaben. Die Man-Page verr&auml;t
das nicht, aber der Code tut es. Der Fakt, dass es Benutzer mit
Gro&szlig;buchstaben ignoriert, ist in der <tt>qmail-getpw</tt>-Man-Page
dokumentiert.</p>
<h2><a name="dots-in-extensions">G.4. <i>qmail</i> ersetzt Punkte (.)
in Erweiterungsadressen durch Doppelpunkte (:).</a></h2>
<p>Ein weiteres Sicherheitsmerkmal. Der Zweck ist, Erweiterungsadressen
davor zu bewahren, die Verzeichnisstruktur mittels ".."
hinaufzuwandern. Indem es sie mit Doppelpunkten ersetzt, stellt <i>qmail</i>
sicher, dass alle <tt>.qmail</tt>-Dateien f&uuml;r alle Benutzer im
selben Home-Verzeichnis sind. Dokumentiert in der <tt>dot-qmail</tt>-Man-Page.</p>
<h2><a name="uppercase-in-extensions">G.5. <i>qmail</i> konvertiert
Gro&szlig;buchstaben in Erweiterungsadressen in Kleinbuchstaben.</a></h2>
<p>Das ist ein anderes Resultat des Faktes, dass <i>qmail</i> den
ganzen lokalen Teil der Adresse in Kleinbuchstaben umwandelt.
Dokumentiert in der <tt>dot-qmail</tt>-Man-Page.</p>
<h2><a name="etc-hosts">G.6. <i>qmail</i> verwendet <tt>/etc/hosts</tt>
nicht.</a></h2>
<p><i>qmail</i> verwendet <b>niemals</b> <tt>/etc/hosts</tt>, um die
IP-Adresse, die mit einem Hostnamen verbunden ist, herauszufinden. Wenn
sie Namen in Kontrolldateinen verwenden, muss <i>qmail</i> Zugriff auf
einen Namensserver haben.</p>
<p>Es <i>ist</i> trotzdem m&ouml;glich, <i>qmail</i> auf Systemen
laufen zu lassen, die keinen Zugriff auf Namensserver haben. Hosts in
Kontrolldateien k&ouml;nnen anhand ihrer IP-Adresse spezifiert werden,
indem man sie in eckige Klammern einschlie&szlig;t ([]), z.B:</p>
<pre> [10.1.2.219]<br></pre>
<p>Eigentlich sind die eckigen Klammern nicht <i>immer</i>
notwendig--aber es ist eine gute Idee, sie trotzdem zu verwenden.</p>
<h2><a name="no-smtp-logging">G.7. <i>qmail</i> loggt
SMTP-Aktivit&auml;ten nicht mit.</a></h2>
<p>Wegen eine Reihen von Gr&uuml;nnden loggt <i>qmail</i>
SMTP-Verbindungen, -Verbindungsabweisungen, falsche Befehle oder
richtige Befehle nicht mit. <tt>tcpserver</tt> kann verwendet werden,
um Verbindungen und <tt>recordio</tt> um den gesamten SMTP-Dialig
mitzuloggen. <tt>recordio</tt> ist Teil des <i><a href="#ucspi-tcp">ucspi-tcp</a></i>-Packages.
Die Prozedur ist in der FAQ unter <a
 href="http://cr.yp.to/qmail/faq/servers.html#recordio">http://cr.yp.to/qmail/faq/servers.html#recordio</a>
dokumentiert.</p>
<h2><a name="deferral-notices">G.8. <i>qmail</i> erzeugt keine
Verz&ouml;gerungshinweise.</a></h2>
<p>Wenn <i>Sendmail</i> eine Nachricht nicht innerhalb von ein paar
Stunden zustellen kann, normalerweise vier, dann sendet es eine
Verz&ouml;gerungsmitteilung an den Urheber. Diese Mitteilungen sehen
aus wie Bounce-Nachrichten, aber sie zeigen nicht an, dass die
Zustellung unwiderruflich fehlgeschlagen ist.</p>
<p><i>qmail</i> sendet solche Warnungen nicht. Eine unzustellbare
Nachricht wird nur an den Urheber zur&uuml;ckgesandt, nachdem sie <tt>queuelifetime</tt>
in der Warteschlange zugebracht hat.</p>
<h2><a name="trigger">G.9. <i>qmail</i> ist langsam, wenn <tt>/var/qmail/queue/lock/trigger</tt>
abgeschmiert ist/die falschen Rechte hat/eine regul&auml;re Datei ist.</a></h2>
<p><tt>qmail-queue</tt> und <tt>qmail-send</tt> kommunizieren mittels
eine benannten Pipe namens <tt>/var/qmail/queue/lock/trigger</tt>.
Wenn diese Pipe verstopft ist, beachtet <tt>qmail-send</tt> neue
Nachrichten f&uuml;r etwa eine halbe Stunde nicht.</p>
<p>Der beste Weg sicherzustellen, das sie richtig eingestellt ist, ist
"make check" vom Quellcodeverzeichnis aus zu starten. Wenn das nicht
m&ouml;glich ist, stellen sie sicher, dass sie etwa so aussieht:</p>
<pre># ls -l /var/qmail/queue/lock/trigger<br>prw--w--w- 1 qmails qmail 0 Jul 5 21:25 /var/qmail/queue/lock/trigger<br></pre>
<p>Beachten sie insbesondere das "p" am Anfang der Zeile (es bedeutet,
dass es eine benannte Pipe ist), den Modus (insbesondere dass sie
f&uuml;r jedermann schreibbar ist) und den Benutzer/die Benutzergruppe.</p>
<h2><a name="smtp-slow">G.10. DNS- oder IDENT-Lookups k&ouml;nnen SMTP
langsam machen</a></h2>
<p>Wenn <tt>qmail-smtpd</tt> langsam bei der Beantwortung von
Verbindungsanfragen ist, dann liegt das Problem wahrscheinlich bei
DNS-Reverse-Lookups oder IDENT-Lookups. Wenn sie <tt>qmail-smtpd</tt>
mit <tt>tcpserver</tt> starten, entfernen sie die "-h", "-p" und
"-r"-Optionen und f&uuml;gen sie "-H", "-P", "-R" und "-l <i>Hostname</i>"
hinzu.</p>
<p>Siehe die <tt>tcpserver</tt>-Dokumentation unter <a
 href="http://cr.yp.to/ucspi-tcp/tcpserver.html">http://cr.yp.to/ucspi-tcp/tcpserver.html</a>
f&uuml;r eine Erkl&auml;rung dieser Optionen.</p>
<h2><a name="cr">G.11. Wagenvorlauf/Zeilenvorschub-Zeilen (Carriage
Return/Linefeed , CRLF) funktionieren nicht</a></h2>
<p><tt>qmail-inject</tt> und andere lokale Injektionsmechanismen, wie <tt>sendmail</tt>,
funktionieren nicht richtig, wenn Nachrichten mit
DOS-Wagenvorlauf/Zeilenvorschub (CRLF)-Zeilenumbr&uuml;chen injiziert
werden. Anders als <i>Sendmail</i> verlangt <i>qmail</i>, dass lokal
injizierte Nachrichten Unix-Zeilenumbr&uuml;che (LF) verwenden. Das ist
ein verbreitetes Problem mit PHP-Skripten.</p>
<h2><a name="log-block">G.12. <tt>qmail-send</tt> oder <tt>tcpserver</tt>
h&ouml;ren auf zu arbeiten, wenn das Log gesichert wird</a></h2>
<p>Wenn sie mit einem &uuml;berwachten Log-Service loggen, wie in
Abschnitt 2 beschrieben, und der Log-Service aus irgend einem Grund
fehlschl&auml;gt: Festplatte voll, Rechtschreibfehler im <tt>run</tt>-Skript,
Log-Verzeichnis fehlerhaft konfiguriert, etc., dann wird der
Datenverarbeitungskanal eventuell verstopfen, so dass der Service
blockiert oder sich aufh&auml;ngt. Beseitigen sie das Problem (siehe <a
 href="#troubleshooting">Fehlerbeseitigung</a>) und alles wird in
seinen Normalzustand zur&uuml;ckkehren.</p>
<h2><a name="smtp-rejection">G.13. <tt>qmail-smtpd</tt>
&uuml;berpr&uuml;ft den lokalen Teil einer Adresse nicht.</a></h2>
<p>Wenn <tt>beispiel.com</tt> in <tt>control/rcpthosts</tt>
aufgelistet ist, werden Mails an <tt><i>irgendwas</i>@beispiel.com</tt>
w&auml;hrend der SMTP-Session akzeptiert werden. Wenn <tt><i>irgendwas</i></tt>
weder ein g&uuml;ltiger Benutzer noch ein g&uuml;ltiges Alias ist, wird
<i>qmail</i> eine Bounce-Nachricht an die Absenderadresse senden.</p>
<p>Einige schlichte Relais-Test nehmen an, dass wenn eine Adresse
akzeptiert wird, sie auch zugestellt wird. Das ist falsch. Wenn
irgendwer behauptet, dass ihr System ein offenes Relais ist, verlangen
sie eine Kopie der Nachricht, die durch ihn geschleust
wurde--einschlie&szlig;lich des kompletten Headers, insbesondere der
Empfangen-Felder--und vergleichen sie sie mit ihren Logs.</p>
<h2><a name="firewalls">G.14. Firewalls k&ouml;nnen einen Externzugriff
auf ihren SMTP/POP3/IMAP-Server blockieren.</a></h2>
<p>Wenn sie einen SMTP-, POP3- oder IMAP-Server installiert haben und
sie k&ouml;nnen sich mit ihm vom lokalen Host oder vom lokalen Netzwerk
aus verbinden, nicht jedoch von einem externen Host, dann keine eine
Firewall das Problem sein.</p>
<p>Die erste Stelle, an der man nachsehen sollte, ist der Server
selbst. Red Hat Linux blockiert SMTP beispielsweise in der
Standardkonfiguration mittels <tt>iptables</tt>. Auch andere
Paketfiltermechanismen wie <tt>ipchains</tt> k&ouml;nnen
zust&auml;ndig sein.</p>
<p>Es ist auch m&ouml;glich, dass ihr Internet Service Provider (ISP)
bestimmte Ports blockiert, um Spamming vorzubeugen oder um ihre
Nutzungsbedingungen (Terms of Service, TOS) durchzusetzen. Kontaktieren
sie den technischen Support ihres ISPs, <i>nachdem</i> sie
sichergestellt haben, dass es nicht an Paketfilterung liegt und dass
das Laufenlassen eines Servers nicht gegen ihre TOS verst&ouml;&szlig;t.</p>
<h2><a name="anonymous">G.15. <tt>qmail-inject</tt> setzt das <tt>Von</tt>-Feld
auf <tt>anonymous</tt>, wenn <tt>USER</tt> und <tt>LOGNAME</tt>
nicht gesetzt sind.</a></h2>
<p>Wenn eine Nachricht, die mittels <tt>qmail-inject</tt> gesendet
wird, kein <tt>Von</tt>-Feld enth&auml;lt, dann sucht <tt>qmail-inject</tt>
nach einer Umgebungsvariablen, um herauszufinden, welcher Benutzer die
NAchricht sendet. Die Variablen, die es sucht, sind, in dieser
Reihenfolge: <tt>QMAILUSER</tt>, <tt>MAILUSER</tt>, <tt>USER</tt>
und <tt>LOGNAME</tt>.</p>
<p>Normale Benutzer-Login-Sessions setzen &uuml;blicherweise <tt>USER</tt>
und/oder <tt>LOGNAME</tt>, aber manche Stapeljobs, wie solche, die von
<tt>cron</tt> gestartet werden, haben vielleicht keins von beiden
gesetzt.</p>
<p>Um ihre <tt>cron</tt>-Jobs zu veranlassen, eine g&uuml;ltiges <tt>Von</tt>-Feld
zu setzen, setzten sie eine dieser Umgebungsvariablen, bevor sie
irgendwelche Mailnachrichten abschicken.</p>
<h2><a name="killing-qmail-send">G.16. <tt>qmail-send</tt> stoppt
nicht immer sofort, wenn es gekillt wurde.</a></h2>
<p>Wenn man <tt>qmail-send</tt> ein <tt>KILL</tt>-Signal sendet,
beendet es sich nicht sofort, wenn gerade Zustellungen bearbeitet
werden. <tt>qmail-send</tt> wird auf alle <tt>qmail-local</tt>- und <tt>qmail-remote</tt>-Prozesse
warten, bevor es sich beendet, so dass es die Ergebnisse dieser
Zustellungen aufzeichnen kann. Deswegen k&ouml;nnte "<tt>qmailctl
restart</tt>" oder "<tt>qmailctl stop</tt>" melden, dass <tt>qmail-send</tt>
gestoppt ist, obwohl es noch l&auml;uft. Starten sie immer "<tt>qmailctl
stat</tt>", um sicherzustellen, dass das Stoppen oder Neustarten
tats&auml;chlich abgeschlossen ist.</p>
<hr>
<h1><a name="lwq-faq">H. Oft gestellte Fragen &uuml;ber <u>Life with
qmail</u></a></h1>
<h2><a name="lwq-version">H.1. Welche Version hat <u>Life with qmail</u>?</a></h2>
<p>Dies ist LWQ Version 2004-01-26.</p>
<h2><a name="lwq-copyright">H.2. Wem geh&ouml;rt <u>Life with qmail</u>?</a></h2>
<p><u>Life with qmail</u> steht unter dem Copyright 1999-2004 David E.
Sill</p>
<p><a href="http://Web.InfoAve.Net/%7Edsill/dave/">http://Web.InfoAve.Net/~dsill/dave/</a></p>
<h2><a name="lwq-license">H.3. Welcher Lizenz unterliegt <u>Life with
qmail</u>?</a></h2>
<p><u>Life with qmail</u> unterliegt der OpenContent License, Version
1.0. Siehe <a href="http://www.opencontent.org/opl.shtml">http://www.opencontent.org/opl.shtml</a>
f&uuml;r den kompletten Lizenztext. Grunds&auml;tzlich k&ouml;nnen sie <u>Life
with qmail</u> kopieren, weiterverbreiten und modifizieren,
vorausgesetzt, dass modifizierte Versionen, wenn sie weiterverbreitet
werden, auch der OpenContent License unterliegen.</p>
<h2><a name="lwq-announce-list">H.4. Wie kann ich benachrichtigt
werden, wenn neue Ausgaben von LWQ zur Verf&uuml;gung gestellt werden?</a></h2>
<p>Werden sie Mitglied der <tt>lwq-announce</tt>-Mailingliste, indem
sie eine Nachricht an <a
 href="mailto:lwq-announce-subscribe@sws1.ctd.ornl.gov">lwq-announce-subscribe@sws1.ctd.ornl.gov</a>
senden.</p>
<h2><a name="lwq-list">H.5. Wo k&ouml;nnen LWQ-Mitarbeiter und Fans
miteinander kommunizieren?</a></h2>
<p>Werden sie Mitglied der <tt>lwq</tt>-Mailingliste, indem sie eine
Nachricht an <a href="mailto:lwq-subscribe@sws1.ctd.ornl.gov">lwq-subscribe@sws1.ctd.ornl.gov</a>
senden.</p>
<h2><a name="lwq-translations">H.6. Wurde <u>Life with qmail</u> in
die Sprache <i>XYZ</i> &uuml;bersetzt?</a></h2>
<p>Vielleicht. LWQ wurde in einige Sprachen &uuml;bersetzt. Siehe <a
 href="http://lifewithqmail.org/trans.html">http://lifewithqmail.org/trans.html</a>
f&uuml;r mehr Informationen &uuml;ber LWQ-&Uuml;bersetzungen.</p>
<h2><a name="lwq-formats">H.7. Ist <u>Life with qmail</u> in
PostScript, PDF, reinem Text oder irgendeinem anderen Format neben HTML
verf&uuml;gbar?</a></h2>
<p>Ja, alternative Format finden sie unter <a
 href="http://lifewithqmail.org/">http://lifewithqmail.org/</a>.</p>
<h2><a name="lwq-warranty">H.8. Ich habe <u>Life with qmail</u>
benutzt und habe mein System abst&uuml;rzen lassen/meine Festplatte
gel&ouml;scht/meine Liebesleben ruiniert/meinen Hund get&ouml;tet/etc.</a></h2>
<p>Das tut mir leid. Wirklich. Aber <u>Life with qmail</u> kommt ohne
Gew&auml;hrleistung daher. Siehe die OpenContent License, die oben
erw&auml;hnt wird. Ich wurde nicht bezahlt, um das hier zu schreiben,
ich wollte nur der <i>qmail</i>-Gemeinschaft etwas N&uuml;tzliches
beisteuern.</p>
<p>In Wirklichkeit ist das keine FAQ. Eigentlich hoffe ich, dass es
eine NAQ (Never Asked Question = Niemals Gestellte Fragen; Anm.d.
&Uuml;bers.) ist.</p>
<h2><a name="contributions">H.9. Wie kann ich LWQ unterst&uuml;tzen?</a></h2>
<p>Bitte schicken sie Korrekturen, Vorschl&auml;ge, Beschwerden, etc.
an <a href="mailto:lwq@sill.org">lwq@sill.org</a>.</p>
<p>Wenn sie einen gr&ouml;&szlig;eren Beitrag leisten wollen, wie einen
neuen Abschnitt oder einen neuen Anhang, dann finde ich das
gro&szlig;artig! Bitte schlie&szlig;en sie sich zuerst mit mir kurz, um
sicherzusztellen, dass ich das Thema in LWQ haben will und dass niemand
sonst gerade daran arbeitet.</p>
<p>Wenn sie Geld spenden wollen, dann ist das nat&uuml;rlich immer
willkommen. :-) Kontaktieren sie mich, um das zu arrangieren, oder
verwenden sie das PayPal e-Payment-System. Wenn sie PayPal verwenden,
dann k&ouml;nnen sie mir e-Geld an meine E-Mail-Adresse <tt>paypal@dave.sill.org</tt>
in Betr&auml;gen ab $0.01 "beamen", ohne Kosten f&uuml;r sie oder
mich--auch wenn sie eine Kreditkarte verwenden.</p>
<p>Ein anderer Weg, um LWQ ohne Kosten f&uuml;r sie zu
unterst&uuml;tzen ist, in meinem Buchladen, mit Unterst&uuml;tzung von
Amazon.com, einzukaufen, indem sie diesen Link verwenden: <a
 href="http://www.amazon.com/exec/obidos/redirect-home/davesill">http://www.amazon.com/exec/obidos/redirect-home/davesill</a>.</p>
<p>Danke f&uuml;r ihre Unterst&uuml;tzung!</p>
<h2><a name="changes">H.10. Was hat sich in dieser Version von LWQ
ge&auml;ndert?</a></h2>
<ul>
  <li>Ber&uuml;cksichtigung von netqmail Version 1.05.</li>
  <li>Kleinere Tippfehler beseitigt.</li>
</ul>
<h3><a name="2003-11-10">H.10.1. Was hat sich in Version 2003-11-10 von
LWQ ge&auml;ndert?</a></h3>
<ul>
  <li>Kleinere Tippfehler beseitigt.</li>
</ul>
<h3><a name="2003-10-30">H.10.2. Was hat sich in Version 2003-1-30 von
LWQ ge&auml;ndert?</a></h3>
<ul>
  <li>Installation f&uuml;r <i>netqmail</i>-Distribution hergerichtet.</li>
  <li>Binc IMAP-Eintrag erneuert.</li>
</ul>
<h3><a name="2003-08-16">H.10.3. Was hat sich in Version 2003-08-16 von
LWQ ge&auml;ndert?</a></h3>
<ul>
  <li>Diesen &Auml;nderungs-Log-Abschnitt hinzugef&uuml;gt. Dank an
Jerry Asher, dass er danach fragte.</li>
  <li>Anmerkung &uuml;ber noexec und nosuid dem
Systemvoraussetzungsabschnitt hinzugef&uuml;gt.</li>
  <li>Link zu inst_check und Beispiele im Testabschnitt
hinzugef&uuml;gt.</li>
  <li>Link zu Mate Wierdls errno-Patches dem Patchabschnitt
hinzugef&uuml;gt.</li>
  <li>OS X Hinweis dem Systemvoraussetzungsabschnitt hinzugef&uuml;gt.</li>
  <li>Cyrus-Eintrag dem IMAP-Server-Abschnitt hinzugef&uuml;gt. Dank an
Rick Updegrove.</li>
  <li>Dovecot-Eintrag dem IMAP-Server-Abschnitt hinzugef&uuml;gt.</li>
  <li>Einen Teil des Erweiterungsabschnittes umgeschrieben. Dank an
Adrian Ho.</li>
  <li>Das POP-run-Skripts f&uuml;r einfacheres Kopieren und
Einf&uuml;gen neu formatiert. Dank an Woody Preston.</li>
  <li>Tippfehler im Abschnitt &uuml;ber Chuck Fosters DNS-Patch
beseitigt. Dank an Josh Parreco.</li>
  <li>Einige Tippfehler im QMTP-Abschnitt beseitigt. Dank an Marek
Gutkowski.</li>
</ul>
<hr>
</div>
<div class="footer">
<a href="http://www.opencontent.org/"><img
 src="http://www.opencontent.org/takeone.gif" border="0" alt="Take One!"></a>
<a href="http://validator.w3.org/check/referer"><img border="0"
 src="http://www.w3.org/Icons/valid-html401" alt="Valid HTML 4.01!"
 height="31" width="88"></a></div>
</body>
</html>
