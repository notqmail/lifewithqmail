<!doctype html public "-//W30//DTD W3 HTML 2.0//EN">

<HTML>

<!-- This file was generated using SDF 2.001 by
     Ian Clatworthy (ianc@mincom.com). SDF is freely
     available from http://www.mincom.com/mtr/sdf. -->

<HEAD>
<TITLE>Life with qmail</TITLE>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2">
</HEAD>
<BODY BGCOLOR="ffffff" LINK="ff0000" VLINK="0000ff">

<DIV CLASS="header">
<DIV CLASS="navigate">
</DIV>
</DIV>
<DIV CLASS="title">
<P><IMG SRC="logo-small.gif" ALIGN="Right"></P>
<H1 CLASS="doc-title">Life with qmail</H1>
<H2 ADDRESS CLASS="doc-author">Dave Sill</ADDRESS>
3 wrze¶nia 2002</H2>
<BR CLEAR="All">
</DIV>
Wersja polska: Dariusz Zmok³y <br>
<A HREF="mailto:globi@globi.org">globi@globi.org</A><br> 
v.2.0, 03 grudnia 2002<br><br>
<DIV CLASS="contents">
<HR>
<H2>Spis tre¶ci</H2>
<UL>
<A HREF="#introduction">1. Wprowadzenie</A><UL>
<A HREF="#audience">1.1. Odbiorca</A>
<BR>
<A HREF="#whatitis">1.2. Czym jest <I>qmail</I> ?</A>
<BR>
<A HREF="#whyuseit">1.3. Dlaczego warto u¿ywaæ <I>qmail'a</I> ?</A>
<BR>
<A HREF="#history">1.4. Historia</A>
<BR>
<A HREF="#features">1.5. W³a¶ciwo¶ci</A>
<BR>
<A HREF="#related-packages">1.6. Dodatkowe pakiety</A>
<BR>
<A HREF="#architecture">1.7. Architektura</A>
<BR>
<A HREF="#license">1.8. Licencja</A>
<BR>
<A HREF="#comparison">1.9. Porównanie z innymi MTA</A>
<BR>
<A HREF="#documentation">1.10. Dokumentacja</A>
<BR>
<A HREF="#support">1.11. Gdzie szukaæ pomocy</A></UL>
<BR>
<A HREF="#installation">2. Instalacja</A><UL>
<A HREF="#installation-issues">2.1. Mo¿liwe sposoby instalacji</A>
<BR>
<A HREF="#preparation">2.2. Przygotowanie</A>
<BR>
<A HREF="#system-requirements">2.3. Wymagania systemowe</A>
<BR>
<A HREF="#download">2.4. ¦ciaganie ¼róde³</A>
<BR>
<A HREF="#build">2.5. Kompilowanie ¼ród³a</A>
<BR>
<A HREF="#install-ucspi">2.6. Instalacja ucspi-tcp</A>
<BR>
<A HREF="#install-daemontools">2.7. Instalacja daemontools</A>
<BR>
<A HREF="#start-qmail">2.8. Uruchomienie <I>qmail'a</I></A>
<BR>
<A HREF="#test">2.9. Test poprawno¶ci instalacji</A></UL>
<BR>
<A HREF="#configuration">3. Konfiguracja</A><UL>
<A HREF="#config-files">3.1. Pliki konfiguracyjne</A>
<BR>
<A HREF="#relaying">3.2. Relay'owanie poczty</A>
<BR>
<A HREF="#multiple-hostnames">3.3. Hosty o kilku nazwach</A>
<BR>
<A HREF="#virtual-domains">3.4. Domeny wirtualne</A>
<BR>
<A HREF="#aliases">3.5. Aliasy</A>
<BR>
<A HREF="#qmail-users">3.6. qmail-users</A>
<BR>
<A HREF="#spam">3.7. Walka ze spamem.</A>
<BR>
<A HREF="#viruses">3.8. Wirusy</A></UL>
<BR>
<A HREF="#usage">4. U¿ywanie qmail'a</A><UL>
<A HREF="#dot-qmail-files">4.1. Pliki <TT>.qmail</TT></A>
<BR>
<A HREF="#sending-messages">4.2. Wysy³anie wiadomo¶ci</A>
<BR>
<A HREF="#environment-variables">4.3. Zmienne ¶rodowiskowe</A></UL>
<BR>
<A HREF="#advanced-topics">5. Zaawansowana tematyka</A><UL>
<A HREF="#procmail">5.1. <I>procmail</I></A>
<BR>
<A HREF="#pop-imap-servers">5.2. Serwery POP i IMAP</A>
<BR>
<A HREF="#pop-imap-clients">5.3. Klienci POP i IMAP</A>
<BR>
<A HREF="#multi-rcpt">5.4. Dostarczanie wiadomo¶ci do kilku u¿ytkowników na raz czy dostarczanie tylko jednej na raz.</A>
<BR>
<A HREF="#verp">5.5. VERP</A>
<BR>
<A HREF="#troubleshooting">5.6. Rozwi±zywanie problemów</A>
<BR>
<A HREF="#big-servers">5.7. Du¿e serwery</A>
<BR>
<A HREF="#migrating-to-qmail">5.8. Przej¶cie z <I>Sendmail'a</I> do <I>qmail'a</I></A>
<BR>
<A HREF="#mailing-list-managers">5.9. Menad¿erowie list dyskusysyjnych (MLM)</A>
<BR>
<A HREF="#patches">5.10. Patche</A>
<BR>
<A HREF="#qmtp">5.11. QMTP</A></UL>
<BR>
<A HREF="#acknowledgments">A. Podziêkowania</A>
<BR>
<A HREF="#related-packages">B. Pakiety powi±zane</A><UL>
<A HREF="#dot-forward">B.1. <I>dot-forward</I></A>
<BR>
<A HREF="#fastforward">B.2. <I>fastforward</I></A>
<BR>
<A HREF="#ucspi-tcp">B.3. <I>ucspi-tcp</I></A>
<BR>
<A HREF="#daemontools">B.4. <I>daemontools</I></A>
<BR>
<A HREF="#qmailanalog">B.5. <I>qmailanalog</I></A>
<BR>
<A HREF="#rblsmtpd">B.6. <I>rblsmtpd</I></A>
<BR>
<A HREF="#serialmail">B.7. <I>serialmail</I></A>
<BR>
<A HREF="#mess822">B.8. <I>mess822</I></A>
<BR>
<A HREF="#ezmlm">B.9. <I>ezmlm</I></A>
<BR>
<A HREF="#safecat">B.10. <I>safecat</I></A>
<BR>
<A HREF="#djbdns">B.11. <I>djbdns</I></A>
<BR>
<A HREF="#maildrop">B.12. <I>maildrop</I></A>
<BR>
<A HREF="#syncdir">B.13. <I>syncdir</I></A></UL>
<BR>
<A HREF="#how-mail-works">C. Jak dzia³a poczta w internecie</A><UL>
<A HREF="#from-a-to-b">C.1. W jaki sposób wiadomo¶æ jest przekazywana z punktu A do B</A>
<BR>
<A HREF="#more-information">C.2. Wiêcej informacji</A></UL>
<BR>
<A HREF="#architecture-apdx">D. Architektura</A><UL>
<A HREF="#modular">D.1. Modularna architektura systemu</A>
<BR>
<A HREF="#file-structure">D.2. Struktura plików</A>
<BR>
<A HREF="#queue-structure">D.3. Struktura kolejki</A>
<BR>
<A HREF="#pictures">D.4. Szkice</A></UL>
<BR>
<A HREF="#IAQ">E. Nieczêsto zadawane pytania</A><UL>
<A HREF="#retry-schedule">E.1. Jak czêsto qmail próbuje wys³aæ oczekuj±c± wiadomo¶æ ?</A>
<BR>
<A HREF="#dns-problem">E.2. Dlaczego nie mogê wys³aæ poczty do du¿ej instytucji z wieloma MX ?</A>
<BR>
<A HREF="#queue_extra">E.3. Czym jest <TT>QUEUE_EXTRA</TT>?</A></UL>
<BR>
<A HREF="#error-messages">F. Komunikaty o b³êdach.</A>
<BR>
<A HREF="#gotchas">G. B³êdy pope³niane przez pocz±tkuj±cych</A><UL>
<A HREF="#root-delivery">G.1. <I>qmail</I> nie dostarcza poczty do superu¿ytkownika</A>
<BR>
<A HREF="#home-dir-ownership">G.2. <I>qmail</I> nie dostarcza wiadomo¶ci do u¿ytkowników którzy nie s± w³a¶cicielami swoich katalogów domowych</A>
<BR>
<A HREF="#uppercase-usernames">G.3. <I>qmail</I> nie dostarcza poczty do u¿ytkowników którzy maj± w nazwie wielkie litery</A>
<BR>
<A HREF="#dots-in-extensions">G.4. <I>qmail</I> zastêpuje kropki (.) w adresach rozszerzonych dwukropkami (:).</A>
<BR>
<A HREF="#uppercase-in-extensions">G.5. <I>qmail</I> konwertuje du¿e litery w adresach rozszerzonych do ma³ych liter</A>
<BR>
<A HREF="#etc-hosts">G.6. <I>qmail</I> nie u¿ywa <TT>/etc/hosts</TT>.</A>
<BR>
<A HREF="#no-smtp-logging">G.7. qmail nie loguje aktywno¶ci SMTP</A>
<BR>
<A HREF="#deferral-notices">G.8. <I>qmail</I> nie generuje informacji o opó¼nieniach</A>
<BR>
<A HREF="#trigger">G.9. <I>qmail</I> dzia³a powoli je¶li <TT>/var/qmail/queue/lock/trigger</TT> jest skasowany / ma ¼le ustawione uprawnienia / jest regularnym plikiem.</A>
<BR>
<A HREF="#smtp-slow">G.10. zapytania DNS lub IDENT mog± spowolniaæ SMTP</A>
<BR>
<A HREF="#cr">G.11. Linie zakoñczone (CRLF) nie dzia³aj±</A>
<BR>
<A HREF="#log-block">G.12. <TT>qmail-send</TT> lub <TT>tcpserver</TT> przestaj± pracowaæ gdy nie mog± generowaæ logów</A></UL>
<BR>
<A HREF="#lwq-faq">H. FAQ <U>Life with qmail</U></A><UL>
<A HREF="#lwq-version">H.1. Jaka jest aktualna wersja <U>Life with qmail</U>?</A>
<BR>
<A HREF="#lwq-copyright">H.2. Kto jest wla¶cicielem <U>Life with qmail</U>?</A>
<BR>
<A HREF="#lwq-license">H.3. Na jakiej licencji <U>Life with qmail</U> jest opublikowane ?</A>
<BR>
<A HREF="#lwq-announce-list">H.4. Czy mogê byæ zawiadamiany je¶li uka¿± siê nowe wersje ?</A>
<BR>
<A HREF="#lwq-list">H.5. Czy mo¿na gdzie¶ rozmawiaæ na temat LWQ ?</A>
<BR>
<A HREF="#lwq-translations">H.6. Czy <U>Life with qmail</U> zosta³o przet³umaczone na jaki¶ jêzyk ?</A>
<BR>
<A HREF="#lwq-formats">H.7. Czy <U>Life with qmail</U> jest dostêpne w formacie PostScript, PDF, plain text oraz w innych poza HTML'em ?</A>
<BR>
<A HREF="#lwq-warranty">H.8. U¿ywa³em <U>Life with qmail</U> i zawiesi³o mój komputer / skasowa³o mój dysk twardy / posiwia³em z jego powodu / zabi³o mojego psa / itd.</A>
<BR>
<A HREF="#contributions">H.9. W jaki sposób mogê co¶ wnie¶æ do LWQ ?</A></UL></UL>
</DIV>
<DIV CLASS="main">
<HR>
<H1><A NAME="introduction">1. Wprowadzenie</A></H1>
<H2><A NAME="audience">1.1. Odbiorca</A></H2>
<P><U>Life with qmail</U> jest skierowane do wszystkich zainteresowanych <I>qmail'em</I>, poczynaj±c od kogo¶ kto w³a¶nie zainstalowa³ linuxa na swoim PC, a¿ do do¶wiadczonego administratora systemu czy administratora poczty. Je¶li uwa¿asz, ¿e czego¶ w tym tek¶cie brakuje lub co¶ jest niejasne daj mi znaæ. Proszê s³aæ komentarze na adres <A HREF="mailto:lwq@sill.org">lwq@sill.org</A>.</P>
<P>Jest wiele dostêpnych informacji o <I>qmail'u</I> z ró¿nych ¼róde³. Czê¶æ adresowana jest do pocz±tkuj±cych, czê¶æ zak³ada ¿e odbiorca jest bardziej do¶wiadczony. <U>Life with qmail</U> jest prób± &quot;sklejenia&quot; tych informacji w pojedyñcze ¼ród³o, wype³niaj±ce istniej±c± lukê. Zak³adam, ¿e posiadasz jedynie znajomo¶æ podstawowych umiejêtno¶ci :</P>
<UL><UL>
<LI>manipulowania plikami/katalogami pod UNIX'em
<LI>obs³ugê przegl±darki internetowej i klienta ftp
<LI>przeczytasz uwa¿nie ten tekst</UL></UL>
<H2><A NAME="whatitis">1.2. Czym jest <I>qmail</I> ?</A></H2>
<P>qmail jest programem obs³uguj±cym transfer poczty w internecie (MTA) dla systemów unix'owych. Zastêpuje <I>Sendmail'a</I>, który jest dostarczany wraz z wieloma systemami unix'owymi. <I>qmail</I> u¿ywa prostego protokolu przesy³ania poczty (SMTP) by wymieniaæ wiadomosci z MTA na innych hostach.</P>
<P><HR WIDTH="80%" ALIGN="Left">
<STRONG>Uwaga: </STRONG>nazwa programu to &quot;qmail&quot;, nie &quot;Qmail&quot;.
<HR WIDTH="80%" ALIGN="Left"></P>
<H2><A NAME="whyuseit">1.3. Dlaczego warto u¿ywaæ <I>qmail'a</I> ?</A></H2>
<P>Twój system operacyjny zawiera MTA, prawdopodobnie <I>Sendmail'a</I>, zatem je¶li czytasz ten dokument wygl±da na to, ze szukasz czego¶ lepszego. Oto czê¶æ cech, którymi <I>qmail</I> przewy¿sza inne MTA dostarczane standardowo :</P>
<H3><A NAME="security">1.3.1. Bezpieczeñstwo</A></H3>
<P><I>qmail</I> zosta³ zaprojektowany z my¶l± o bezpieczeñstwie. Historia <I>Sendmail'a</I> pe³na jest powa¿nych problemów zwi±zanych z bezpieczeñstwem. Gdy <I>Sendmail</I> by³ tworzony, sieæ by³a znacznie przyja¼niejszym miejscem. Wszyscy znali siê zatem nie by³o potrzeby projektowania i pisania kodu z my¶l± o bezpieczeñstwie. Dzisiejszy internet nie jest ju¿ tak przyjaznym miejscem dla serwerów. Autor <I>Sendmail'a</I> Eric Allman odwali³ kawa³ dobrej roboty uszczelniaj±c swój program, jednak aby <I>naprawdê</I> polepszyæ go pod tym wzglêdem nale¿a³oby zaprojektowaæ go od nowa.</P>
<H3><A NAME="performance">1.3.2. Prêdko¶æ dzia³ania</A></H3>
<P><I>qmail</I> dostarcza pocztê równolegle. Domy¶lnie potrafi obs³ugiwaæ do 20 dostarczeñ na raz.</P>
<H3><A NAME="reliability">1.3.3. Wiarygodno¶æ</A></H3>
<P><I>qmail</I> akceptuj±c wiadomo¶æ gwarantuje, ¿e nie zostanie ona utracona. Ponadto u¿ywa on nowego formatu skrzynki pocztowej,  który pracuje poprawnie nawet z NFS bez lockowania plików.</P>
<H3><A NAME="simplicity">1.3.4. Prostota</A></H3>
<P><I>qmail</I> jest mniejszy ni¿ inne MTA o porównywalnych cechach.</P>
<P><HR WIDTH="80%" ALIGN="Left">
<STRONG>Uwaga: </STRONG>Oficjalna strona <I>qmail'a</I> <A HREF="http://cr.yp.to/qmail.html">http://cr.yp.to/qmail.html</A> omawia jego cechy znacznie bardziej szczegó³owo.
<HR WIDTH="80%" ALIGN="Left"></P>
<H2><A NAME="history">1.4. Historia</A></H2>
<P><I>qmail</I> zosta³ napisany przez Dan'a Bernstein'a (DJB), <A HREF="http://cr.yp.to/djb.html">http://cr.yp.to/djb.html</A>, wyk³adowcê matematyki na Uniwersytecie Illinois w Chicago. Dr Bernstein znany jest tak¿e ze swojej pracy w dziedzinie kryptografii oraz z pozwu przeciwko rz±dowi Stanów Zjednoczonych w sprawie publikowania kodu ¼ród³owego procedur szyfruj±cych. Zobacz <A HREF="http://www.news.com/News/Item/0,4,36217,00.html?owv">http://www.news.com/News/Item/0,4,36217,00.html?owv</A> lub <A HREF="http://cr.yp.to/export.html">http://cr.yp.to/export.html</A>aby przeczytaæ o tej sprawie.</P>
<P>Pierwszy raz <I>qmail</I> zosta³ udostêpniony publicznie 24 stycznia 1996 roku, by³a to wersja 0.70 beta. Publikacja pierwszej wersji gamma o numerze 0.90 mia³a miejsce 1 sierpnia 1996.</P>
<P>Wersja 1.0, pierwsza uwa¿ana za stabiln± zosta³a ukoñczona 20 lutego 1997. Obecna wersja 1.03 nosi datê 15 czerwca 1998.</P>
<P>Nastêpna ma byæ wersja testowa 2.0. Czê¶æ nowych cech, które mog± siê w niej pojawiæ opisana jest na stronie <A HREF="http://cr.yp.to/qmail/future.html">http://cr.yp.to/qmail/future.html</A>.</P>
<H2><A NAME="features">1.5. W³a¶ciwo¶ci</A></H2>
<P>Na stronie <I>qmail'a</I> <A HREF="http://cr.yp.to/qmail.html">http://cr.yp.to/qmail.html</A> przedstawiono wyczerpuj±c± listê jego w³a¶ciwo¶ci. Poni¿szy akapit zosta³ sporz±dzony przede wszystkim na jej podstawie.</P>
<H3><A NAME="feature-setup">1.5.1. Konfiguracja</A></H3>
<UL>
<LI>Automatyczne wykrywanie wersji unixa - nie ma potrzeby rêcznego dokonywania poprawek w plikach konfiguracyjnych
<LI>Automatyczna konfiguracja na danym ho¶cie
<LI>Szybka instalacja - nie ma d³ugiej listy pytañ</UL>
<H3><A NAME="feature-security">1.5.2. Bezpieczeñstwo</A></H3>
<UL>
<LI>Czytelne rozró¿nianie pomiêdzy adresami, plikami i programami
<LI>Minimalizacja ilo¶ci kodu wykonywanego jako root
<LI>Minimalizacja ilo¶ci kodu setuid
<LI>Pieciokierunkowy podzial zaufania
<LI>Opcjonalne logowanie nag³ówków lub zawarto¶ci ca³ych wiadomo¶ci, itd. (zob. <A HREF="#queue_extra">Co to jest QUEUE_EXTRA? </A> w za³±czniku E.)</UL>
<H3><A NAME="feature-messcon">1.5.3. Konstrukcja wiadomo¶ci</A></H3>
<UL>
<LI>Zgodno¶æ z <A HREF="#rfcs">RFC 822</A> i <A HREF="#rfcs">RFC 1123</A>
<LI>Pe³na obs³uga grup adresów
<LI>Automatyczna konwersja list adresów starego typu do postaci zgodnej z RFC 822
<LI>Polecenie <TT>sendmail'a</TT> w celu zachowania kompatybilno¶ci z programami pocztowymi jak pine, mutt
<LI>D³ugo¶æ nag³ówka jest ograniczona jedynie przez ilo¶æ pamiêci
<LI>Host masquerading (zob. <A HREF="#defaulthost">defaulthost</A>)
<LI>User masquerading (zob. <A HREF="#MAILUSER">MAILUSER</A> i <A HREF="#MAILHOST">MAILHOST</A>)
<LI>Automatyczne tworzenie Mail-Followup-To (zob. <A HREF="#QMAILMFTFILE">QMAILMFTFILE</A>)</UL>
<H3><A NAME="feature-smtpserv">1.5.4. Us³ugi SMTP</A></H3>
<UL>
<LI>Zgodno¶æ z <A HREF="#rfcs">RFC 821, RFC 1123, RFC 1651, RFC 1652 i RFC 1854</A>
<LI>poczta transmitowana jest z wykorzystaniem wszystkich 8 bitów
<LI><A HREF="#rfcs">RFC 931/1413</A>/ident/TAP callback - pomaga ¶ledziæ spammerów oraz osoby podszywaj±ce siê pod innych u¿ytkowników
<LI>Kontrola nad relayowaniem poczty - zapobiega nieupowa¿nionemu przesy³aniu poczty przez osoby z zewn±trz
<LI>Nie ma konfliktów pomiedzy kontrol± relayowania a aliasami
<LI>Automatyczne rozpoznawanie lokalnych adresów IP
<LI>inny timeout dla bufora input oraz output w qmail-smtpd
<LI>Hop counting - sprawdzanie ilo¶ci pól Received w wiadomo¶ci
<LI>Limit liczby wiadomo¶ci przesy³anych równolegle (poprzez <A HREF="#ucspi-tcp">ucspi-tcp</A>)
<LI>Odmowa po³±czenia ze znanymi serwerami spammerami (poprzez <A HREF="#ucspi-tcp">ucspi-tcp</A>)
<LI>Przesy³anie poczty oraz zmienianie pól nag³ówka dla upowa¿nionych klientów
<LI>Opcjonalne wsparcie RBL/ORBS (poprzez <A HREF="#rblsmtpd">rblsmtpd</A>)</UL>
<H3><A NAME="feature-queueman">1.5.5. Obs³uga kolejki wiadomo¶ci oczekuj±cych na wys³anie</A></H3>
<UL>
<LI>Natychmiastowa obs³uga wiadomo¶ci dodanych do kolejki
<LI>Limit wiadomo¶ci przesy³anych równolegle
<LI>Kolejka znajduje sie w kilku katalogach - nie ma spowolnienia gdy urasta ona do du¿ych rozmiarów
<LI>Wiadomo¶ci dostarczane s± na podstawie harmonogramu (zob. <A HREF="#retry-schedule">za³. E</A>), im starsze tym rzadziej
<LI>Ka¿da niedostarczona wiadomo¶æ ma swój w³asny harmonogram prób ponownych dostarczeñ
<LI>Bezpieczna obs³uga kolejki - poczta nie jest tracona w przypadku awarii systemu
<LI>Automatyczne sprawdzenie czy istnieje odbiorca wiadomo¶ci
<LI>Automatyczne czyszczenie kolejki
<LI>Przegl±danie zawarto¶ci kolejki (zob. <TT>qmail-qread</TT>)
<LI>Dok³adne statystyki dostarczeñ poczty (zob. <A HREF="#qmailanalog">qmailanalog</A>)</UL>
<H3><A NAME="feature-bounces">1.5.6. Maile informuj±ce o niedostarczeniu wiadomo¶ci (bounces)</A></H3>
<UL>
<LI>bounces s± zgodne z QSBMF - czytelne zarówno dla cz³owieka jak i dla maszyny
<LI>obs³ug HCMSSC - niezale¿ne od jêzyka kody b³êdów zdefiniowane w <A HREF="#rfcs">RFC 1893</A>
<LI>bounce, który tak¿e nie mo¿e zostaæ dostarczony kierowany jest do postmastera</UL>
<H3><A NAME="feature-routing">1.5.7. Routing na podstawie domen</A></H3>
<UL>
<LI>Dowolna liczba nazw lokalnych hostów (zob. <A HREF="#locals">locals</A>)
<LI>Dowolna liczba wirtualnych domen (zob. <A HREF="#virtualdomains">domeny wirtualne</A>)
<LI>Domain wildcards (zob. <A HREF="#virtualdomains">domeny wirtualne</A>)
<LI>Wsparcie &quot;percent hack&quot; (zob. <A HREF="#percenthack">percenthack</A>)
<LI>UUCP hook</UL>
<H3><A NAME="feature-smtpdeliv">1.5.8. Dostarczanie poczty</A></H3>
<UL>
<LI>Zgodno¶æ z <A HREF="#rfcs">RFC 821, RFC 974, i RFC 1123</A>
<LI>poczta transmitowana jest z wykorzystaniem wszystkich 8 bitów
<LI>Transmisja jest wstrzymywana je¶li host nie odpowiada / nie chce z nami rozmawiaæ
<LI>Rêczna konfiguracja routingu (artifical routing) - smarthost, localnet, mailertable (zob. <A HREF="#smtproutes">smtproutes</A>)
<LI>oddzielny timeout dla bufora input i output w qmail-smtpd
<LI>pasywna kolejka SMTP - wykorzystywana przez SLIP/PPP (poprzez <A HREF="#serialmail">serialmail</A>)
<LI>wparcie AutoTURN (poprzez <A HREF="#serialmail">serialmail</A>)</UL>
<H3><A NAME="feature-forwardlists">1.5.9. Forwarding poczty i grupy dyskusyjne</A></H3>
<UL>
<LI>Kompatybilno¶æ z <TT>.forward</TT> <I>Sendmail'a</I> (poprzez <A HREF="#dot-forward">dot-forward</A>)
<LI>Hashed forwarding databases (poprzez <A HREF="#fastforward">fastforward</A>)
<LI>Kompatybilno¶æ z <TT>/etc/aliases</TT> <I>Sendmail'a</I> (poprzez <A HREF="#fastforward">fastforward)</A>)
<LI>Adresy rozszerzone (poprzez <A HREF="#extension-addresses">.qmail-default</A>)
<LI>W³a¶ciciele grup dyskusyjnych - automatycznie przekierowuje bounces i wiadomo¶ci wakacyjne
<LI>VERP - automatyczna identyfikacja odbiorcy w przypadku bounces wiadomo¶ci z grup dyskusyjnych
<LI>Delivered-To - zapobieganie mo¿liwo¶ci zapêtlenia siê poczty, tak¿e pomiêdzy ró¿nymi hostami</UL>
<H3><A NAME="feature-localdeliv">1.5.10. Dostarczenia lokalne</A></H3>
<UL>
<LI>Hierarchia adresów kontrolowana przez u¿ytkownika -- fred kontroluje adresy postaci fred-cokolwiek
<LI>Wiarygodne dostarczanie pod NFS (zob. <A HREF="#maildir-delivery">maildir</A>)
<LI>U¿ytkownik decyduje który program dostarcza pocztê: procmail itp. (zob. <A HREF="#program-delivery">qmail-command</A>)
<LI>Opcjonalna informacja o nadej¶ciu nowej poczty (zob. qbiff)
<LI>Mo¿liwo¶æ wysy³ania listu do nadawcy informuj±cego go o poprawnym dostarczeniu jego wiadomo¶ci (zob. qreceipt)
<LI>Warunkowe filtrowanie (zob. condredirect and bouncesaying)</UL>
<H3><A NAME="feature-pop3">1.5.11. Us³uga POP3</A></H3>
<UL>
<LI>Zgodno¶æ z <A HREF="#rfcs">RFC 1939</A>
<LI>Obs³uga UIDL
<LI>Obs³uga TOP
<LI>APOP hook
<LI>Modularne sprawdzanie hase³ (poprzez <A HREF="http://www.qmail.org/top.html#checkpassword">checkpassword</A>)</UL>
<H2><A NAME="related-packages">1.6. Dodatkowe pakiety</A></H2>
<P><I>qmail</I> zosta³ napisany zgodnie z filozofi± UNIX'a wg. której ka¿de narzêdzie powinno wykonywaæ jedno, dobrze zdefiniowane dzia³anie, natomiast z³o¿one funkcje powinny byæ wykonywane poprzez ³±czenie pojedyñczych dzia³añ w &quot;potok&quot;. Alternatywnym podej¶ciem jest budowanie coraz bardziej z³o¿onych programów, które ³±cz± w sobie funkcjonalno¶æ prostszych narzêdzi.</P>
<P>Nie jest zaskoczeniem, ¿e <I>qmail</I> nie robi wszystkiego tego, co kto¶ móg³by chcieæ ¿eby robi³. Poni¿ej wymienionych jest kilka najbardziej popularnych dodatkowych pakietów  do <I>qmail'a</I>. Oczywi¶cie wiele standardowych narzêdzi UNIX'a mo¿e byæ tak¿e wykorzystanych wraz z <I>qmail'em</I>.</P>
<UL>
<LI><A HREF="#dot-forward">dot-forward</A>--dodatek umo¿liwiaj±cy kompatybilno¶æ z <I>Sendmail'owym</I> <TT>.forward</TT>
<LI><A HREF="#fastforward">fastforward</A>--umo¿liwia kompatybilno¶æ z <I>Sendmail'ow±</I> baz± danych aliasów
<LI><A HREF="#ucspi-tcp">ucspi-tcp</A>--zastêpuje inetd
<LI><A HREF="#daemontools">daemontools</A>--zbiór narzêdzi obs³uguj±cych demony i logowanie
<LI><A HREF="#qmailanalog">qmailanalog</A>--narzêdzia do analizy logów qmail'a
<LI><A HREF="#serialmail">serialmail</A>--narzêdzia do obs³ugi poczty poprzez wolne ³±cza
<LI><A HREF="#mess822">mess822</A>--narzêdzia do analizy Internetowych wiadomo¶ci pocztowych
<LI><A HREF="#ezmlm">ezmlm</A>--program zajmj±cy siê obs³ug± list pocztowych pod qmail'em</UL>
<H2><A NAME="architecture">1.7. Architektura</A></H2>
<P>Funkcjonalna i fizyczna struktura <I>qmail'a</I> opisane s± w <A HREF="#architecture-apdx">za³±czniku D</A>. W skrócie <I>qmail</I> sk³ada siê z wielu programów (modu³ów) wykonuj±cych ró¿ne zadania.</P>
<H2><A NAME="license">1.8. Licencja</A></H2>
<P>Prawa autorskie <I>qmail'a</I> nale¿± do jego autora Dan'a Bernstein'a jednak wersja ¼ród³owa nie zawiera dokumentu okre¶laj±cego prawa u¿ytkowników. Na stronie <A HREF="http://cr.yp.to/softwarelaw.html">http://cr.yp.to/softwarelaw.html</A> opisuje on jakie prawa nale¿± do u¿ytkownika qmail'a zgodnie z amerykañskim prawem autorskim. Na stronie <A HREF="http://cr.yp.to/qmail/dist.html">http://cr.yp.to/qmail/dist.html</A> zgadza siê on na rozpowszechnianie kodu ¼ród³owego <I>qmail'a</I>. Rozpowszechnianie binariów jest dozwolone pod warunkami opisanymi na <A HREF="http://cr.yp.to/qmail/var-qmail.html">http://cr.yp.to/qmail/var-qmail.html</A>.
<P>Opisuj±c te prawa w kilku s³owach, <B>mo¿esz</B> u¿ywaæ <I>qmail'a</I> dla jakiegokolwiek celu, mo¿esz redystrybutowaæ <I>niezmodyfikowany</I> kod ¼ród³owy <I>qmail'a</I> oraz binaria qmail'a <I>skompilowane do katalogu /var-qmail</I>. <B>Nie mo¿na</B> rozpowszechniaæ zmodyfikowanych ¼róde³ <I>qmail'a</I> oraz binariów skompilowanych do <I>innych ni¿ /var-qmail</I> katalogów.</P>
<H2><A NAME="comparison">1.9. Porównanie z innymi MTA</A></H2>
<P>W³a¶ciwie na powy¿szy temat mo¿na by napisaæ ksi±¿kê, ale nie by³aby zbyt ciekawa. Oto krótkie porównanie qmail'a z kilkoma najbardziej popularnymi MTA pracuj±cymi pod UNIX'em.</P>
<TABLE CLASS="columns" BORDER>
<TR CLASS="heading">
<TD>
<STRONG>MTA</STRONG>
</TD>
<TD>
<STRONG>Dojrza³o¶æ</STRONG>
</TD>
<TD>
<STRONG>Bezpieczeñstwo</STRONG>
</TD>
<TD>
<STRONG>Mo¿liwo¶ci</STRONG>
</TD>
<TD>
<STRONG>Szybko¶æ</STRONG>
</TD>
<TD>
<STRONG>Zgodno¶æ z sendmail'em</STRONG>
</TD>
<TD>
<STRONG>Modularno¶æ</STRONG>
</TD>
</TR>
<TR>
<TD>
<I>qmail</I>
</TD>
<TD>
¶rednia
</TD>
<TD>
wysokie
</TD>
<TD>
wysokie
</TD>
<TD>
wysoka
</TD>
<TD>
dodatki
</TD>
<TD>
tak
</TD>
</TR>
<TR>
<TD>
<I>Sendmail</I>
</TD>
<TD>
wysoka
</TD>
<TD>
niskie
</TD>
<TD>
wysokie
</TD>
<TD>
niska
</TD>
<TD>
x
</TD>
<TD>
nie
</TD>
</TR>
<TR>
<TD>
<I>Postfix</I>
</TD>
<TD>
¶rednia
</TD>
<TD>
wysokie
</TD>
<TD>
¶rednie
</TD>
<TD>
wysoka
</TD>
<TD>
tak
</TD>
<TD>
tak
</TD>
</TR>
<TR>
<TD>
<I>exim</I>
</TD>
<TD>
¶rednia
</TD>
<TD>
niskie
</TD>
<TD>
wysokie
</TD>
<TD>
¶rednia
</TD>
<TD>
tak
</TD>
<TD>
nie
</TD>
</TR>
<TR>
<TD>
<I>courier</I>
</TD>
<TD>
niska
</TD>
<TD>
¶rednie
</TD>
<TD>
wysokie
</TD>
<TD>
¶rednia
</TD>
<TD>
opcjonalnie
</TD>
<TD>
tak
</TD>
</TR>
</TABLE>

<P><I>Zgodno¶æ z Sendmail'em</I> oznacza, ¿e dany MTA zachowuje siê pod pewnymi wzglêdami jak <I>Sendmail</I> co powoduje, ¿e przej¶cie z <I>Sendmail'a</I> do tego programu pocztowego bêdzie niewidoczne dla u¿ytkownika. Przyk³adowo chodzi o mo¿liwo¶æ u¿ywania plików <TT>.forward</TT>, <TT>/etc/aliases</TT> i dostarczanie poczty do <TT>/var/spool/mail</TT>.</P>
<P>Cameron Laird stworzy³ stronê na której porównuje te i inne cechy darmowych i komercyjnych MTA <A HREF="http://phaseit.net/claird/comp.mail.misc/MTA_comparison.html">http://phaseit.net/claird/comp.mail.misc/MTA_comparison.html</A>. Inne szczegó³owe zestawienie jest pod adresem <A HREF="http://www.geocities.com/mailsoftware42/">http://www.geocities.com/mailsoftware42/</A>
</P>
<H2><A NAME="documentation">1.10. Dokumentacja</A></H2>
<H3><A NAME="man-pages">1.10.1. strony manuali</A></H3>
<P><I>qmail</I> ma pe³en komplet stron manuali. Po zainstalowaniu znajduj± siê one w <TT>/var/qmail/man</TT>. Prawdopodobnie bêdziesz potrzebowa³ dodaæ t± ¶cie¿lê do zmiennej ¶rodowiskowej <TT>MANPATH</TT>.</P>
<TABLE CLASS="columns" BORDER>
<TR CLASS="heading">
<TD>
<STRONG>Pow³oka</STRONG>
</TD>
<TD>
<STRONG>Polecenie</STRONG>
</TD>
</TR>
<TR>
<TD>
Bourne (/bin/sh)
</TD>
<TD>
<TT>MANPATH=$MANPATH:/var/qmail/man; export MANPATH</TT>
</TD>
</TR>
<TR>
<TD>
bash, Korn
</TD>
<TD>
<TT>export MANPATH=$MANPATH:/var/qmail/man</TT>
</TD>
</TR>
<TR>
<TD>
C Shell
</TD>
<TD>
<TT>setenv MANPATH $MANPATH:/var/qmail/man</TT>
</TD>
</TR>
</TABLE>

<P>Od tego momentu polecenia w stylu &quot;<TT>man <I>name-of-qmail-man-page</I></TT>&quot; powinny wy¶wietlaæ odpowiedni± stronê manual'a.</P>
<P>Strony te s± tak¿e dostêpne w formacie HTML :</P>
<UL>
<LI><A HREF="http://www.qmail.org/man/index.html">http://www.qmail.org/man/index.html</A></UL>
<P><HR WIDTH="80%" ALIGN="Left">
<STRONG>Uwaga: </STRONG>manual'e <I>qmail'a</I> zawieraj± wiele informacji, jednak zosta³y napisane w bardzo zwiêz³y i techniczny sposób, zatem wymagaj± uwa¿nego czytania. Mo¿e okazaæ siê korzystne by¶ wydrukowa³ je i przeczyta³ w celu zapoznania siê z tym co jest w nich i gdzie to jest. Niewielka ilo¶æ informacji jest powtórzona na kilku ró¿nych stronach, zatem je¶li nie wiesz gdzie co¶ siê znajduje mo¿esz mieæ k³opoty ze znalezieniem tego czego¶.
<HR WIDTH="80%" ALIGN="Left"></P>
<H3><A NAME="docs">1.10.2. Dokumentacja</A></H3>
<P><I>qmail</I> zawiera szereg dokumentów znajduj±cych sie w <TT>/var/qmail/doc</TT>. W ich sk³ad wchodz± :</P>
<UL>
<LI><TT>FAQ</TT>: Najczê¶ciej Zadawane Pytania, i odpowiedzi
<LI><TT>INSTALL*</TT>: dokumentacja procesu instalacji
<LI><TT>PIC.*</TT>: Opis w jaki sposób qmail wykonuje pewne zadania. Zajrzyj do dodatku <A HREF="#pictures">Architektura</A> w celu uzyskania wiêkszej ilo¶ci informacji
<LI>ró¿ne inne dokumenty zwi±zane z instalacj±</UL>
<P>Te dokumentu s± tak¿e dostêpne on-line:</P>
<UL>
<LI><A HREF="http://www.qmail.org/man/index.html">http://www.qmail.org/man/index.html</A></UL>
<H3><A NAME="faqs">1.10.3. Dokumenty FAQ</A></H3>
<P>Oto dwa oficjalne FAQ (Najczê¶ciej Zadawane Pytania, i odpowiedzi):</P>
<UL>
<LI><TT>/var/qmail/doc/FAQ</TT>, wersja tekstowa
<LI>FAQ jako strona html, <A HREF="http://cr.yp.to/qmail/faq.html">http://cr.yp.to/qmail/faq.html</A>.</UL>
<P>Dokumentacja w postaci strony jest bardziej kompletna.</P>
<H3><A NAME="book">1.10.4. Ksi±¿ki</A></H3>
<H4><A NAME="qmail-handbook">1.10.4.1. <U>The qmail Handbook</U></A></H4>
<P>Dave Sill, autor <U>Life with qmail</U>, napisa³ ksi±¿kê o <I>qmail'u</I> dla wydawnictwa Apress (<A HREF="http://www.apress.com/">http://www.apress.com/</A>). Ksi±¿ka ta, <U>The qmail Handbook</U>, przedstawia znacznie szczegó³owiej to co znajduje siê w LWQ, a poza tym zawiera wiele dodatkowych informacji.</P>
<P>Dodatkowe informacje <A HREF="http://www.apress.com/catalog/book/1893115402/">http://www.apress.com/catalog/book/1893115402/</A>. Zakupu dokonaæ mo¿na na <A HREF="http://www.amazon.com/exec/obidos/ASIN/1893115402/davesill">http://www.amazon.com/exec/obidos/ASIN/1893115402/davesill</A>.</P>
<H4><A NAME="oreilly-book">1.10.4.2. <U>qmail</U></A></H4>
<P>John Levine podobno pisze ksi±¿kê pod tytu³em <I>qmail</I> dla O'Reilly &amp; Associates (<A HREF="http://www.oreilly.com">http://www.oreilly.com</A>).
<P>W celu uzyskania wiêkszej liczby informacji albo zamówienia jej gdy stanie siê dostêpna zajrzyj na <A HREF="http://www.amazon.com/exec/obidos/ASIN/1565926285/davesill">http://www.amazon.com/exec/obidos/ASIN/1565926285/davesill</A></P>
<H4><A NAME="sams-book">1.10.4.3. <U>Running qmail</U></A></H4>
<P>Richard Blum napisa³ <U>Running qmail</U>, opublikowan± przez Sams. Otrzyma³a ona niejednoznaczne recenzje na li¶cie dyskusyjnej o <I>qmail'u</I>.</P>
<P>Wiêcej informacji uzyskasz na stronie <A HREF="http://www.amazon.com/exec/obidos/ASIN/0672319454/davesill">http://www.amazon.com/exec/obidos/ASIN/0672319454/davesill</A>.</P>
<H3><A NAME="list-archives">1.10.5. Archiwa grupy dyskusyjnej</A></H3>
<P>Grupa dyskusyjna po¶wiêcona <I>qmail'owi</I>, utrzymywana przez Dan'a Bernstein'a, jest cennym ¼ród³em informacji. Jej archiwum znajduje sie pod adresem:</P>
<UL>
<LI><A HREF="http://www.ornl.gov/its/archives/mailing-lists/qmail/">http://www.ornl.gov/its/archives/mailing-lists/qmail/</A>.</UL>
<P>Archiwa mo¿na przeszukiwac ze strony:</P>
<UL>
<LI><A HREF="http://www-archive.ornl.gov:8000/">http://www-archive.ornl.gov:8000/</A>.</UL>
<P>Inne archiwa dostêpne w sieci to :</P>
<UL>
<LI><A HREF="http://www.egroups.com/list/djb-qmail/?refstop=1">http://www.egroups.com/list/djb-qmail/?refstop=1</A> oraz 
<LI><A HREF="http://msgs.securepoint.com/qmail/">http://msgs.securepoint.com/qmail/</A>.</UL>
<P>Odpowied¼ na wiêkszo¶æ pytañ dotycz±cych <I>qmail'a</I> mo¿esz znale¼æ przeszukuj±c archiwa.</P>
<H3><A NAME="other-web-sites">1.10.6. Inne miejsca w sieci</A></H3>
<UL>
<LI><A HREF="http://cr.yp.to/qmail.html">http://cr.yp.to/qmail.html</A>: oficjalna strona <I>qmail'a</I>.
<LI><A HREF="http://www.qmail.org">http://www.qmail.org</A>: nieoficjalna strona <I>qmail'a</I>. Zawiera wiele informacji o dodatkach i patchach, a tak¿e linki do wielu innych dobrych stron o qmail'u. 
<LI><A HREF="http://www.flounder.net/qmail/qmail-howto.html">http://www.flounder.net/qmail/qmail-howto.html</A>: HOWTO napisane przez Adam'a McKenne'a</UL>
<H2><A NAME="support">1.11. Gdzie szukaæ pomocy</A></H2>
<H3><A NAME="mailing-lists">1.11.1. Listy dyskusyjne</A></H3>
<P>Wymienione poni¿ej listy znajduj± siê na serwerze list.cr.yp.to. W celu utrudnienia zdobycia ich adresów przez spammerów nie podajê ich kompletnych, prawid³owych adresów ani URL'a &quot;mailto&quot;.</P>
<P>Listy te pracuj± pod ezmlm'em, który u¿ywa oddzielnych adresów w celu wykonania poszczególnych funkcji:</P>
<UL>
<LI><TT><I>listname</I>@list.cr.yp.to</TT>: adres listy. Wiadomo¶ci przysy³ane tutaj s± rozsy³ane do wszystkich jej cz³onków. Proszê <B>nie</B> przysy³aæ pró¶b o zapisanie sie, czy o wypisanie siê na ten adres. Nie zadzia³aj±, a mog± zdenerwowaæ uczestników.
<LI><TT><I>listname</I>-help@list.cr.yp.to</TT>: adres pod którym mo¿na uzyskaæ pomoc. Po wys³aniu maila na ten adres otrzymasz spis poleceñ i ogóln± informacjê jak ich u¿ywaæ.
<LI><TT><I>listname</I>-subscribe</TT>: wy¶lij pusty mail tutaj w celu zapisania siê na listê.
<LI><TT><I>listname</I>-unsubscribe</TT>: wy¶lij pusty mail tutaj w cely wypisania siê z listy.</UL>
<P>W celu podania innego adresu na który ma przychodziæ korespondencja z listy dyskusyjnej, przyk³adowo na <TT>joe@example.com</TT>, wy¶lij list postaci:</P>
<UL>
<LI><TT><I>listname</I>-subscribe-joe=example.com@list.cr.yp.to</TT>.</UL>
<H4><A NAME="qmail-list">1.11.1.1. <U>qmail</U></A></H4>
<P>G³ówna lista po¶wiêcona <I>qmail'owi</I>. Tutaj prowadzone s± dyskusje i zadawane pytania na wszystkie tematy dotycz±ce <I>qmail'a</I> za wyj±tkiem tych którym po¶wiêcone s± inne listy. Przeczytaj "12 Steps to qmail List Bliss" Charles'a Cazabon'sa <A HREF="http://www.qcc.sk.ca/~charlesc/writings/12-steps-to-qmail-list-bliss.html">http://www.qcc.sk.ca/~charlesc/writings/12-steps-to-qmail-list-bliss.html</A> przed zadaniem pytania. Przeczytaj tak¿e FAQ i przeszukaj <A HREF="#list-archives">archiwa listy</A>. Gdy zadajesz pytanie proszê spróbuj podaæ wystarczaj±c± ilo¶æ szczegó³ów w celu umo¿liwienia uczestnikom udzielenia odpowiedzi:</P>
<UL>
<LI><B><I>Co zrobi³e¶?</I></B> Jaka jest twoja konfiguracja? Za³±cz wynik polecenia <TT>qmail-showctl</TT> je¶li nie jeste¶ pewien co jest istotne. Jakie zadanie próbowa³e¶ wykonaæ? Je¶li to ¶wie¿a instalacja qmail'a opisz jak go instalowa³e¶.
<LI><B><I>Jakiego wyniku oczekiwa³e¶?</I></B> Co siê mia³o wydarzyæ? Nie oczekuj, ¿e ka¿dy domy¶li siê.
<LI><B><I>Co <U>siê</U> wydarzy³o?</I></B> Opisz rezultat. Za³±cz fragmenty logów i kopie wiadomo¶ci wraz z nag³ówkami.</UL>
<H4><A NAME="qmailannounce-list">1.11.1.2. <U>qmailannounce</U></A></H4>
<P>Lista z og³oszeniami dotycz±cymi <I>qmail'a</I>. Tutaj uzyskasz informacjê o nowych wersjach tego programu. Nie wysy³a siê na ni± wiadomo¶ci. Jest to lista tylko do czytania.</P>
<H4><A NAME="serialmail-list">1.11.1.3. <U>serialmail</U></A></H4>
<P>Dyskusje dotycz±ce pakietu <I>serialmail</I>.</P>
<H4><A NAME="ezmlm-list">1.11.1.4. <U>ezmlm</U></A></H4>
<P>Dyskusje dotycz±ce pakietu <I>ezmlm</I>.</P>
<H3><A NAME="consultants">1.11.2. Konsultanci</A></H3>
<P>Zobacz <A HREF="http://www.qmail.org/top.html#paidsup">http://www.qmail.org/top.html#paidsup</A> w celu zdobycia informacji gdzie mo¿na uzyskaæ pomoc na zasadach komercyjnych.</P>
<H3><A NAME="faqts">1.11.3. Baza wiedzy FAQTS</A></H3>
<P>Baza danych pytañ i odpowiedzi zwi±zanych z <I>qmail'em</I> jest dostêpna pod adresem <A HREF="http://qmail.faqts.com">http://qmail.faqts.com</A>. Je¶li masz pytanie na które ten dokument nie odpowiada, spróbuj poszukaæ odpowiedzi w tej bazie. Jest ona specjalnie pomocna w odnajdywaniu odpowiedzi na pytania &quot;jak to zrobiæ&quot;.</P>
<HR>
<H1><A NAME="installation">2. Instalacja</A></H1>
<P>Ten akapit opisuje instalacjê <I>qmail'a</I>. Je¶li jeste¶ do¶wiadczonym administratorem systemu mo¿esz go zainstalowaæ pos³uguj±c siê wskazówkami zawartymi w pliku <TT>INSTALL</TT> ¼ród³owej dystrybucji. Znajduj± siê w nim <B>oficjalne</B> zalecenia jak dokonaæ instalacji. S± bardziej z³o¿one ni¿ to co opisujê w <U>Life with qmail</U> i zak³adaj±, ¿e czytelnik jest do¶wiadczonym administratorem systemu i poczty. S± tak¿e przestarza³e i ró¿ni± siê w stosunku do tego co Bernstein obecnie zaleca.</P>
<P><HR WIDTH="80%" ALIGN="Left">
<STRONG>Uwaga: </STRONG>Je¶li zdecydujesz siê zainstalowaæ qmail'a na podstawie zaleceñ niniejszego dokumentu zalecane jest aby¶ najpierw przeczyta³ ca³y ten rozdzia³ w celu oswojenia siê z pe³nym procesem instalacji.
<HR WIDTH="80%" ALIGN="Left"></P>
<H2><A NAME="installation-issues">2.1. Mo¿liwe sposoby instalacji</A></H2>
<H3><A NAME="binary-vs-source">2.1.1. Binaria czy kod ¼ród³owy?</A></H3>
<P>Z powodu ograniczeñ na³o¿onych na dystrybucjê pakietów z³o¿onych z binariów zwykle <I>qmail</I> instalowany jest poprzez kompilacjê kodu ¼ród³owego.</P>
<P>Je¶li nie wiesz jaka jest ró¿nica pomiêdzy kodem ¼ród³owym, a binariami wyobra¼ sobie zamawianie pizzy dostarczanej do domu. &quot;Binarna&quot; wersja pizzy przywo¿ona jest gotowa do spo¿ycia. &quot;Kod ¼ród³owy&quot; pizzy przybywa jako komplet zakupów w których sk³ad wchodz± m±ka, dro¿d¿e, ser, sos, dodatki i przepis jak samemu sporz±dziæ pizzê. Instalacja na podstawie kodu ¼ród³owego wymaga trochê wiêcej pracy, jednak je¶li dok³adnie wype³nisz zalecenia zawarte w przepisie bêdzie tej samej lub lepszej jako¶ci. Pizza sporz±dzona przez siebie samego bêdzie swie¿sza, mo¿esz tak¿e u¿yæ jakich chcesz dodatków zgodnie z twymi w³asnymi preferencjami i bêdziesz wiedzia³ wiêcej o pizzy i o tym jak ona &quot;dzia³a&quot;.</P>
<H3><A NAME="tar-vs-package">2.1.2. Instalacja z pliku tar czy z pakietu przygotowanego dla danego systemu operacyjnego?</A></H3>
<P>Niektóre systemy operacyjne maj± mechanizm automatyzacji instalacji na podstawie kodu ¼ród³owego. Wracaj±c do analogii z pizz±, umo¿liwiaj± upakowanie razem sk³adników i przepisu. W efekcie mo¿esz przygotowaæ pizzê przyciskaj±c odpowiedni przycisk.</P>
<P>Brzmi wspaniale nieprawda¿?</P>
<P>Niestety w praktyce, nie musi to byæ wcale taki dobry pomys³. Sk³adanie takich pakietów jest do¶æ skomplikowane i mog± zachowywaæ siê w sposób odmienny od twoich oczekiwañ. Pakiety takie s± oprogramowaniem i jak ka¿de oprogramowanie moga zawieraæ b³êdy. Ale nawet je¶li ich nie zawieraj± ³atwo¶æ instalacji kosztuje. Tracisz wiêkszo¶æ z zalet upieczenia samemu pizzy: mo¿liwo¶ci do dostosowania dodatków do twoich w³asnych upodobañ, i wiedzê jak pizza zosta³a zrobiona i jak ona dzia³a.</P>
<P>Gdyby <I>qmail</I> by³ pizz± instalowanie na podstawie pakietu w³asciwego dla danego systemu operacyjnego mog³oby byæ dobrym podej¶ciem. Jednak jest on do¶æ skomplikowanym systemem, który powiniene¶ dobrze rozumieæ by zapewniæ jego dobre dzia³anie. Samoinstaluj±cy siê <I>qmail</I> jest ³atwiejszy do zainstalowania, ni¿ wersja zainstalowana od podstaw przez u¿ytkownika, ale wersja zainstalowana przez u¿ytkownika jest ³atwiejsza do skonfigurowania i do odnalezienia powodów dla których co¶ nie dzia³a. Instalacjê wykonujesz tylko raz, natomiast najprawdopodobniej kilkukrotnie bedziesz go przekonfigurowa³ lub stara³ siê doj¶æ dlaczego co¶ nie dzia³a tak jak powinno.</P>
<P>Z tego powodu zalecam instalowanie <I>qmail'a</I> od podstaw przy u¿yciu kodu ¼ród³owego z pliku tar, a nie wersji &quot;rpm&quot; Red Hat'a czy innego &quot;samoinstaluj±cego siê&quot; pakietu.</P>
<H2><A NAME="preparation">2.2. Przygotowanie</A></H2>
<P>Przed zainstalowaniem <I>qmail'a</I> w systemie, zw³aszcza je¶li jest to twoja pierwsza jego instalacja powiniene¶ wiedzieæ o kilku rzeczach :</P>
<UL>
<LI>Je¶li jest to mo¿liwe zainstaluj go na &quot;próbnym&quot; komputerze. Nawet je¶li pope³nisz b³êdy nie zaowocuje to utrat± poczty, czy uniemo¿liwieniem korzystania z poczty dla twoich u¿ytkowników.
<LI>Je¶li nie masz wolnego komputera, a poczta w twoim systemie dostarczana jest przy u¿yciu <I>Sendmail'a</I>, <I>smail'a</I> czy innego MTA mo¿esz zainstalowaæ i przetestowaæ poszczególne czê¶ci <I>qmail'a</I> bez zak³ócania pracy istniej±cego oprogramowania.
<LI>Je¶li zmieniasz oprogramowanie ob³uguj±ce pocztê w twym systemie z jakiego¶ innego MTA na <I>qmail'a</I>, nawet je¶li masz trochê do¶wiadczenia w pracy z <I>qmail'em</I>, dobrze jest sformu³owaæ plan.</UL>
<H2><A NAME="system-requirements">2.3. Wymagania systemowe</A></H2>
<P><I>qmail'a</I> mo¿na zainstalowaæ i uruchomiæ na wiêkszo¶ci komputerów pracuj±cych pod kontrol± UNIX'a czy systemów podobnych do UNIX'a pod warunkiem:</P>
<UL>
<LI>Posiadania oko³o 10 mb w trakcie procesu kompilacji. Po jej zakoñczeniu niezbêdne minimum to 4 mb. Pozosta³± ilo¶æ mo¿esz zwolniæ poprzez usuniêcie plików objektowych.
<LI>Kompletne i dzia³aj±ce oprogramowanie sk³adaj±ce siê z kompilatora, plików nag³ówkowych i bibliotek. Je¶li nie jeste¶ pewien pomoc znajdziesz we wskazówkach opisuj±cych kompilowanie ¼ród³a.
<LI>Kilka megabajtów dla bibliotek, dokumentacji i plików konfiguracyjnych.
<LI>Bezpieczny system plików dla sk³adowania w nim kolejki poczty (poczty bêd±cej w trakcie dostarczania). <I>qmail</I> dzia³a wiarygodnie pod warunkiem, ¿e kolejka poczty obs³ugiwana jest przez system plików z tradycyjn± semantyk± BSD FFS. Wiêkszo¶æ wspó³czesnych lokalnych systemów plików pracuje zgodnie z ni±, z jednym istotnym wyj±tkiem: funkcja systemowa <TT>link()</TT> jest zwykle <I>asynchroniczna</I>, co oznacza ze rezultaty wywo³ania <TT>link()</TT> mog± nie zostaæ zapisane na dysk ju¿ w chwili powrotu z tego wywo³ania systemowego. Mo¿esz u¿yæ biblioteki <I>syncdir</I> Bruce'a Guenter'a w celu rozwi±zania tego problemu. Zobacz <A HREF="#syncdir">syncdir</A> w dodatku Pakiety Dodatkowe. 
<LI>Wystarczaj±ca ilo¶æ pamiêci na dysku dla kolejki poczty. Ma³y system dla pojedyñczego u¿ytkownika bêdzie potrzebowa³ kilka megabajtów. Du¿y serwer mo¿e potrzebowaæ kilka gigabajtów.
<LI>System operacyjny kompatybilny z UNIX'em. Wiêkszo¶æ odmian UNIX'a jest akceptowalna. Zobacz <TT>README</TT> w katalogu ¼ród³owym w celu odnalezienia spisu systemów pod którymi dzia³a <I>qmail</I>.
<LI>Dostêp do serwera nazw domen (DNS) jest praktycznie niezbêdny. Bez niego <I>qmail</I> mo¿e jedynie wysy³aæ pocztê do tych zewnêtrznych systemów, które s± skonfigurowane w pliku <TT>smtproutes</TT>.
<LI>Dobry dostêp do sieci. <I>qmai</I>l zosta³ zaprojektowany dla systemów posiadaj±cych taki dostêp zatem prawdopodobnie nie ma sensu próbowaæ u¿ywaæ go jako serwer listy dyskusyjnej posiadaj±c ³±cze o prêdko¶ci 28.8 kb/s poprzez diul-up. Pakiet <I>serialmail</I> ma za zadanie u³atwiæ pracê <I>qmail'a</I> w systemie z kiepskim dostêpem do sieci. Zobacz rozdzia³ <A HREF="#serialmail">serialmail</A> w za³±czniku Dodatkowe Pakiety w celu zdobycia wiêkszej ilo¶ci informacji na ten temat.</UL>
<H2><A NAME="download">2.4. ¦ciaganie ¼róde³</A></H2>
<P>Po przeczytaniu uwag w poprzednim punkcie powiniene¶ mieæ system spe³niaj±cy wymogi niezbêdne do zainstalowania <I>qmail'a</I>. Obecnie trzeba ¶ci±gn±æ ¼ród³a <I>qmail'a</I> i ewentualnych dodatkowych pakietów. Zwykle bêd± to <I>qmail</I>, <I>ucspi-tcp</I> i <I>daemontools</I></P>
<UL>
<LI><I>qmail</I>, <A HREF="ftp://cr.yp.to/software/qmail-1.03.tar.gz">ftp://cr.yp.to/software/qmail-1.03.tar.gz</A>
<LI><I>ucspi-tcp</I>, <A HREF="ftp://cr.yp.to/ucspi-tcp/ucspi-tcp-0.88.tar.gz">ftp://cr.yp.to/ucspi-tcp/ucspi-tcp-0.88.tar.gz</A>
<LI><I>daemontools</I>, <A HREF="ftp://cr.yp.to/daemontools/daemontools-0.76.tar.gz">ftp://cr.yp.to/daemontools/daemontools-0.76.tar.gz</A></UL>
<P>¦ci±gnij te pliki przy u¿yciu przegl±darki internetowej lub klienta ftp.</P>
<P><HR WIDTH="80%" ALIGN="Left">
<STRONG>Uwaga: </STRONG>Je¶li który¶ z powy¿szych linków nie zadzia³a bêdzie tak najprawdopodobniej wówczas je¶li pojawi³a siê ju¿ nowsza wersja. W takim przypadku zajrzyj na stronê <A HREF="http://cr.yp.to/software.html">http://cr.yp.to/software.html</A> i przejd¼ do miejsca sk±d mo¿esz ¶ci±gn±æ najnowsz± wersjê. Mo¿e okazaæ siê ¿e nowsza wersja nie bêdzie kompatybilna z opisem który znajdziesz w tym dokumencie, wiêc dla pewno¶ci przeczytaj dokumentacjê za³±czon± w nowszej wersji, a szczególnie rozdzia³ &quot;Upgrading from previous versions...&quot;
<HR WIDTH="80%" ALIGN="Left"></P>
<H2><A NAME="build">2.5. Kompilowanie ¼ród³a</A></H2>
<H3><A NAME="verify-compiler">2.5.1. Sprawdzenie dzia³ania kompilatora</A></H3>
<P>Pierwsza rzecz± któr± trzeba zrobiæ jest upewnienie siê czy posiadasz narzêdzia do kompilacji programów. Mo¿na to sprawdzaæ na wiele sposobów w zale¿no¶ci od typu UNIX'a, który u¿ywasz. Najprostszy z nich, ale nie daj±cym 100% pewno¶ci, jest <I>próba</I> uruchomienia go.</P>
<P><HR WIDTH="80%" ALIGN="Left">
<STRONG>Uwaga: </STRONG>je¶li którykolwiek z poni¿szych testów powiedzie siê, mo¿esz zrezygnowaæ z wykonywania pozosta³ych i przej¶æ do dalszej czê¶ci.
<HR WIDTH="80%" ALIGN="Left"></P>
<UL>
<LI>W linii poleceñ wpisz <TT>cc</TT> i wci¶nij Enter:</UL>
<PRE>
    $ cc
    cc: No input files specified
    $
</PRE>
<UL>
<LI>Je¶li uzyska³e¶ podobny rezultat oznacza to, ¿e masz kompilator C dostêpny w swojej ¶cie¿ce dostêpu. Je¶li nie, nie musi to wcale oznaczaæ ¿e nie posiadasz zainstalowanego kompilatora. Byæ mo¿e jest on zainstalowany, ale w innym katalogu, który nie znajduje siê w twej ¶cie¿ce dostêpu. Spróbuj:<UL>
<LI><TT>/usr/bin/cc</TT>
<LI><TT>/usr/bin/gcc</TT>
<LI><TT>/usr/local/bin/cc</TT>
<LI><TT>/usr/local/bin/gcc</TT>
<LI><TT>/usr/ccs/bin/cc</TT></UL>
<LI>Je¶li ¿adne z powy¿szych nie zadzia³a³o wybierz dzia³anie w zale¿no¶ci od tego jaki masz system operacyjny:<UL>
<LI>Red Hat Linux: <TT>rpm -qa | grep gcc</TT> or <TT>rpm -qa | grep egcs</TT>
<LI>FreeBSD: posiada gcc zainstalowany domy¶lnie</UL>
<LI>Je¶li nie masz zainstalowanego kompilatora bêdziesz musia³ poszukaæ go i zainstalowaæ. Skontaktuj siê z producentem twego systemu operacyjnego lub z dzia³em pomocy innego UNIX'a.</UL>
<P>W kolejnym punkcie opisane jest krok po kroku jak skompilowaæ <I>qmail'a</I>.</P>
<H3><A NAME="unpack">2.5.2. Rozpakuj program</A></H3>
<P>Je¶li dotar³e¶ do tego miejsca oznacza to, ¿e masz dzia³aj±cy kompilator C i ¼ród³a w postaci plików tar. Skopiuj albo przenie¶ te pliki do katalogu w którym chcesz pracowaæ. Dobrym wyborem jest <TT>/usr/local/src</TT> dla <I>qmail'a</I> i <I>ucspi-tcp</I>,  natomiast <I>daemontools</I> powinno byæ kompilowane w <TT>/package</TT>.</P>
<P>W tym momencie powinienes uzyskaæ uprawnienia root'a, je¶li jeszcze ich nie masz</P>
<PRE>
    su
    umask 022
    mkdir -p /usr/local/src
    mv qmail-1.03.tar.gz ucspi-tcp-0.88.tar.gz /usr/local/src
    mkdir -p /package
    mv daemontools-0.76.tar.gz /package
    chmod 1755 /package
</PRE>
<P>Teraz mo¿esz rozpakowaæ pakiety.</P>
<PRE>
    cd /usr/local/src
    gunzip qmail-1.03.tar.gz
    tar xpf qmail-1.03.tar
    gunzip ucspi-tcp-0.88.tar.gz
    tar xpf ucspi-tcp-0.88.tar
    rm *.tar    <I># opcjonalne, tylko je¶li masz ma³o miejsca na dysku</I>
    cd /package
    gunzip daemontools-0.76.tar.gz
    tar xpf daemontools-0.76.tar
    rm *.tar    <I># opcjonalne, j.w.</I>
</PRE>

<P>Powiniene¶ mieæ teraz podkatalogi nazwane <TT>/usr/local/src/qmail-1.03</TT>, <TT>/usr/local/src/ucspi-tcp-0.88</TT> i <TT>/package/admin/daemontools-0.76</TT>.</P>
<H3><A NAME="create-dirs">2.5.3. Tworzenie katalogów</A></H3>
<P>Program instalacyjny <I>qmail'a</I> sam tworzy podkatalogi, ktore s± potrzebne. Dla ciebie pozostaje tylko stworzenie katalogu &quot;domowego&quot;:</P>
<PRE>
    mkdir /var/qmail
</PRE>
<P>Mo¿esz teraz przej¶æ do nastêpnego podpunktu.</P>
<P><HR WIDTH="80%" ALIGN="Left">
<STRONG>Uwaga: </STRONG>Je¶li chcesz by czê¶æ lub wszystkie pliki <I>qmail'a</I> znajdowa³y siê poza <TT>/var</TT> mo¿esz to osi±gn±æ tworz±c symboliczne linki w <TT>/var/qmail</TT> do miejsca gdzie on siê znajduje.</P>
<P><STRONG>Przyk³adowo</STRONG>, pliki konfiguracyjne mog± znajdowaæ sie w <TT>/etc/qmail</TT> poprzez:</P>
<PRE>
    mkdir /etc/qmail
    ln -s /etc/qmail /var/qmail/control
</PRE>
<P><HR WIDTH="80%" ALIGN="Left"></P>
<H3><A NAME="create-users">2.5.4. Tworzenie u¿ytkowników i grup</A></H3>
<P>Najpro¶ciej zrobiæ to tworz±c skrypt. W katalogu ¼rod³owym znajd¼ plik o nazwie <TT>INSTALL.ids</TT>. Znajduj± siê w nim polecenia, które nale¿y wykonaæ, w wersjach dla wielu ró¿nych platform, wiêc najlepiej skopiowaæ go do pliku o innej nazwie i dokonaæ jego edycji.</P>
<PRE>
    cd /usr/local/src/qmail-1.03
    cp INSTALL.ids  IDS
</PRE>
<P>Nastêpnie przy u¿yciu edytora tekstu usuñ z niego to co nie jest potrzebne. Dla przyk³adu oto co powinno znale¼æ siê w IDS dla FreeBSD po zakoñczeniu edycji:</P>
<PRE>
    pw groupadd nofiles
    pw useradd alias -g nofiles -d /var/qmail/alias -s /nonexistent
    pw useradd qmaild -g nofiles -d /var/qmail -s /nonexistent
    pw useradd qmaill -g nofiles -d /var/qmail -s /nonexistent
    pw useradd qmailp -g nofiles -d /var/qmail -s /nonexistent
    pw groupadd qmail
    pw useradd qmailq -g qmail -d /var/qmail -s /nonexistent
    pw useradd qmailr -g qmail -d /var/qmail -s /nonexistent
    pw useradd qmails -g qmail -d /var/qmail -s /nonexistent
</PRE>
<P>Nastêpnie u¿yj <TT>chmod</TT> by uczyniæ go wykonywalnym lub uruchom go poprzez <TT>sh</TT>:</P>
<P>Pierwsza metoda:</P>
<PRE>
    chmod 700 IDS
    ./IDS
</PRE>
<P>Druga metoda:</P>
<PRE>
    /bin/sh IDS
</PRE>
<P>Gdy skrypt zakoñczy dzia³anie bêdziesz mia³ ju¿ stworzonych wszystkich potrzebnych u¿ytkowników oraz grupy i mo¿esz przej¶æ do nastêpnego punktu.</P>
<P>Jednak co zrobiæ je¶li polecenia dla twojego systemu nie znajduj± siê w <TT>INSTALL.ids</TT>? W takim wypadku trzeba je samemu napisaæ. Uruchom ulubiony edytor tekstu i zacznij edycjê <TT>/etc/group</TT>. Trzeba dodaæ do niego dwie linie:</P>
<PRE>
    qmail:*:2107:
    nofiles:*:2108:
</PRE>
<P><HR WIDTH="80%" ALIGN="Left">
<STRONG>Uwaga: </STRONG>Sprawd¼ najpierw czy 2107 i 2108 nie s± jeszcze u¿ywane.
<HR WIDTH="80%" ALIGN="Left"></P>
<P>Teraz u¿ywaj±c <TT>vipw</TT> (jest zainstalowany na wiêkszo¶ci systemów, je¶li nie u¿yj swego edytora ponownie, ale tym razem na pliku <TT>/etc/passwd</TT>) dodaj poni¿esz linie na koñcu pliku:</P>
<PRE>
    alias:*:7790:2108::/var/qmail/alias:/bin/true
    qmaild:*:7791:2108::/var/qmail:/bin/true
    qmaill:*:7792:2108::/var/qmail:/bin/true
    qmailp:*:7793:2108::/var/qmail:/bin/true
    qmailq:*:7794:2107::/var/qmail:/bin/true
    qmailr:*:7795:2107::/var/qmail:/bin/true
    qmails:*:7796:2107::/var/qmail:/bin/true
</PRE>
<P><HR WIDTH="80%" ALIGN="Left">
<STRONG>Uwaga: </STRONG>Upewnij siê, ¿e 7790-7796 nie s± jeszcze u¿ywane i ¿e grupy 2107 i 2108 maj± te same numery które doda³e¶ do pliku /etc/group.
<HR WIDTH="80%" ALIGN="Left"></P>
<P>Nie musisz wcale dodawaæ tych linii na <I>koñcu</I>, jest to po prostu naj³atwiejszy sposób na wyt³umaczenie co trzeba zrobiæ.</P>
<P>Po zakoñczeniu dodawania grup i u¿ytkowników jeste¶my ju¿ gotowi do przej¶cia do nastêpnego punktu.</P>
<H3><A NAME="do-build">2.5.5. Kompilacja</A></H3>
<P>Jeste¶ ju¿ gotowy do rozpoczêcia kompilacji. Zmieñ katalog na <TT>/usr/local/src/qmail-1.03</TT> i zaczynajmy:</P>
<PRE>
    cd /usr/local/src/qmail-1.03
</PRE>
<P>W punkcie <A HREF="#verify-compiler">Sprawdzenie dzia³ania kompilatora</A> znalaz³e¶ kompilator C. Je¶li nie nazywa siê on <TT>cc</TT>, albo gdy katalog w którym on siê znajduje nie zosta³ dodany do zmiennej ¶rodowiskowej <TT>PATH</TT>, bêdziesz musia³ dokonaæ edycji plików <TT>conf-cc</TT> i <TT>conf-ld</TT>. Powiedzmy, ¿e twój kompilator nazywa siê <TT>gcc</TT> i jego katalog nie jest w twej ¶cie¿ce dostêpu. W takim razie dokonaj edycji <TT>conf-cc</TT> i <TT>conf-ld</TT> i napisz &quot;gcc&quot; zamiast &quot;cc&quot;.</P>
<P>Teraz napisz:</P>
<PRE>
    make setup check
</PRE>
<P>Po zakoñczeniu kompilacji trzeba skonfigurowaæ qmail'a. Kilka skryptów dostarczonych wraz z nim u³atwi to.</P>
<P>Je¶li twoj DNS jest poprawnie skonfigurowany napisz:</P>
<PRE>
    ./config
</PRE>
<P>Je¶li, z jakiego¶ powodu, <TT>config</TT> nie znalaz³ nazwy twego hosta w DNS trzeba uruchomiæ skrypt o nazwie <TT>config-fast</TT>:</P>
<PRE>
    ./config-fast <I>pe³na.nazwa.hosta</I>
</PRE>
<P>Na przyk³ad, je¶li twoja domena to example.com, a nazwa twojego hosta to dolphin powiniene¶ napisaæ:</P>
<PRE>
    ./config-fast dolphin.example.com
</PRE>
<P><HR WIDTH="80%" ALIGN="Left">
<STRONG>Uwaga: </STRONG>W ma³ych sieciach LAN mo¿esz chcieæ u¿yæ pseudodomeny takiej jak &quot;.local&quot;. np. je¶li twój host nazywa siê &quot;mash&quot;, mo¿esz wykonaæ <TT>./config-fast mash.local</TT>. Je¶li tak zrobisz b±d¼ pewien by skonfigurowaæ <I>qmail'a</I> by u¿ywa³ prawid³owej domeny internetowej. (Zob. rozdzia³ 3, <A HREF="#configuration">Konfiguracja</A>.)
<HR WIDTH="80%" ALIGN="Left"></P>
<P><I>qmail</I> zosta³ w³a¶nie zainstalowany w twym systemie i jest gotowy do pracy! Za chwilê przeczytasz jak go uruchomiæ i przetestowaæ.</P>
<H2><A NAME="install-ucspi">2.6. Instalacja ucspi-tcp</A></H2>
<P>Rozpakowali¶my ju¿ <I>qmail</I>, <I>ucpsi-tcp</I> i <I>daemontools</I> z archiwów tar. Przejd¼my zatem do katalog <I>ucpsi-tcp</I>:</P>
<PRE>
    cd /usr/local/src/qmail/ucspi-tcp-0.88
</PRE>
<P>Je¶li w punkcie <A HREF="#do-build">Kompilacja</A> dokona³e¶ zmian w plikach <TT>conf-cc</TT> i <TT>conf-ld</TT> bêdziesz musia³ wprowadziæ te same zmiany tutaj.</P>
<P>Nastêpnie:</P>
<PRE>
    make
    make setup check
</PRE>
<P>To ju¿ wszystko. <I>ucpsi-tcp</I> jest zainstalowany.</P>
<H2><A NAME="install-daemontools">2.7. Instalacja daemontools</A></H2>
<P>Zmieñ katalog:</P>
<PRE>
    cd /usr/local/src/qmail/daemontools-0.76
</PRE>
<P>I znowu, je¶li zmodyfikowa³e¶ pliki <TT>conf-cc</TT> i <TT>conf-ld</TT> podczas instalacji <I>qmail'a</I> i <I>ucspi-tcp</I> bêdziesz musia³ zrobiæ te same zmiany tutaj.</P>
<P>Nastêpnie:</P>
<PRE>
    package/install
</PRE>
<P>W systemach BSD (nie posiadaj± /etc/inittab) bêdziesz musial zrestartowaæ komputer by uruchomiæ svscan'a, ktory jest demonem uruchamiaj±cym pozosta³e us³ugi.</P>
<P>Napisz &quot;<TT>ps -ef | grep svscan</TT>&quot; or &quot;<TT>ps waux | grep svscan</TT>&quot; by sprawdziæ czy <TT>svscan</TT> ju¿ dzia³a.</P>
<H2><A NAME="start-qmail">2.8. Uruchomienie <I>qmail'a</I></A></H2>
<H3><A NAME="rc">2.8.1. <TT>/var/qmail/rc</TT></A></H3>
<P>Katalog <TT>/var/qmail/boot</TT> zawiera przyk³adowe skrypty uruchamiaj±ce <I>qmail'a</I> podczas procesu bootowania komputera w ró¿nych konfiguracjach: <TT>/var/spool/mail</TT> vs. <TT>$HOME/Mailbox</TT>, z <TT>procmailem</TT> lub <TT>dot-forward</TT>, i ró¿ne kombinacje powy¿szych. Mo¿esz ich u¿ywaæ, jednak my wykorzystamy poni¿szy:</P>
<PRE>
#!/bin/sh

# logowanie do stdout
# wiadomo¶ci dostarczane na podstawie control/defaultdelivery

exec env - PATH=&quot;/var/qmail/bin:$PATH&quot; \
qmail-start &quot;`cat /var/qmail/control/defaultdelivery`&quot;
</PRE>
<P><HR WIDTH="80%" ALIGN="Left">
<STRONG>Uwaga: </STRONG>Skrypt ten u¿ywa odwrotnego cudzys³owiu (<TT>`</TT>), a nie zwyk³ego (<TT>'</TT>). Najlepiej skopiuj ten skrypt ze strony zamiast wklepywaæ go rêcznie.
<HR WIDTH="80%" ALIGN="Left"></P>

<P>Przy pomocy edytora tekstu utwórz <TT>/var/qmail/rc</TT>, zawieraj±cy powy¿sze dwie linie. Nastêpnie wykonaj polecenia:</P>
<PRE>
    chmod 755 /var/qmail/rc
    mkdir /var/log/qmail
</PRE>
<P>W tym momencie musisz podj±æ decyzjê co do sposobu dostarczania wiadomo¶ci, które nie s± dostarczane na podstawie pliku .qmail. Najczê¶ciej spotykane rozwi±zania znajduj± siê w tabeli.</P>
<TABLE CLASS="columns" BORDER>
<TR CLASS="heading">
<TD>
<STRONG>Format skrzynki</STRONG>
</TD>
<TD>
<STRONG>Nazwa</STRONG>
</TD>
<TD>
<STRONG>Lokalizacja</STRONG>
</TD>
<TD>
<STRONG>Dostarczanie domy¶lne</STRONG>
</TD>
<TD>
<STRONG>Komentarz</STRONG>
</TD>
</TR>
<TR>
<TD>
mbox
</TD>
<TD>
<TT>Mailbox</TT>
</TD>
<TD>
<TT>$HOME</TT>
</TD>
<TD>
<TT>./Mailbox</TT>
</TD>
<TD>
najpopularniejszy, dzia³a z wiêkszo¶ci± MUA
</TD>
</TR>
<TR>
<TD>
maildir
</TD>
<TD>
<TT>Maildir</TT>
</TD>
<TD>
<TT>$HOME</TT>
</TD>
<TD>
<TT>./Maildir/</TT>
</TD>
<TD>
bardziej wiarygodny, obs³ugiwany przez mniejsz± ilo¶æ MUA
</TD>
</TR>
<TR>
<TD>
mbox
</TD>
<TD>
<TT>&nbsp;<I>username</I></TT>
</TD>
<TD>
<TT>/var/spool/mail</TT>
</TD>
<TD>
zob.<TT>INSTALL.vsm</TT>
</TD>
<TD>
tradycyjny format w UNIXie
</TD>
</TR>
</TABLE>

<P>Aby dokonaæ wyboru formatu skrzynki pocztowej po prostu wprowad¼ warto¶æ znalezion± w tabeli o nazwie 'dostarczanie_domy¶lne' do <TT>/var/qmail/control/defaultdelivery</TT>. Przykladowo aby wybraæ standardowe dostarczanie poczty przez <TT>qmail'a</TT> do <TT>Mailbox</TT>:</P>
<PRE>
    echo ./Mailbox &gt;/var/qmail/control/defaultdelivery
</PRE>
<P><HR WIDTH="80%" ALIGN="Left">
<STRONG>Uwaga: </STRONG><TT>defaultdelivery</TT> nie jest standardowym plikiem steruj±cym <I>qmail'a</I>. Jest to plik wykorzystywany poprzez <TT>/var/qmail/rc</TT>.  <TT>qmail-start</TT> dostarcza wiadomo¶æ na podstawie <I>defaultdelivery</I> je¶li nie znajdzie pliku <TT>.qmail</TT> w katalogu domowym u¿ytkownika. Umieszczenie tych instrukcji w oddzielnym pliku eliminuje potrzebê stosowania skomplikowanych kilkulinijkowych argumentów.  
<HR WIDTH="80%" ALIGN="Left"></P>
<H3><A NAME="system-startup">2.8.2. Pliki startowe systemu</A></H3>
<H4><A NAME="qmail-script">2.8.2.1. Skrypt <TT>qmail'a</TT></A></H4>
<P>Je¶li rêcznym uruchomi³e¶ skrypt <TT>/var/qmail/rc</TT> <I>qmail</I> zosta³ czê¶ciowo uruchomiony. Chcemy jednak, by <I>qmail</I> by³ automatycznie uruchamiany podczas ka¿dego startu systemu i by by³ bezpiecznie zamykany podczas wy³±czania komputera.</P>
<P>Aby to osi±gn±æ utwórz skrypt podobny do poni¿szego:</P>
<PRE>
#!/bin/sh

# For Red Hat chkconfig
# chkconfig: - 80 30
# description: the qmail MTA

#!/bin/sh

# For Red Hat chkconfig
# chkconfig: - 80 30
# description: the qmail MTA

PATH=/var/qmail/bin:/bin:/usr/bin:/usr/local/bin:/usr/local/sbin
export PATH

QMAILDUID=`id -u qmaild`
NOFILESGID=`id -g qmaild`

case &quot;$1&quot; in
  start)
    echo &quot;Starting qmail&quot;
    if svok /service/qmail-send ; then
      svc -u /service/qmail-send
    else
      echo qmail-send supervise not running
    fi
    if svok /service/qmail-smtpd ; then
      svc -u /service/qmail-smtpd
    else
      echo qmail-smtpd supervise not running
    fi
    if [ -d /var/lock/subsys ]; then
      touch /var/lock/subsys/qmail
    fi
    ;;
  stop)
    echo &quot;Stopping qmail...&quot;
    echo &quot;  qmail-smtpd&quot;
    svc -d /service/qmail-smtpd
    echo &quot;  qmail-send&quot;
    svc -d /service/qmail-send
    if [ -f /var/lock/subsys/qmail ]; then
      rm /var/lock/subsys/qmail
    fi
    ;;
  stat)
    svstat /service/qmail-send
    svstat /service/qmail-send/log
    svstat /service/qmail-smtpd
    svstat /service/qmail-smtpd/log
    qmail-qstat
    ;;
  doqueue|alrm|flush)
    echo &quot;Flushing timeout table and sending ALRM signal to qmail-send.&quot;
    /var/qmail/bin/qmail-tcpok
    svc -a /service/qmail-send
    ;;
  queue)
    qmail-qstat
    qmail-qread
    ;;
  reload|hup)
    echo &quot;Sending HUP signal to qmail-send.&quot;
    svc -h /service/qmail-send
    ;;
  pause)
    echo &quot;Pausing qmail-send&quot;
    svc -p /service/qmail-send
    echo &quot;Pausing qmail-smtpd&quot;
    svc -p /service/qmail-smtpd
    ;;
  cont)
    echo &quot;Continuing qmail-send&quot;
    svc -c /service/qmail-send
    echo &quot;Continuing qmail-smtpd&quot;
    svc -c /service/qmail-smtpd
    ;;
  restart)
    echo &quot;Restarting qmail:&quot;
    echo &quot;* Stopping qmail-smtpd.&quot;
    svc -d /service/qmail-smtpd
    echo &quot;* Sending qmail-send SIGTERM and restarting.&quot;
    svc -t /service/qmail-send
    echo &quot;* Restarting qmail-smtpd.&quot;
    svc -u /service/qmail-smtpd
    ;;
  cdb)
    tcprules /etc/tcp.smtp.cdb /etc/tcp.smtp.tmp &lt; /etc/tcp.smtp
    chmod 644 /etc/tcp.smtp.cdb
    echo &quot;Reloaded /etc/tcp.smtp.&quot;
    ;;
  help)
    cat &lt;&lt;HELP
   stop -- stops mail service (smtp connections refused, nothing goes out)
  start -- starts mail service (smtp connection accepted, mail can go out)
  pause -- temporarily stops mail service (connections accepted, nothing leaves)
   cont -- continues paused mail service
   stat -- displays status of mail service
    cdb -- rebuild the tcpserver cdb file for smtp
restart -- stops and restarts smtp, sends qmail-send a TERM &amp; restarts it
doqueue -- schedules queued messages for immediate delivery
 reload -- sends qmail-send HUP, rereading locals and virtualdomains
  queue -- shows status of queue
   alrm -- same as doqueue
  flush -- same as doqueue
    hup -- same as reload
HELP
    ;;
  *)
    echo &quot;Usage: $0 {start|stop|restart|doqueue|flush|reload|stat|pause|cont|cdb|queue|help}&quot;
    exit 1
    ;;
esac

exit 0

</PRE>
<P>Skrypt ten jest dostêpny tak¿e ze strony  <A HREF="http://www.lifewithqmail.org/qmailctl-script-dt70">http://www.lifewithqmail.org/qmailctl-script-dt70</A>.</P> 
<P>Utwórz ten skrypt w edytorze albo ¶ci±gnij go z powy¿szej strony (zalecane).</P>


<H5><A NAME="rc-links">2.8.2.1.1. <TT>rc</TT> links</A></H5>
<P>W wiêkszo¶ci Linux'ów i innych systemów System 5, trzeba zrobiæ linki od skryptu do katalogu <TT>init.d</TT> i kilku innych podkatalogów 
 &quot;rc&quot;. <TT>init.d</TT> znajduje siê prawdopodobnie w jednym z poni¿szych miejsc:</P>
<UL>
<LI><TT>/etc/init.d</TT>
<LI><TT>/sbin/init.d</TT>
<LI><TT>/etc/rc.d/init.d</TT></UL>

<P>Katalogi <TT>rc</TT> maj± nazwy rc<I>N</I>.d, gdzie <I>N</I> jest <I>runlevel'em</I> do którego siê odnosz±. Bardziej szczegó³owy opis sposobu w jaki startuje system operacyjny nie mo¿e tu niestety zostaæ umieszczony. Je¶li zatem powy¿szy uproszczony opis nie wystarczy³ ci zajrzyj do dokumentacji systemowej. Twoje katalogi rc znajduj± sie prawdopodobnie w jednym z poni¿szych miejsc:</P>
<UL>
<LI><TT>/etc</TT>
<LI><TT>/sbin</TT>
<LI><TT>/etc/rc.d</TT></UL>
<P>By stworzyæ linki wykonaj poni¿sze polecenia zastêpuj±c INITDIR katalogiem w którym znajduje siê <TT>init.d</TT> w twoim systemie, a RCDIR lokalizacj± katalogów rc:</P>
<PRE>
    ln -s /var/qmail/bin/qmailctl INITDIR/qmail
    ln -s ../init.d/qmail RCDIR/rc0.d/K30qmail
    ln -s ../init.d/qmail RCDIR/rc1.d/K30qmail
    ln -s ../init.d/qmail RCDIR/rc2.d/S80qmail
    ln -s ../init.d/qmail RCDIR/rc3.d/S80qmail
    ln -s ../init.d/qmail RCDIR/rc4.d/S80qmail
    ln -s ../init.d/qmail RCDIR/rc5.d/S80qmail
    ln -s ../init.d/qmail RCDIR/rc6.d/K30qmail
</PRE>
<P><HR WIDTH="80%" ALIGN="Left">
<STRONG>Uwaga: </STRONG>Cyfry opisane w powy¿szym przyk³adzie zale¿± w du¿ym stopniu od systemu. Je¶li jednak masz zainstalowanego <I>Sendmail'a</I> po uruchomieniu polecenia &quot;<TT>find RCDIR -name &quot;*sendmail&quot; -print</TT>&quot; otrzymasz liczby które powinny zadzia³aæ w twym systemie operacyjnym. 
<HR WIDTH="80%" ALIGN="Left"></P>
<P>Niezale¿nie od posiadanego systemu uczyñ plik startowy wykonywalnym i zlinkuj go do katalogu w twej ¶cie¿ce:</P>
<PRE>
    chmod 755 /var/qmail/bin/qmailctl
    ln -s /var/qmail/bin/qmailctl /usr/bin
</PRE>
<H4><A NAME="supervise-tree">2.8.2.2. Skrypty <TT>supervise</TT></A></H4>
<P>Utwórz teraz katalogi <TT>supervise</TT> dla poszczególnych us³ug <I>qmail'a</I>:</P>
<PRE>
    chmod 755 /var/qmail/bin/qmailctl
    ln -s /var/qmail/bin/qmailctl /usr/bin
</PRE>
<P>Stwórz plik <TT>/var/qmail/supervise/qmail-send/run</TT>:</P>
<PRE>
#!/bin/sh
exec /var/qmail/rc
</PRE>
<P>Stwórz plik <TT>/var/qmail/supervise/qmail-send/log/run</TT>:</P>
<PRE>
#!/bin/sh
exec /usr/local/bin/setuidgid qmaill /usr/local/bin/multilog t /var/log/qmail
</PRE>
<P>Stwórz plik <TT>/var/qmail/supervise/qmail-smtpd/run</TT>:</P>
<PRE>
#!/bin/sh
QMAILDUID=`id -u qmaild`
NOFILESGID=`id -g qmaild`
MAXSMTPD=`cat /var/qmail/control/concurrencyincoming`
LOCAL=`head -1 /var/qmail/control/me`
if [ -z &quot;$QMAILDUID&quot; -o -z &quot;$NOFILESGID&quot; -o -z &quot;$MAXSMTPD&quot; -o -z &quot;$LOCAL&quot; ]; then
    echo QMAILDUID, NOFILESGID, MAXSMTPD, or LOCAL is unset in
    echo /var/qmail/supervise/qmail-smtpd/run
    exit 1
fi
exec /usr/local/bin/softlimit -m 2000000 \
    /usr/local/bin/tcpserver -v -R -l &quot;$LOCAL&quot; -x /etc/tcp.smtp.cdb -c &quot;$MAXSMTPD&quot; \
        -u &quot;$QMAILDUID&quot; -g &quot;$NOFILESGID&quot; 0 smtp /var/qmail/bin/qmail-smtpd 2&gt;&amp;1
</PRE>
<P><HR WIDTH="80%" ALIGN="Left">
<STRONG>Uwaga: </STRONG><TT>concurrencyincoming</TT> nie jest standardowym plikiem konfiguracyjnym <I>qmail'a</I>. Wykorzystywany jest jedynie na potrzeby powy¿szego skryptu podobnie jest z -1 (minus jeden) w linii LOCAL i z -l (minus el) w linii tcpservera.
<HR WIDTH="80%" ALIGN="Left"></P>
<P><HR WIDTH="80%" ALIGN="Left">
<STRONG>Uwaga: </STRONG>W systemie Solaris, standardowy program <TT>id</TT> nie zadzia³a poprawnie na potrzeby tego skryptu. Zamiast <TT>id</TT> u¿yj <TT>/usr/xpg4/bin/id</TT>, np:</P>
<PRE>
    QMAILDUID=`/usr/xpg4/bin/id -u qmaild`
    NOFILESGID=`/usr/xpg4/bin/id -g qmaild`
</PRE>
<P><HR WIDTH="80%" ALIGN="Left"></P>
<P><HR WIDTH="80%" ALIGN="Left">
<STRONG>Uwaga: </STRONG>Obszar pamieêci okre¶lony przez polecenie <TT>softlimit</TT> mo¿e wymagaæ zwiêkszenia w zale¿no¶ci od typu systemu operacyjnego oraz hardware. Je¶li po³±czenia z portem 25 bêd± stwarzaæ problemy lub gdy hosty zewnêtrzne nie bêd± mog³y wysy³aæ do ciebie poczty zwiêksz ten parametr do 3000000 lub 4000000.
<HR WIDTH="80%" ALIGN="Left"></P>
<P>Stwórz plik <TT>concurrencyincoming</TT>:</P>
<PRE>
    echo 20 &gt; /var/qmail/control/concurrencyincoming
    chmod 644 /var/qmail/control/concurrencyincoming
</PRE>
<P>Stwórz plik <TT>/var/qmail/supervise/qmail-smtpd/log/run</TT>:</P>
<PRE>
#!/bin/sh
exec /usr/local/bin/setuidgid qmaill /usr/local/bin/multilog t /var/log/qmail/s
mtpd
</PRE>
<P>Uczyñ pliki startowe plikami uruchamialnymi:</P>
<PRE>
    chmod 755 /var/qmail/supervise/qmail-send/run
    chmod 755 /var/qmail/supervise/qmail-send/log/run
    chmod 755 /var/qmail/supervise/qmail-smtpd/run
    chmod 755 /var/qmail/supervise/qmail-smtpd/log/run
</PRE>
<P>I utwórz katalogi dla logów:</P>
<PRE>
    mkdir -p /var/log/qmail/smtpd
    chown qmaill /var/log/qmail /var/log/qmail/smtpd
</PRE>
<P>I wreszcie zlinkuj katalog <TT>supervise</TT> do <TT>/service</TT>:</P>
<PRE>
    ln -s /var/qmail/supervise/qmail-send /var/qmail/supervise/qmail-smtpd /service
</PRE>
<P><HR WIDTH="80%" ALIGN="Left">
<STRONG>Uwaga: </STRONG> <I>qmail</I> uruchomi siê automatycznie wkrótce po utworzeniu powy¿szych linków. Je¶li nie chcesz ¿eby ju¿ teraz rozpocz±³ pracê napisz:</P>
<PRE>
    qmailctl stop
</PRE>
<P><HR WIDTH="80%" ALIGN="Left"></P>

<H4><A NAME="smtp-access-control">2.8.2.3. Kontrola dostêpu do SMTP</A></H4>
<P>Zezwól na wysy³anie poczty z localhosta poprzez SMTP:</P>
<PRE>
    echo '127.:allow,RELAYCLIENT=&quot;&quot;' &gt;&gt;/etc/tcp.smtp
    qmailctl cdb
</PRE>
<H3><A NAME="stop-sendmail">2.8.3. Zatrzymanie i wy³±czenie zainstalowanego MTA</A></H3>
<P>Mimo, ¿e mo¿liwa jest jednoczesna praca <I>qmail'a</I> i zainstalowanego MTA, którym prawdopodobnie jest <I>Sendmail</I>, nie zalecam tego chyba ¿e wiesz co robisz. A je¶li czytasz ten tekst to prawdopodobnie tak nie jest :-)</P>
<P>Je¶li twym obecnym MTA jest <I>Sendmail</I> powiniene¶ byæ w stanie zatrzymaæ go uruchamiaj±c skrypt zawarty w <TT>init.d</TT> z argumentem &quot;stop&quot;. Jedno z poni¿szych powinno zadzia³aæ:</P>
<PRE>
    /etc/init.d/sendmail stop
    /sbin/init.d/sendmail stop
    /etc/rc.d/init.d/sendmail stop
</PRE>
<P>Je¶li nie mo¿esz znale¿æ skryptu <TT>init.d/sendmail</TT> spróbuj zlokalizowaæ PID <TT>Sendmail'a</TT> poprzez &quot;<TT>ps -ef|grep sendmail</TT>&quot; lub &quot;<TT>ps waux|grep sendmail</TT>&quot; i zatrzymaj go:</P>
<PRE>
    kill <I>PID-of-sendmail</I>
</PRE>
<P>Je¶li twym MTA nie jest <I>Sendmail</I> zajrzyj do jego dokumentacji aby dowiedzieæ siê jak nale¿y go zatrzymaæ.</P>
<P>Powiniene¶ rozwa¿yæ ca³kowite usuniêcie starego MTA z systemu. A przynajmniej usuñ skrypt z <TT>init.d</TT> po to by nie startowa³ ponownie podczas reboot'u systemu.</P>
<P>Dla Red Hat'a usunieciê <I>Sendmail'a</I> mo¿na osi±gn±c poprzez:</P>
<PRE>
    rpm -e --nodeps sendmail
</PRE>
<P>Sprawd¼ czy nie nie nas³uchuje na porcie SMTP (25). Je¶li co¶ tam jest mo¿e to byæ stary MTA, <TT>inetd</TT>, lub <TT>xinetd</TT>. Poni¿sze polecenie nie powinno daæ ¿adnych wyników (chyba, ¿e qmail-smtpd jest uruchomiony): </P>
<PRE>
    netstat -a | grep smtp
</PRE>
<P>Na koniec zast±p istniej±cy <TT>/usr/lib/sendmail</TT> jego wersj± z <I>qmail'a</I></P>
<PRE>
    mv /usr/lib/sendmail /usr/lib/sendmail.old                  <I># zignoruj b³êdy</I>
    mv /usr/sbin/sendmail /usr/sbin/sendmail.old                <I># zignoruj b³êdy</I>
    chmod 0 /usr/lib/sendmail.old /usr/sbin/sendmail.old        <I># zignoruj b³êdy</I>
    ln -s /var/qmail/bin/sendmail /usr/lib
    ln -s /var/qmail/bin/sendmail /usr/sbin
</PRE>
<P><HR WIDTH="80%" ALIGN="Left">
<STRONG>Uwaga: </STRONG>Jest bardzo wa¿ne by stworzyæ linki <TT>sendmail</TT> , niezale¿nie od tego jaki MTA mia³e¶ zainstalowany. Polecenie <TT>sendmail</TT> wywo³ywane jest przez wiele aplikacji w celu wys³ania maila. 
<HR WIDTH="80%" ALIGN="Left"></P>
<P>Jeste¶my ju¿ <I>prawie</I> gotowi do uruchomienia <I>qmail'a</I>. Ostatni krok to stworzenie kilku systemowych aliasów.</P>
<H3><A NAME="system-aliases">2.8.4. Tworzenie systemowych aliasów</A></H3>
<P>Istniej± trzy aliasy systemowe, które powinny byæ stworzone w ka¿dym systemie w którym dzia³a <I>qmail</I>:</P>
<TABLE CLASS="columns" BORDER>
<TR CLASS="heading">
<TD>
<STRONG>Alias</STRONG>
</TD>
<TD>
<STRONG>Przeznaczenie</STRONG>
</TD>
</TR>
<TR>
<TD>
postmaster
</TD>
<TD>
wymagany przez RFC 821, wskazuje na administratora poczty (ciebie)
</TD>
</TR>
<TR>
<TD>
mailer-daemon
</TD>
<TD>
standardowy odbiorca niedostarczonych listów
</TD>
</TR>
<TR>
<TD>
root
</TD>
<TD>
przekierowuje pocztê z uprzywilejowanego konta do administratora systemu
</TD>
</TR>
</TABLE>

<P>By stworzyæ te aliasy zdecyduj gdzie chcesz ¿eby by³a dostarczana poczta kierowana do nich (do u¿ytkownika lokalnego, czy do adresu na zewn±trz), stwórz i wype³nij odpowiednie pliki <I>.qmail</I>. Na przyk³ad, powiedzmy ¿e lokalny u¿ytkownik <TT>dave</TT> jest zarówno administratorem poczty, jak i administratorem systemu:</P>
<PRE>
    echo dave &gt; /var/qmail/alias/.qmail-root
    echo dave &gt; /var/qmail/alias/.qmail-postmaster
    ln -s .qmail-postmaster /var/qmail/alias/.qmail-mailer-daemon
    chmod 644 /var/qmail/alias/.qmail-root /var/qmail/alias/.qmail-postmaster
</PRE>
<P>Je¶li pragniesz dowiedzieæ siê wiêcej zajrzyj do <TT>INSTALL.alias</TT>.</P>
<H3><A NAME="start-it">2.8.5. Startujemy <I>qmail'a</I></A></H3>
<P>Je¶li wcze¶niej zatrzyma³e¶ <I>qmail'a</I> po tym jak stworzy³e¶ linki do <TT>/service</TT> uruchom go teraz poprzez:</P>
<PRE>
    qmailctl start
</PRE>
<H2><A NAME="test">2.9. Test poprawno¶ci instalacji</A></H2>
<P><I>qmail</I> powinien ju¿ pracowaæ. Najpierw uruchom <TT>qmailctl stat</TT> by sprawdziæ czy wszystkie cztery procesy pracuj±:</P> 
<PRE>
    # qmailctl stat
    /service/qmail-send: up (pid 30303) 187 seconds
    /service/qmail-send/log: up (pid 30304) 187 seconds
    /service/qmail-smtpd: up (pid 30305) 187 seconds
    /service/qmail-smtpd/log: up (pid 30308) 187 seconds
    messages in queue: 0
    messages in queue but not yet preprocessed: 0
</PRE>
<P>Wszystkie cztery procesy powinny pracowaæ (byæ oznaczone jako 'up') przez ponad sekundê. Je¶li nie s± prawdopodobnie zrobi³e¶ gdzie¶ literówkê w skrypcie który je uruchamia albo pomin±³e¶ jeden lub wiêcej kroków w trakcie tworzenia potrzebnych plików, katalogów lub linków. Wróæ zatem do instalacji i sprawd¼ czy nic nie pomin±³e¶. </P> 
<P>Czasami pomaga uruchamianie us³ug rêcznie w celu odkrycia gdzie tkwi problem. Przyk³adowo je¶li nie dzia³a us³uga <TT>qmail-smtpd/log</TT> wykonaj:</P>
<PRE>
    cd /service/qmail-smtpd/log
    svc -d .
    ./run
    <I>je¶li nie ma b³êdów, wprowad¼ linijkê tekstu i wci¶nij ENTER</I>
    <I>je¶li nadal nie ma b³êdow wci¶nij CTRL-D (koniec pliku)</I>
</PRE>
<P>Powiniene¶ byæ w stanie zidentyfikowaæ i naprawiæ problem. Gdy ju¿ siê z tym uporasz przejd¼ do katalogu service i napisz:</P>
<PRE>
    svc -u .
</PRE>
<P>Gdy ju¿ wszystkie us³ugi pracuj± d³u¿ej ni¿ 1 sekundê wykonaj polecenia z <TT>TEST.deliver</TT> i <TT>TEST.receive</TT>by sprawdziæ czy pracuj± poprawnie. Zwróæ uwagê, ze w trakcie wykonywania tych testów logowanie bêdzie wykonywane przez <TT>multilog'a</TT> do <TT>/var/log/qmail</TT>, a nie <TT>splogger'a</TT> do <TT>/var/log/maillog</TT>.</P>
<HR>
<H1><A NAME="configuration">3. Konfiguracja</A></H1>
<P>Zainstalowa³e¶ ju¿ <I>qmail'a</I> kompiluj±c jego ¼ród³a, czy te¿ korzystaj±c z gotowej wersji. Ten rozdzia³ zawiera informacje które administrator poczty lub systemu bêdzie potrzebowa³ do skonfigurowania <I>qmail'a</I> zgodnie z w³asnymi potrzebami.</P>
<H2><A NAME="config-files">3.1. Pliki konfiguracyjne</A></H2>
<P>Wszystkie pliki konfiguracyjne <I>qmaila</I>, za wyj±tkiem plików <TT>.qmail</TT> z <TT>~alias</TT>, znajduj± siê w <TT>/var/qmail/control</TT>. Strona manuala dla <TT>qmail-control</TT> zawiera nastêpuj±c± tabelê:</P>
<TABLE CLASS="columns" BORDER>
<TR CLASS="heading">
<TD>
<STRONG>Plik</STRONG>
</TD>
<TD>
<STRONG>Warto¶æ domy¶lna</STRONG>
</TD>
<TD>
<STRONG>U¿ywany przez</STRONG>
</TD>
<TD>
<STRONG>Znaczenie</STRONG>
</TD>
</TR>
<TR>
<TD>
<A NAME="badmailfrom">badmailfrom</A>
</TD>
<TD>
<I>brak</I>
</TD>
<TD>
qmail-smtpd
</TD>
<TD>
Adres From na &quot;czarnej&quot; li¶cie
</TD>
</TR>
<TR>
<TD>
<A NAME="bouncefrom">bouncefrom</A>
</TD>
<TD>
MAILER-DAEMON
</TD>
<TD>
qmail-send
</TD>
<TD>
nazwa nadawcy wiadomo¶ci niedostarczonej
</TD>
</TR>
<TR>
<TD>
<A NAME="bouncehost">bouncehost</A>
</TD>
<TD>
me
</TD>
<TD>
qmail-send
</TD>
<TD>
nazwa hosta który odrzuci³ wiadomo¶æ
</TD>
</TR>
<TR>
<TD>
<A NAME="concurrencyincoming">concurrencyincoming</A>
</TD>
<TD>
brak
</TD>
<TD>
/service/qmail-smtpd/run
</TD>
<TD>
max liczba nadchodz±cych równocze¶nie po³±czeñ SMTP 
</TD>
</TR>

<TR>
<TD>
<A NAME="concurrencylocal">concurrencylocal</A>
</TD>
<TD>
10
</TD>
<TD>
qmail-send
</TD>
<TD>
max liczba dostarczanych równocze¶nie listów lokalnie
</TD>
</TR>
<TR>
<TD>
<A NAME="concurrencyremote">concurrencyremote</A>
</TD>
<TD>
20
</TD>
<TD>
qmail-send
</TD>
<TD>
max liczba dostarczanych równocze¶nie listów na zewn±trz
</TD>
</TR>
<TR>
<TD>
<A NAME="defaultdelivery">defaultdelivery</A>
</TD>
<TD>
brak
</TD>
<TD>
/var/qmail/rc
</TD>
<TD>
domy¶lny plik .qmail 
</TD>
</TR>
<TR>
<TD>
<A NAME="defaultdomain">defaultdomain</A>
</TD>
<TD>
me
</TD>
<TD>
qmail-inject
</TD>
<TD>
domy¶lna nazwa domeny
</TD>
</TR>
<TR>
<TD>
<A NAME="defaulthost">defaulthost</A>
</TD>
<TD>
me
</TD>
<TD>
qmail-inject
</TD>
<TD>
domy¶lna nazwa hosta
</TD>
</TR>
<TR>
<TD>
<A NAME="databytes">databytes</A>
</TD>
<TD>
0
</TD>
<TD>
qmail-smtpd
</TD>
<TD>
max liczba bajtów w li¶cie (0 brak limitu)
</TD>
</TR>
<TR>
<TD>
<A NAME="doublebouncehost">doublebouncehost</A>
</TD>
<TD>
me
</TD>
<TD>
qmail-send
</TD>
<TD>
nazwa hosta wysy³aj±cego podwójny bounce
</TD>
</TR>
<TR>
<TD>
<A NAME="doublebounceto">doublebounceto</A>
</TD>
<TD>
postmaster
</TD>
<TD>
qmail-send
</TD>
<TD>
u¿ytkownik do którego wysy³ane s± podwójne bounce
</TD>
</TR>
<TR>
<TD>
<A NAME="envnoathost">envnoathost</A>
</TD>
<TD>
me
</TD>
<TD>
qmail-send
</TD>
<TD>
domy¶lna domena dla adresów bez &quot;@&quot;
</TD>
</TR>
<TR>
<TD>
<A NAME="helohost">helohost</A>
</TD>
<TD>
me
</TD>
<TD>
qmail-remote
</TD>
<TD>
nazwa hosta pokazywana przez komendê HELO
</TD>
</TR>
<TR>
<TD>
<A NAME="idhost">idhost</A>
</TD>
<TD>
me
</TD>
<TD>
qmail-inject
</TD>
<TD>
nazwa hosta dla Message-ID
</TD>
</TR>
<TR>
<TD>
<A NAME="localiphost">localiphost</A>
</TD>
<TD>
me
</TD>
<TD>
qmail-smtpd
</TD>
<TD>
nazwa podstawiana za lokalny adres IP
</TD>
</TR>
<TR>
<TD>
<A NAME="locals">locals</A>
</TD>
<TD>
me
</TD>
<TD>
qmail-send
</TD>
<TD>
domeny do których dostarczamy pocztê lokalnie
</TD>
</TR>
<TR>
<TD>
<A NAME="me">me</A>
</TD>
<TD>
FQDN of system
</TD>
<TD>
ró¿ne
</TD>
<TD>
domy¶lna dla wielu plików konfiguracyjnych
</TD>
</TR>
<TR>
<TD>
<A NAME="morercpthosts">morercpthosts</A>
</TD>
<TD>
<I>brak</I>
</TD>
<TD>
qmail-smtpd
</TD>
<TD>
baza danych pomocniczych rcpthosts
</TD>
</TR>
<TR>
<TD>
<A NAME="percenthack">percenthack</A>
</TD>
<TD>
<I>brak</I>
</TD>
<TD>
qmail-send
</TD>
<TD>
domeny u¿ywaj±ce relayowania w postaci &quot;%&quot;
</TD>
</TR>
<TR>
<TD>
<A NAME="plusdomain">plusdomain</A>
</TD>
<TD>
me
</TD>
<TD>
qmail-inject
</TD>
<TD>
domena podstawiana zamiast &quot;+&quot;
</TD>
</TR>
<TR>
<TD>
<A NAME="qmqpservers">qmqpservers</A>
</TD>
<TD>
<I>brak</I>
</TD>
<TD>
qmail-qmqpc
</TD>
<TD>
adresy IP serwerów QMQP
</TD>
</TR>
<TR>
<TD>
<A NAME="queuelifetime">queuelifetime</A>
</TD>
<TD>
604800
</TD>
<TD>
qmail-send
</TD>
<TD>
ilo¶æ sekund przez które wiadomo¶æ mo¿e przebywaæ w kolejce
</TD>
</TR>
<TR>
<TD>
<A NAME="rcpthosts">rcpthosts</A>
</TD>
<TD>
<I>brak</I>
</TD>
<TD>
qmail-smtpd
</TD>
<TD>
domeny dla których akceptujemy pocztê lokalnie
</TD>
</TR>
<TR>
<TD>
<A NAME="smtpgreeting">smtpgreeting</A>
</TD>
<TD>
me
</TD>
<TD>
qmail-smtpd
</TD>
<TD>
komunikat powitalny SMTP
</TD>
</TR>
<TR>
<TD>
<A NAME="smtproutes">smtproutes</A>
</TD>
<TD>
<I>brak</I>
</TD>
<TD>
qmail-remote
</TD>
<TD>
routing dla niektórych domen zdefiniowany &quot;rêcznie&quot; przez administratora
</TD>
</TR>
<TR>
<TD>
<A NAME="timeoutconnect">timeoutconnect</A>
</TD>
<TD>
60
</TD>
<TD>
qmail-remote
</TD>
<TD>
jak d³ugo w sekundach czekaæ na po³±czenie SMTP
</TD>
</TR>
<TR>
<TD>
<A NAME="timeoutremote">timeoutremote</A>
</TD>
<TD>
1200
</TD>
<TD>
qmail-remote
</TD>
<TD>
jak d³ugo w sekundach czekaæ na zewnêtrzny serwer
</TD>
</TR>
<TR>
<TD>
<A NAME="timeoutsmtpd">timeoutsmtpd</A>
</TD>
<TD>
1200
</TD>
<TD>
qmail-smtpd
</TD>
<TD>
jak d³ugo czekaæ przy odbieraniu poczty
</TD>
</TR>
<TR>
<TD>
<A NAME="virtualdomains">virtualdomains</A>
</TD>
<TD>
<I>brak</I>
</TD>
<TD>
qmail-send
</TD>
<TD>
wirtualne domeny i u¿ytkownicy
</TD>
</TR>
</TABLE>

<P>W celu uzyskania bardziej szczeóg³owej informacji o poszczególnych plikach control zobacz na stronê manuala po¶wiêcon± modu³owi wymienionemu jako &quot;U¿ywany przez&quot;.</P>
<H2><A NAME="relaying">3.2. Relay'owanie poczty</A></H2>
<H3><A NAME="relaying-intro">3.2.1. Wstêp</A></H3>
<P>Czym jest <I>relay'owanie</I>? Ma ono miejsce wówczas gdy MTA przyjmuje wiadomo¶æ poprzez SMTP która <I>nie zosta³a</I> wys³ana <B>do</B> lokalnego odbiorcy, ani nie pochodzi <B>od</B> lokalnego nadawcy.</P>
<P>W dniach gdy nie by³o jeszcze spamu, MTA zazwyczaj by³y skonfigurowane jako <I>open</I> relays (zezwalaj±ce na relay'owanie poczty): serwery które akceptowa³y pocztê od ka¿dego, dla ka¿dego.</P>
<P>Obecnie wiêkszo¶æ MTA jest skonfigurowana by kompletnie zakazywaæ relay'owania, lub by pozwalaæ jedynie zaufanym u¿ytkownikom i systemom u¿ywania ich jako serwera przekacuj±cego pocztê dalej.</P>
<P>Chris Johnson napisa³ bardzo dobry dokument na ten temat dla u¿ytkowników <I>qmail'a</I>. Zachêcam ciê do zajrzenia na: <A HREF="http://www.palomine.net/qmail/relaying.html">http://www.palomine.net/qmail/relaying.html</A>.</P>
<H3><A NAME="relaying-disabling">3.2.2. Wy³±czanie relay'owania.</A></H3>
<P>Je¶li bêdziesz instalowa³ <I>qmail'a</I> stosuj±c siê do oficjalnych zaleceñ relay'owanie bêdzie wy³±czone. Osi±gamy to poprzez stworzenie pliku <TT>/var/qmail/control/rcpthosts</TT> z domenami wymienionymi w <TT>locals</TT> i <TT>virtualdomains</TT> (hosty lokalne). Nazwa pliku <TT>rcpthosts</TT> wywodzi siê z polecenia SMTP <TT>RCPT</TT> (recipient). W trakcie sesji SMTP RCPT jest u¿ywane by okre¶liæ adres odbiorcy wiadomo¶ci. <TT>rcpthosts</TT> zatem zawiera poprawne nazwy hostów które mog± wyst±piæ po poleceniu RCPT.</P>
<H3><A NAME="relaying-selective">3.2.3. Zezwolenie na selektywne relay'owanie</A></H3>
<P>Wiêkszo¶æ pojedyñczych u¿ytkowników i ma³ych grup roboczych mo¿e wy³±czyæ relay'owanie ca³kowicie. Jednak je¶li musisz obs³ugiwaæ rozproszon± spo³eczno¶æ u¿ytkowników bêdziesz potrzebowa³ znale¼æ sposób by umo¿liwiæ swym i <I>tylko</I> swym u¿ytkownikom na wykorzystywanie twego systemu jako relay. Mo¿na to osi±gn±æ poprzez wykorzystanie <I>tcpserver'a</I> do ustawienia zmiennej ¶rodowiskowej <TT>RELAYCLIENT</TT>, która ka¿e <TT>qmail-smtpd</TT> by ignorowa³ plik <TT>rcpthosts</TT>.</P>
<P>Je¶li bêdziesz kierowa³ siê poni¿szymi wskazówkami wybiórcze relay'owanie bêdzie domy¶lnie w³±czone. By umo¿liwiæ hostowi korzystanie z twego hosta jako relay'a dodaj wpis do <TT>/etc/tcp.smtp</TT> w stylu:</P>
<PRE>
    <I>IP address of client</I>:allow,RELAYCLIENT=&quot;&quot;
</PRE>
<P>I nastêpnie przebuduj bazê danych SMTP poprzez wykonanie:</P>
<PRE>
    tcprules /etc/tcp.smtp.cdb /etc/tcp.smtp.tmp &lt; /etc/tcp.smtp
    chmod 644 /etc/tcp.smtp*
</PRE>
<P>Je¶li kierowa³e¶ siê oficjalnymi wskazówkami Chris Johnson napisa³ kolejny niez³y artyku³ o tym jak skonfigurowaæ <I>qmail'a</I> by zezwala³ na selektywne relay'owanie. Zobacz <A HREF="http://www.palomine.net/qmail/selectiverelay.html">http://www.palomine.net/qmail/selectiverelay.html</A>.</P>
<H2><A NAME="multiple-hostnames">3.3. Hosty o kilku nazwach</A></H2>
<P>Je¶li twój system ma kilka nazw, np. wszystkie adresy postaci <TT><I>user</I>@host1.example.com</TT> mog± byæ tak¿e zapisane jako <TT><I>user</I>@example.com</TT> lub <TT><I>user</I>@mail.example.com</TT> wówczas nale¿y poinformowaæ <I>qmail'a</I>, ¿e wszystkie te nazwy powinny byæ traktowane jako lokalne.</P>
<P>W tym celu dodaj te nazwy do dwóch plików:</P>
<UL>
<LI><TT>rcpthosts</TT>, który ka¿e <TT>qmail-smtpd</TT> akceptowaæ pocztê adresowan± do tych hostów,
<LI><TT>locals</TT>, który mówi <TT>qmail-send</TT> ¿e adresy dotycz±ce tych hostów powinny byæ traktowane jako lokalne.</UL>
<H2><A NAME="virtual-domains">3.4. Domeny wirtualne</A></H2>
<P>Wirtualne domeny s± podobne do hostów o kilku nazwach o których mówili¶my w poprzedniej sekcji. Jednak istnieje kilka istotnych ró¿nic. Po pierwsze je¶li host <TT>example.net</TT> obs³uguje domenê wirtualn± <TT>virtual.example.com</TT> zwykle <B>nie</B> jest prawd±, ¿e wiadomo¶ci wysy³ane do <TT>joe@example.net</TT> zostan± dostarczone do tej samej skrzynki pocztowej co listy s³ane do <TT>joe@virtual.example.com</TT>. Ka¿da domena wirtualna traktowana jest oddzielnie.</P>
<P>W <I>qmail'u</I> domeny wirtualne konfigurowane s± w pliku <TT>virtualdomains</TT>, który sk³ada siê z linii postaci:</P>
<PRE>
    <I>user</I>@<I>domain</I>:<I>prepend</I>
</PRE>
<P><I>qmail</I> konwertuje <TT><I>user</I>@<I>domain</I></TT> na <TT><I>prepend</I>-<I>user</I>@<I>domain</I></TT> i traktuje wynik tak jakby <TT><I>domain</I></TT> by³a lokalna. Sk³adnik <TT><I>user</I>@</TT> jest opcjonalny. Je¶li brakuje go, wówczas linia ta dotyczy <I>wszystkich</I> adresów <TT>@<I>domain</I></TT>.</P>
<P>Wracaj±c do przyk³adowego scenariusza opisanego powy¿ej, je¶li administrator poczty w example.net chce stworzyæ domenê wirtualn± <TT>virtual.example.com</TT> kontrolowan± przez u¿ytkownika o nazwie <TT>john</TT>, wówczas dodaje nastêpuj±c± liniê do pliku <TT>virtualdomains</TT>:</P>
<PRE>
    virtual.example.com:john
</PRE>
<P>Po otrzymaniu wiadomo¶ci adresowanej do <TT>joe@virtual.example.com</TT> qmail zmieni adres odbiorcy na <TT>john-joe@virtual.example.com</TT> i dostarczy j± lokalnie. Sprawd¼ rozdzia³ <A HREF="#dot-qmail-files">.qmail</A> oraz podrozdzia³ <A HREF="#extension-addresses">Adresy rozszerzone</A> w celu uzyskania wiêkszej ilo¶ci informacji o tym jak u¿ytkownik john mo¿e zarz±dzaæ swoj± wirtualn± domen±.</P>
<P>Podobnie jak z hostami o kilku nazwach wszystkie domeny wirtualne musz± byæ umieszczone w <TT>rcpthosts</TT> po to by <I>qmail-smtpd</I> wiedzia³, ¿e ma akceptowaæ wiadomo¶ci adresowane do nich. Ró¿nic± jest to, ¿e <B>nie nale¿y</B> ich dodawaæ do pliku <TT>locals</TT>.</P>
<P>Po zmianie <TT>virtualdomains</TT>, wy¶lij sygna³ (hangup) <TT>HUP</TT> by <I>qmail</I> przeczyta³ ponownie ten plik. Je¶li masz <TT>qmailctl</TT>, mo¿esz zrobiæ:</P>
<PRE>
    qmailctl reload
</PRE>
<P>Nie zapomnij by dodawaæ domeny wirtualne tak¿e do <TT>rcpthosts</TT>.</P>

<P><HR WIDTH="80%" ALIGN="Left">
<STRONG>Uwaga: </STRONG>Na serwerze DNS nale¿y zdefiniowaæ odpowiednie rekordy MX (mail exchanger) tak by listy kierowane do domen wirtualnych trafia³y do odpowiedniego serwera poczty. Zadanie to nale¿y do administratora serwera nazw i wybiega poza zakres tego dokumentu.
<HR WIDTH="80%" ALIGN="Left"></P>
<H2><A NAME="aliases">3.5. Aliasy</A></H2>
<P>Dzia³anie aliasów w <I>qmail'u</I> w naturalny sposób wynika ze sposobu w jaki dostarcza on wiadomo¶ci lokalne. <TT>qmail-local</TT> próbuje dostarczyæ wiadomo¶æ adresowan± do <TT><I>localpart</I>@host</TT> do lokalnego u¿ytkownika o nazwie <TT><I>localpart</I></TT> Je¶li u¿ytkownik taki nie istnieje wiadomo¶æ jest dostarczana do u¿ytkownika <TT>alias</TT>. Jest to pseudo-u¿ytkownik zdefiniowany we wszystkich systemach na których dzia³a <I>qmail</I>. Jego katalogiem domowym jest <TT>/var/qmail/alias</TT>.</P>
<P>Na przyk³ad je¶li chcesz stworzyæ alias dla nazwy <TT>info@example.com</TT>, który bêdzie kierowa³ wiadomo¶ci do u¿ytkownika o nazwie <TT>tom</TT> napisz jako <TT>root</TT>:</P>
<PRE>
    echo \&amp;tom &gt; /var/qmail/alias/.qmail-info
</PRE>
<P>Rozdzia³ <TT><A HREF="#dot-qmail-files">.qmail</A></TT> opisuje jak tworzyæ pliki <TT>.qmail</TT> definiuj±ce aliasy i co robiæ z wiadomo¶ciami s³anymi na do nich.</P>
<P>Zauwa¿, ¿e sposób w jaki alias'y zosta³y zaimplementowane w <I>qmail'u</I> alias nigdy nie jest w stanie przeszkodziæ w dostarczaniu poczty u¿ytkownikowi o tej samej nazwie. Przyk³adowo je¶li istnieje u¿ytkownik <TT>rachel</TT> <TT>~alias/.qmail-rachel</TT> nie zostanie nigdy u¿yty.</P>
<P>Pakiet <I><A HREF="#fastforward">fastforward</A></I> umo¿liwia zastosowanie alternatywnego sposobu dostarczania poczty, w którym wszystkie aliasy s± zdefiniowane w jednym pliku kompatybilnym z <I>Sendmailow'a</I> baz± aliasów.</P>
<P>Nastêpny rozdzia³ qmail-users opisuje inny mechanizm którego mo¿na u¿yc w celu implementacji aliasów.</P>
<H2><A NAME="qmail-users">3.6. qmail-users</A></H2>
<P>qmail-users jest sposobem ustalania adresów dla u¿ytkowników. Pliki konfiguracyjne znajduj± siê w <TT>/var/qmail/users</TT>. Plik ten jest tabel± przypisañ. Istniej± dwa rodzaje przypisañ: proste i z³o¿one.</P>
<P><HR WIDTH="80%" ALIGN="Left">
<STRONG>Uwaga: </STRONG><TT>/var/qmail/users</TT> sk³ada siê z serii przypisañ, jedno w linii, zakoñczonych przez liniê zawieraj±c± pojedyñcz± kropkê (.). Je¶li tworzysz <TT>przypisanie</TT> rêcznie nie zapomnij o linii zawieraj±cej kropkê.
<HR WIDTH="80%" ALIGN="Left"></P>
<H3><A NAME="simple-assignment">3.6.1. Proste przypisania</A></H3>
<P>Proste przypisanie wygl±da jak:</P>
<PRE>
=<I>address</I>:<I>user</I>:<I>uid</I>:<I>gid</I>:<I>directory</I>:<I>dash</I>:<I>extension</I>:
</PRE>
<P>Powoduje ono, ¿e wiadomo¶æ nades³ana na adres <I>address</I> bêdzie dostarczona dla u¿ytkownika <I>user</I> o okre¶lonym <I>uid</I> i <I>gid</I> tak jak to okre¶lono w pliku <TT><I>directory</I>/.qmail<I>dash</I><I>extension</I></TT></P>
<H3><A NAME="wildcard-assignment">3.6.2. Z³o¿one przypisania</A></H3>
<P>Z³o¿one przypisanie wygl±da tak:</P>
<PRE>
+<I>prefix</I>:<I>user</I>:<I>uid</I>:<I>gid</I>:<I>directory</I>:<I>dash</I>:<I>prepend</I>:
</PRE>
<P>Oznacza ono, ¿e poczta otrzymana na adres postaci <I>prefix</I><I>rest</I> zostanie dostarczona dla u¿ytkownika <I>user</I> o okre¶lonym <I>uid</I> i <I>gid</I>, a plik <TT><I>directory</I>/.qmail<I>dash</I><I>prepend</I><I>rest</I></TT> okre¶li jak powinna byæ dostarczona.</P>
<H3><A NAME="qmail-user-programs">3.6.3. Programy qmail-user</A></H3>
<P>qmail-user zawiera dwa pomocnicze programy: <TT>qmail-newu</TT> i <TT>qmail-pw2u</TT>.</P>
<P><TT>qmail-newu</TT> przetwarza plik <TT>przypisania</TT> i generuje plik bazy danych (CDB) o nazwie <TT>cdb</TT> w <TT>/var/qmail/users</TT>. CDB jest formatem binarnym, który jest ³atwo dostêpny dla <TT>qmail-lspawn</TT> nawet je¶li plik ten zawiera tysi±ce przypisañ.</P>
<P><TT>qmail-pw2u</TT> konwertuje systemow± bazê danych o u¿ytkownikach <TT>/etc/passwd</TT> w seriê plików przypisañ. <TT>qmail-pw2u</TT> u¿ywa kilku plików na podstawie których modyfikuje sposób konwersji.</P>
<UL>
<LI><TT>include</TT>: u¿ytkownicy których nale¿y konwertowaæ
<LI><TT>exclude</TT>: u¿ytkownicy których nie nale¿y konwertowaæ
<LI><TT>mailnames</TT>: alternatywne adresy pocztowe dla u¿ytkowników
<LI><TT>subusers</TT>: dodatkowe adresy obs³ugiwane przez u¿ytkownika z opcjonalnym rozszerzeniem <TT>.qmail</TT>
<LI><TT>append</TT>: ró¿ne przypisania</UL>
<P><HR WIDTH="80%" ALIGN="Left">
<STRONG>Uwaga: </STRONG>Je¶li u¿ywasz <TT>qmail-pw2u</TT> nie zapomnij uruchomiæ <TT>qmail-pw2u</TT> i <TT>qmail-newu</TT> gdy dodajesz, usuwasz, zmieniasz UID lub GID u¿ytkownika. Zwykle bêdzie to wyglada³o tak:
<PRE>
    qmail-pw2u &lt;/etc/passwd &gt;/var/qmail/users/assign
    qmail-newu
</PRE>
<HR WIDTH="80%" ALIGN="Left"></P>
<H2><A NAME="spam">3.7. Walka ze spamem.</A></H2>
<P>Chris Hardie napisa³ dobre Anti-Spam HOWTO. Mo¿na je znale¼æ na <A HREF="http://www.summersault.com/chris/techno/qmail/qmail-antispam.html">http://www.summersault.com/chris/techno/qmail/qmail-antispam.html</A>.</P>
<H2><A NAME="viruses">3.8. Wirusy</A></H2>
<P>Jason Haar napisa³ Qmail-Scanner, program przeszukuj±cy maile w poszukiwaniu wirusów dla <I>qmail'a</I>. Zob. <A HREF="http://qmail-scanner.sourceforge.net/">http://qmail-scanner.sourceforge.net/</A> by dowiedzieæ siê wiêcej.</P>              
<P>Qmail-Scanner posiada wbudowany prosty skaner, jednak do powa¿niejszych zastosowañ nale¿y u¿yæ oddzielnego skanera albo jednego z komercyjnych albo darmowego Tomasza Kojma Clam Antivirus scanner, dostêpnego pod adresem <A HREF="http://clamav.elektrapro.com/">http://clamav.elektrapro.com/</A>.</P>
<HR>
<H1><A NAME="usage">4. U¿ywanie qmail'a</A></H1>
<P>Ten rozdzia³ opisuje u¿ywanie <I>qmail'a</I> przez zwyk³ego u¿ytkownika. Je¶li odbierasz lub wysy³asz poczte za po¶rednictwem <I>qmail'a</I> znajdziesz tu po¿yteczne informacje.</P>
<H2><A NAME="dot-qmail-files">4.1. Pliki <TT>.qmail</TT></A></H2>
<P>Dostarczanie poczty jest zwykle kontrolowane przez jeden lub wiêcej plików &quot;.qmail&quot; w katalogu domowym u¿ytkownika. S± to pliki z nazwami rozpoczynaj±cymi sie na <TT>.qmail</TT>. Strona man <TT>dot-qmail</TT> opisuje zastosowanie plików <TT>.qmail</TT>.</P>
<P>Pliki te sk³adaj± siê z poleceñ okre¶laj±cych jak poczta ma byæ dostarczona. Jedno polecenie na liniê. Pierwsze znak w linii oznacza typ dostarczania poczty jaki ma nast±piæ:</P>
<TABLE CLASS="columns" BORDER>
<TR CLASS="heading">
<TD>
<STRONG>Znak</STRONG>
</TD>
<TD>
<STRONG>Typ Dostarczania</STRONG>
</TD>
<TD>
<STRONG>Warto¶æ</STRONG>
</TD>
</TR>
<TR>
<TD>
#
</TD>
<TD>
¿aden <I>(komentarz)</I>
</TD>
<TD>
ignorowana
</TD>
</TR>
<TR>
<TD>
|
</TD>
<TD>
program
</TD>
<TD>
komenda do uruchomienia przez shell
</TD>
</TR>
<TR>
<TD>
/ lub .
</TD>
<TD>
mbox <I>(je¶li ostatni znak nie jest /)</I>
</TD>
<TD>
¶cie¿ka do mbox <I>(razem z / lub .)</I>
</TD>
</TR>
<TR>
<TD>
/ lub .
</TD>
<TD>
maildir <I>(je¶li ostatni znak jest /)</I>
</TD>
<TD>
¶cie¿ka do maildir <I>(razem z / lub .)</I>
</TD>
</TR>
<TR>
<TD>
&amp;
</TD>
<TD>
forward
</TD>
<TD>
adres gdzie ma byæ przes³ana wiadomo¶æ
</TD>
</TR>
<TR>
<TD>
litera lub liczba
</TD>
<TD>
forward
</TD>
<TD>
adres gdzie ma byæ przes³ana wiadomo¶æ <I>razem z pierwszym znakiem</I>
</TD>
</TR>
</TABLE>

<H3><A NAME="program-delivery">4.1.1. dostarczanie poczty poprzez inny program</A></H3>
<P>Gdy <I>qmail</I> napotyka instrukcjê nakazuj±c± uruchomienie programu, uruchamia on shell <TT>(/bin/sh)</TT> w celu wykonania komendy i kieruje nadchodz±c± wiadomo¶æ na standardowe wej¶cie uruchamianego programu. Strona man <TT>qmail-command</TT> dokumentuje szczegó³y tego procesu.</P>
<P>Opcja uruchomienia programu stwarza wiele mo¿liwo¶ci i mo¿e byæ u¿yta do zaimplementowania wielu zastosowañ takich jak filtrowanie wiadomo¶ci, automatyczne odpowiadanie na wiadomo¶ci oraz ich dostarczanie poprzez inne programy takie jak <I>procmail</I>.</P>
<P>np.:</P>
<PRE>
    |preline /usr/ucb/vacation djb
</PRE>
<P>Powoduje, ze <I>qmail</I> uruchamia <TT>preline</TT>, które dostaje <TT>/usr/ucb/vacation</TT> i <TT>djb</TT> jako argumenty oraz kopie wiadomo¶ci na wej¶ciu standardowym.</P>
<H3><A NAME="mbox-delivery">4.1.2. dostarczanie poczty do skrzynki mbox</A></H3>
<P>&quot;mbox&quot; oznacza standardowy format skrzynki pocztowej w systemach unix'owych, w którym wiadomo¶ci przechowywane s± w pojedyñczym pliku. Ka¿da wiadomo¶æ zaczyna sie od linii &quot;<TT>From </TT>&quot;. Wygl±da ona jak pole nag³ówka, ale nim nie jest: jest to po prostu co¶ co program rozsy³aj±cy pocztê dodaje aby programy odczytuj±ce j± by³y w stanie zorientowaæ siê od którego miejsca zaczyna siê nowy list.</P>
<P>np.:</P>
<PRE>
    ./Mailbox
</PRE>
<P>Spowoduje to do³±czanie nowych wiadomo¶ci do pliku <TT>$HOME/Mailbox</TT>. Ka¿da z nich bêdzie zaczyna³a siê od linii &quot;<TT>From </TT>&quot;. Skrzynka pocztowa typu mbox czêsto wygl±da podobnie do:</P>
<PRE>
    From user1@example.net Thu May 13 18:34:50 1999
    Received: (qmail 1287205 invoked from network); 13 May 1999 18:34:49 -0000
    From: user1@example.net
    To: user2@example.com
    Subject: hey

    What's up?
</PRE>
<P>Pierwsza linia zosta³a dodana przez <I>qmail'a</I> po odebraniu wiadomo¶ci.</P>
<H3><A NAME="maildir-delivery">4.1.3. dostarczanie poczty do skrzynki maildir</A></H3>
<P>&quot;maildir&quot; jest formatem skrzynki pocztowej stworzonym przez Dan'a Bernstein'a w celu wyeliminowania pewnych niedogodno¶ci zwi±zanych ze standardowym typem skrzynki pocztowej jakim jest mbox. Skrzynka maildir jest katalogiem, w którego sk³ad wchodz± trzy podkatalogi <TT>new</TT>, <TT>cur</TT> i <TT>tmp</TT>. Ka¿da wiadomo¶æ w skrzynce jest oddzielnym plikiem w jednym z podkatalogów. W zale¿no¶ci od jej statusu znajduje siê ona w podkatalogu: <TT>new</TT> je¶li jest wiadomo¶ci± jeszcze nieprzeczytan±, <TT>cur</TT> je¶li jest wiadomo¶ci± przeczytan± i <TT>tmp</TT> je¶li jest wiadomo¶ci± która jest w³a¶nie dostarczana. Strona podrêcznika <TT>maildir</TT> dok³adnie opisuje format maildir.</P>
<P>Jedn± z korzy¶ci pos³ugiwania siê tym formatem skrzynki jest to, i¿ mimo ¿e nie u¿ywa siê tutaj zajmowania plików w celu zapobiegniêcia jednoczesnej zmianie tej samej wiadomo¶ci poprzez kilka programów jest to format wiarygodny. Oznacza to, ¿e skrzynki postaci maildir mog± byæ bezpiecznie u¿ywane w systemach plików zamontowanych poprzez NFS.</P>
<P>np.:</P>
<PRE>
    ./Maildir/
</PRE>
<P>Powoduje, ze wiadomo¶ci bêd± zapisywane w <TT>$HOME/Maildir</TT> w formacie maildir skrzynki pocztowej.</P>
<P><HR WIDTH="80%" ALIGN="Left">
<STRONG>Uwaga: </STRONG><TT>qmail-local</TT> dostarcza pocztê do skrzynek w formacie maildir ale nie potrafi ich utworzyæ. Do tego celu s³u¿y program <TT>maildirmake</TT> zawarty w pakiecie <I>qmail'a</I>. np.: &quot;<TT>maildirmake ~/Maildir</TT>&quot;. Upewnij siê ¿eby uruchomiæ maildirmake jako w³a¶ciciel katalogu maildir <B>nie</B> jako root. Byæ mo¿e polecenie
useradd lub adduser w twym systemie wspiera katalog &quot;skeleton&quot; np. <TT>/etc/skel</TT> wówczas móg³by¶ stworzyæ maildir który bêdzie skopiowany dla wszystkich nowych userów. 
<HR WIDTH="80%" ALIGN="Left"></P>
<H3><A NAME="forward-delivery">4.1.4. forwardowanie poczty</A></H3>
<P>Forward powoduje, ¿e wiadomo¶ci s± przesy³ane na okre¶lony adres. Adres okre¶lony w pliku <TT>.qmail</TT> nie mo¿e zawieraæ komentarza, ani dodatkowych spacji.</P>
<P>Oto przyk³ady <B>b³ednych</B> wpisów:</P>
<PRE>
    &amp;&lt;user@example.com&gt;
    &amp; user@example.com
    &amp;Joe User &lt;user@example.com&gt;
</PRE>
<P>A to przyk³ady poprawnych:</P>
<PRE>
    &amp;user@example.com
    user@example.com
    &amp;user
</PRE>
<P>Pierwsze dwa przyk³ady spowoduj±, ¿e wiadomo¶æ zostanie dostarczona do <TT>user@example.com</TT>. Ostatni wy¶le pocztê do lokalnego u¿ytkownika <TT>user</TT>.</P>
<H3><A NAME="extension-addresses">4.1.5. Rozszerzone adresy</A></H3>
<P><I>qmail</I> umo¿liwia rozszerzanie adresów kontrolowanych przez u¿ytkownika. U¿ytkownik <TT><I>username</I>@<I>hostname</I>.<I>domain</I></TT> mo¿e otrzymywaæ tak¿e pocztê dla <TT><I>username</I>-<I>extension</I>@<I>hostname</I>.<I>domain</I></TT>. W dalszej czê¶ci tego podrozdzia³u nie bêdê dodawa³ czê¶ci adresu &quot;@<I>hostname</I>.<I>domain</I>&quot; poniewa¿ mówimy o dzia³aniach odnosz±cych siê do hosta lokalnego.</P>
<P>Instrukcje dostarczenia poczty dla <TT><I>username</I>-<I>extension</I></TT> znajduj± siê w <TT>~<I>username</I>/.qmail-<I>extension</I></TT>.</P>
<P>Przyk³adowo <TT>dave-lwq@sparge.example.com</TT> jest kontrolowane przez <TT>~dave/.qmail-lwq</TT> na ho¶cie sparge.</P>
<P>Rozszerzenia mog± mieæ kilka pól, np. <TT>dave-list-qmail</TT> kontrolowane przez <TT>~dave/.qmail-list-qmail</TT>. W tym przyk³adzie <TT>dave-list-qmail</TT> jest adresem listy dyskusyjnej o qmail'u, za¶ <TT>~dave/.qmail-list-qmail</TT> odpowiada za umieszczenie wiadomo¶ci z grupy dyskusyjnej w oddzielnej skrzynce pocztowej.</P>
<P>Zakres dzia³ania plików <TT>.qmail</TT> mo¿e byæ <TT>zwiêkszany</TT> przez u¿ycie <TT>-default</TT>. Zatem <TT>dave-list-qmail</TT> mo¿e byæ tak¿e obs³ugiwany poprzez <TT>~dave/.qmail-list-default</TT>. Umo¿liwia to plik <TT>.qmail</TT> obs³uguj±cy wszystkie adresy postaci <TT>dave-list-<I>cokolwiek</I></TT>. Zauwa¿, ¿e <TT>dave-list</TT> nie bêdzie obs³u¿ony przez <TT>~dave/.qmail-list-default</TT> poniewa¿ brakuje w nim &quot;-&quot; po &quot;list&quot;.</P>
<P><I>qmail</I> u¿ywa najlepszego pasuj±cego wzorca. Przyk³adowo je¶li nadchodzi wiadomo¶æ adresowana do <TT>dave-list-qmail</TT> u¿yje on pierwszego z poni¿szych adresów:</P>
<PRE>
    .qmail-list-qmail
    .qmail-list-default
    .qmail-default
</PRE>
<P>Je¶li ¿aden z plików <TT>.qmail</TT> nie zostaje znaleziony dostarczanie nie uda³o siê i wiadomo¶æ zostaje odes³ana do nadawcy.</P>
<H2><A NAME="sending-messages">4.2. Wysy³anie wiadomo¶ci</A></H2>
<P>U¿ytkownicy poczty zwykle nie u¿ywaj± MTA bezpo¶rednio do wysy³ania listów. Zwykle wiadomo¶ci s± pisane i wysy³ane przy u¿yciu MUA (programu do komponowania wiadomo¶ci) takiego jak <I>pine</I> lub <I>mutt</I>, który sam wywo³uje MTA w celu wys³ania listu. Proces dostarczania listu do MTA nazywa siê umieszczaniem (ang. injection).</P>
<P>Istniej± dwa sposoby umieszczenia wiadomo¶ci w MTA: poprzez SMTP albo przy u¿yciu programu dostarczonego przez MTA w tym celu.</P>
<H3><A NAME="smtp">4.2.1. SMTP</A></H3>
<P>MUA mo¿e otworzyæ po³±czenie poprzez protokó³ TCP do standardowego portu SMTP na lokalnym ho¶cie lub na dedykowanym serwerze. Port ten nosi numer 25. Nastêpnie MUA i MTA rozpoczynaj± dialog, którego efektem jest:</P>
<UL>
<LI>przekazanie wiadomo¶ci do MTA, lub
<LI>kod b³êdu jest zwracany do MUA</UL>
<P>SMTP nie ma mechanizmu autentykacji, zatem ani nazwa u¿ytkownika, ani has³o nie s± wymagane w celu przes³ania wiadomo¶ci. Jednak¿e wiele MUA odmawia przyjêcia wiadomo¶ci, które nie s± wysy³ane do lub od lokalnego u¿ytkownika. Je¶li prawid³owa wiadomo¶æ jest odrzucana zwykle ma to zwi±zek z restrykcjami dotycz±cymi relayowania (przesy³ania) poczty. Zobacz rozdzia³ <A HREF="#relaying">Relay'owanie poczty</A> w celu uzyskania wiêkszej ilo¶ci informacji o konfigurowaniu relayowania.</P>
<H3><A NAME="/var/qmail/bin/sendmail">4.2.2. <TT>/var/qmail/bin/sendmail</TT></A></H3>
<P>Przez wiele lat <I>Sendmail</I> by³ jedynym MTA w ¶wiecie UNIX'ów. By³ on tak wszechobecny, ¿e wielu programistów uto¿samia³o nazwê Sendmail z MTA. W efekcie mechanizm umieszczania wiadomo¶ci w MTA zastosowany w <I>Sendmail'u</I> sta³ siê standardem. <I>qmail</I> i inne MTA u¿ywaj± programu o nazwie <TT>sendmail</TT> który dzia³a tak samo jak prawdziwy <I>sendmail</I> w trakcie umieszczania wiadomo¶ci w MTA.</P>
<P>Program <TT>sendmail</TT> u¿ywany przez <I>qmail'a</I> znajduje siê w <TT>/var/qmail/bin/sendmail</TT>. Zastêpuje on <I>Sendmail'a</I> na systemach <I>qmail'owych</I>, który zwykle znajduje siê w:</P>
<UL>
<LI>/usr/lib/sendmail
<LI>/usr/bin/sendmail</UL>
<P>W systemie z zainstalowanym <I>qmail'em</I> polecenie &quot;<TT>ls -l <I>¶cie¿ka-do-sendmaila</I></TT>&quot; powinno pokazaæ, ¿e <TT>sendmail</TT> jest symbolicznym linkiem do <TT>/var/qmail/bin/sendmail</TT></P>
<PRE>
  $ ls -l /usr/lib/sendmail
  lrwxrwxrwx   1 root     root           29 Feb 19 11:04 /usr/lib/sendmail -&gt; /var/qmail/bin/sendmail
</PRE>
<P>Strona man <TT>sendmail</TT> w pakiecie <I>qmail'a</I> opisuje jak u¿ywaæ tego programu.</P>
<H3><A NAME="qmail-inject">4.2.3. <TT>qmail-inject</TT></A></H3>
<P>Oprócz emulowania sposobu w jaki <TT>sendmail</TT> umieszcza pocztê <I>qmail</I> ma swoj w³asny program s³u¿±cy do tego celu: <TT>qmail-inject</TT>. Tak naprawdê to <TT>sendmail</TT> jest po prostu nak³adk± na <TT>qmail-inject</TT>.</P>
<P><TT>sendmail</TT> jest standardem zatem jest znacznie szerzej rozpowszechniony. <TT>qmail-inject</TT> dzia³a tylko na systemach z zainstalowanym qmail'em, mimo to wysy³anie poczty przebiega podobnie.</P>
<P>Przyk³adowo w celu wys³ania pustej wiadomo¶ci do <TT>joe@example.com</TT>:</P>
<PRE>
 echo To: joe@example.com | /var/qmail/bin/qmail-inject
</PRE>
<H2><A NAME="environment-variables">4.3. Zmienne ¶rodowiskowe</A></H2>
<P>Niektóre podprogramy <I>qmail'a</I> ustawiaj± lub u¿ywaj± zmiennych ¶rodowiskowych. Poni¿sza tabela przedstawia te zmienne i opisuje ich zastosowanie.</P>
<TABLE CLASS="columns" BORDER>
<TR CLASS="heading">
<TD>
<STRONG>Nazwa</STRONG>
</TD>
<TD>
<STRONG>Strona man</STRONG>
</TD>
<TD>
<STRONG>Ustaw lub u¿yj</STRONG>
</TD>
<TD>
<STRONG>Zastosowanie</STRONG>
</TD>
</TR>
<TR>
<TD>
<A NAME="DATABYTES">DATABYTES</A>
</TD>
<TD>
<TT>qmail-smtpd</TT>
</TD>
<TD>
u¿yj
</TD>
<TD>
zastêpuje <TT>control/databytes</TT>
</TD>
</TR>
<TR>
<TD>
<A NAME="DEFAULT">DEFAULT</A>
</TD>
<TD>
<TT>qmail-command</TT>
</TD>
<TD>
ustaw
</TD>
<TD>
czê¶æ adresu pasuj±c± do &quot;-default&quot; w nazwie pliku <TT>.qmail</TT>
</TD>
</TR>
<TR>
<TD>
<A NAME="DTLINE">DTLINE</A>
</TD>
<TD>
<TT>qmail-command</TT>
</TD>
<TD>
ustaw
</TD>
<TD>
pole nag³ówka Delivered-To
</TD>
</TR>
<TR>
<TD>
<A NAME="EXT">EXT</A>
</TD>
<TD>
<TT>qmail-command</TT>
</TD>
<TD>
ustaw
</TD>
<TD>
rozszerzenie adresu
</TD>
</TR>
<TR>
<TD>
<A NAME="EXT2">EXT2</A>
</TD>
<TD>
<TT>qmail-command</TT>
</TD>
<TD>
ustaw
</TD>
<TD>
czê¶æ rozszerzenia <TT>EXT</TT> nastêpuj±c± po pierwszym &quot;-&quot;
</TD>
</TR>
<TR>
<TD>
<A NAME="EXT3">EXT3</A>
</TD>
<TD>
<TT>qmail-command</TT>
</TD>
<TD>
ustaw
</TD>
<TD>
czê¶æ rozszerzenia <TT>EXT</TT> nastêpuj±c± po drugim &quot;-&quot;
</TD>
</TR>
<TR>
<TD>
<A NAME="EXT4">EXT4</A>
</TD>
<TD>
<TT>qmail-command</TT>
</TD>
<TD>
ustaw
</TD>
<TD>
czê¶æ rozszerzenia <TT>EXT</TT> nastêpuj±c± po trzecim &quot;-&quot;
</TD>
</TR>
<TR>
<TD>
<A NAME="HOME">HOME</A>
</TD>
<TD>
<TT>qmail-command</TT>
</TD>
<TD>
ustaw
</TD>
<TD>
katalog domowy u¿ytkownika
</TD>
</TR>
<TR>
<TD>
<A NAME="HOST">HOST</A>
</TD>
<TD>
<TT>qmail-command</TT>
</TD>
<TD>
ustaw
</TD>
<TD>
<I>domenow±</I> czê¶æ adresu odbiorcy
</TD>
</TR>
<TR>
<TD>
<A NAME="HOST2">HOST2</A>
</TD>
<TD>
<TT>qmail-command</TT>
</TD>
<TD>
ustaw
</TD>
<TD>
czê¶æ <TT>HOST</TT> poprzedzaj±c± ostatni± kropkê
</TD>
</TR>
<TR>
<TD>
<A NAME="HOST3">HOST3</A>
</TD>
<TD>
<TT>qmail-command</TT>
</TD>
<TD>
ustaw
</TD>
<TD>
czê¶æ <TT>HOST</TT> poprzedzaj±c± przedostatni± kropkê
</TD>
</TR>
<TR>
<TD>
<A NAME="HOST4">HOST4</A>
</TD>
<TD>
<TT>qmail-command</TT>
</TD>
<TD>
ustaw
</TD>
<TD>
czê¶æ <TT>HOST</TT> poprzedzaj±c± przed-przedostatni± kropkê
</TD>
</TR>
<TR>
<TD>
<A NAME="LOCAL">LOCAL</A>
</TD>
<TD>
<TT>qmail-command</TT>
</TD>
<TD>
ustaw
</TD>
<TD>
<I>lokalna</I> czê¶æ adresu odbiorcy
</TD>
</TR>
<TR>
<TD>
<A NAME="LOGNAME">LOGNAME</A>
</TD>
<TD>
<TT>qmail-inject</TT>
</TD>
<TD>
u¿yj
</TD>
<TD>
nazwy u¿ytkownika z pola From nag³ówka (4)
</TD>
</TR>
<TR>
<TD>
<A NAME="MAILHOST">MAILHOST</A>
</TD>
<TD>
<TT>qmail-inject</TT>
</TD>
<TD>
u¿yj
</TD>
<TD>
nazwy hosta z pola From nag³ówka (2)
</TD>
</TR>
<TR>
<TD>
<A NAME="MAILNAME">MAILNAME</A>
</TD>
<TD>
<TT>qmail-inject</TT>
</TD>
<TD>
u¿yj
</TD>
<TD>
nazwiska osoby z pola From nag³ówka (2)
</TD>
</TR>
<TR>
<TD>
<A NAME="MAILUSER">MAILUSER</A>
</TD>
<TD>
<TT>qmail-inject</TT>
</TD>
<TD>
u¿yj
</TD>
<TD>
nazwy u¿ytkownika z pola From nag³ówka (2)
</TD>
</TR>
<TR>
<TD>
<A NAME="NAME">NAME</A>
</TD>
<TD>
<TT>qmail-inject</TT>
</TD>
<TD>
u¿yj
</TD>
<TD>
nazwy osoby z pola From nag³ówka (3)
</TD>
</TR>
<TR>
<TD>
<A NAME="NEWSENDER">NEWSENDER</A>
</TD>
<TD>
<TT>qmail-command</TT>
</TD>
<TD>
ustaw
</TD>
<TD>
adres u¿ytkownika który forwarduje pocztê (zob. &quot;man dot-qmail&quot;)
</TD>
</TR>
<TR>
<TD>
<A NAME="QMAILDEFAULTDOMAIN">QMAILDEFAULTDOMAIN</A>
</TD>
<TD>
<TT>qmail-inject</TT>
</TD>
<TD>
u¿yj
</TD>
<TD>
zastêpuje <TT>control/defaultdomain</TT>
</TD>
</TR>
<TR>
<TD>
<A NAME="QMAILDEFAULTHOST">QMAILDEFAULTHOST</A>
</TD>
<TD>
<TT>qmail-inject</TT>
</TD>
<TD>
u¿yj
</TD>
<TD>
zastêpuje <TT>control/defaulthost</TT>
</TD>
</TR>
<TR>
<TD>
<A NAME="QMAILHOST">QMAILHOST</A>
</TD>
<TD>
<TT>qmail-inject</TT>
</TD>
<TD>
u¿yj
</TD>
<TD>
nazwy hosta z pola From nag³ówka (1)
</TD>
</TR>
<TR>
<TD>
<A NAME="QMAILIDHOST">QMAILIDHOST</A>
</TD>
<TD>
<TT>qmail-inject</TT>
</TD>
<TD>
u¿yj
</TD>
<TD>
zastêpuje <TT>control/idhost</TT>
</TD>
</TR>
<TR>
<TD>
<A NAME="QMAILINJECT">QMAILINJECT</A>
</TD>
<TD>
<TT>qmail-inject</TT>
</TD>
<TD>
u¿yj
</TD>
<TD>
ró¿nych opcji (zob. nastêpna tabela)
</TD>
</TR>
<TR>
<TD>
<A NAME="QMAILMFTFILE">QMAILMFTFILE</A>
</TD>
<TD>
<TT>qmail-inject</TT>
</TD>
<TD>
u¿yj
</TD>
<TD>
plik zawieraj±cy spis adresów pocztowych w celu wygenerowania Mail-Followup-To
</TD>
</TR>
<TR>
<TD>
<A NAME="QMAILNAME">QMAILNAME</A>
</TD>
<TD>
<TT>qmail-inject</TT>
</TD>
<TD>
u¿yj
</TD>
<TD>
nazwiska z pola From nag³ówka (1)
</TD>
</TR>
<TR>
<TD>
<A NAME="QMAILPLUSDOMAIN">QMAILPLUSDOMAIN</A>
</TD>
<TD>
<TT>qmail-inject</TT>
</TD>
<TD>
u¿yj
</TD>
<TD>
zastêpuje <TT>control/plusdomain</TT>
</TD>
</TR>
<TR>
<TD>
<A NAME="QMAILSHOST">QMAILSHOST</A>
</TD>
<TD>
<TT>qmail-inject</TT>
</TD>
<TD>
u¿yj
</TD>
<TD>
nazwy hosta w adresie nadawcy na kopercie
</TD>
</TR>
<TR>
<TD>
<A NAME="QMAILSUSER">QMAILSUSER</A>
</TD>
<TD>
<TT>qmail-inject</TT>
</TD>
<TD>
u¿yj
</TD>
<TD>
nazwy u¿ytkownika w adresie nadawcy na kopercie
</TD>
</TR>
<TR>
<TD>
<A NAME="QMAILUSER">QMAILUSER</A>
</TD>
<TD>
<TT>qmail-inject</TT>
</TD>
<TD>
u¿yj
</TD>
<TD>
nazwy u¿ytkownika z pola From nag³ówka (1)
</TD>
</TR>
<TR>
<TD>
<A NAME="RECIPIENT">RECIPIENT</A>
</TD>
<TD>
<TT>qmail-command</TT>
</TD>
<TD>
ustaw
</TD>
<TD>
adres odbiorcy na kopercie
</TD>
</TR>
<TR>
<TD>
<A NAME="RELAYCLIENT">RELAYCLIENT</A>
</TD>
<TD>
<TT>qmail-smtpd</TT>
</TD>
<TD>
u¿yj
</TD>
<TD>
zignoruj <TT>control/rcpthosts</TT> i dopisz warto¶æ do adresu odbiorcy
</TD>
</TR>
<TR>
<TD>
<A NAME="RPLINE">RPLINE</A>
</TD>
<TD>
<TT>qmail-command</TT>
</TD>
<TD>
ustaw
</TD>
<TD>
pole nag³ówka Return-Path
</TD>
</TR>
<TR>
<TD>
<A NAME="SENDER">SENDER</A>
</TD>
<TD>
<TT>qmail-command</TT>
</TD>
<TD>
ustaw
</TD>
<TD>
adres nadawcy na kopercie
</TD>
</TR>
<TR>
<TD>
<A NAME="UFLINE">UFLINE</A>
</TD>
<TD>
<TT>qmail-command</TT>
</TD>
<TD>
ustaw
</TD>
<TD>
liniê From w formacie UUCP
</TD>
</TR>
<TR>
<TD>
<A NAME="USER">USER</A>
</TD>
<TD>
<TT>qmail-command</TT>
</TD>
<TD>
ustaw
</TD>
<TD>
bie¿±cego u¿ytkownika
</TD>
</TR>
<TR>
<TD>
<A NAME="USER">USER</A>
</TD>
<TD>
<TT>qmail-inject</TT>
</TD>
<TD>
u¿yj
</TD>
<TD>
nazwy u¿ytkownika z pola From nag³ówka (3)
</TD>
</TR>
</TABLE>

<TABLE CLASS="columns" BORDER>
<CAPTION ALIGN=top>Parametry QMAILINJECT</CAPTION>
<TR CLASS="heading">
<TD>
<STRONG>Litera</STRONG>
</TD>
<TD>
<STRONG>Znaczenie</STRONG>
</TD>
</TR>
<TR>
<TD>
c
</TD>
<TD>
u¿ywaj stylu address-comment w polu From
</TD>
</TR>
<TR>
<TD>
s
</TD>
<TD>
zignoruj pole Return-Path
</TD>
</TR>
<TR>
<TD>
f
</TD>
<TD>
skasuj pole From
</TD>
</TR>
<TR>
<TD>
i
</TD>
<TD>
skasuj pole Message-ID
</TD>
</TR>
<TR>
<TD>
r
</TD>
<TD>
zastosuj VERP dla danego u¿ytkownika
</TD>
</TR>
<TR>
<TD>
m
</TD>
<TD>
zastosuj VERP dla danej wiadomo¶ci
</TD>
</TR>
</TABLE>

<HR>
<H1><A NAME="advanced-topics">5. Zaawansowana tematyka</A></H1>
<H2><A NAME="procmail">5.1. <I>procmail</I></A></H2>
<P><I>procmail</I> jest popularnym MDA - programem dostarczaj±cym pocztê. Funkcj± spe³nian± przez MDA jest przyjêcie wiadomo¶ci od MTA dla konkretnego u¿ytkownika lub skrzynki pocztowej, a nastêpnie dostarczenie jej zgodnie z potrzebami u¿ytkownika. <I>procmail</I> mo¿e byæ u¿ywany w celu filtrowania wiadomo¶ci na podstawie ró¿nych pól nag³ówka lub tre¶ci wiadomo¶ci. Na przyk³ad wiadomo¶ci od konkretnej osoby mog± byæ dostarczane do specjalnej skrzynki pocztowej.</P>
<P>Chc±c u¿ywaæ <I>procmail'a</I> z <I>qmail'em</I> nale¿y pamiêtaæ o kilku rzeczach. Po pierwsze, <I>procmail</I> zwykle jest skompilowany by pracowaæ ze skrzynk± pocztow± w formacie mbox w <TT>/var/spool/mail</TT>. Mo¿esz rekompilowaæ <I>procmail'a</I> tak by zmieniæ to na <TT>$HOME</TT> lub poinstruowaæ u¿ytkowników by podawali <I>procmail'owi</I> faktyczny adres skrzynki. Je¶li nie spatchujesz go by dostarcza³ do <TT>$HOME</TT>, bêdzie u¿ywa³ <TT>/var/spool/mail</TT> dla plików tymczasowych.</P>
<P>Innym problemem jest to, ¿e <I>procmail</I> nie rozumie co znacz± poszczególne kody b³êdów zwracane przez <TT>qmail-command</TT>. <I>procmail</I> u¿ywa standardowych unix'owych kodów b³êdów: zero oznacza sukces, za¶ inna warto¶æ b³±d, którego powód wskazywany jest przez <TT>/usr/include/sys/errno.h</TT>. <TT>qmail-command</TT> u¿ywa pewnych warto¶ci niezerowych w celu powiadomienia o b³êdach fatalnych, w innym przypadku sygnalizuje b³±d tymczasowy. Mo¿na u¿ywaæ prostego skryptu shellowego w celu t³umaczenia kodów <TT>qmail-command</TT>. Taki skrypt pojawi³ siê na li¶cie o <I>qmail'u</I> i mo¿na go znale¼æ w archiwach listy <A HREF="http://www.ornl.gov/its/archives/mailing-lists/qmail/1998/04/msg00487.htm l">http://www.ornl.gov/its/archives/mailing-lists/qmail/1998/04/msg00487.htm l</A></P>
<P>Ponadto starsze wersje <I>procmail'a</I> (przed 3.14) nie wspó³pracuj± ze skrzynkami pocztowymi w formacie maildir. Najlepszym rozwi±zaniem jest u¿ywaæ jego najnowszej wersji. Innym podej¶ciem jest <I>safecat</I>, program który dostaje na wej¶ciu wiadomo¶æ i wpisuje j± do konkretnej skrzynki pocztowej w formacie maildir. W takim przypadku nale¿y sk³oniæ <I>procmaila</I> do korzystania z <I><A HREF="#safecat">safecat</A></I> przy u¿yciu odpowiednich poleceñ. Albo zrezygnowaæ z <I>procmail'a</I> i u¿ywaæ <I><A HREF="#maildrop">maildrop</A></I>.</P>
<P>Wreszcie <TT>procmail</TT> oczekuje, ¿e wiadomo¶æ któr± otrzyma bêdzie w formacie mailbox. <I>qmail</I> dostarczaj±c wiadomo¶æ w zwyk³ym trybie za³±cza jedynie tre¶æ wiadomo¶ci bez pola <TT>&quot;From&quot;</TT>. Aby dostosowaæ wiadomo¶æ do formatu akceptowanego przez <I>procmail'a</I> mo¿na u¿yc polecenia <TT>preline</TT>.</P>
<P>Przyk³adowo powiedzmy, ¿e u¿ytkownik &quot;dave&quot; chce aby jego poczta by³a przetwarzana przez <TT>procmail'a</TT>. Administrator systemu skompilowa³ <TT>procmail'a</TT> by dostarcza³ wiadomo¶ci do <TT>$HOME</TT> oraz udostêpni³ wrapper'a kodów b³êdów <TT>/usr/local/bin/qmail-procmail</TT>. Plik <TT>.qmail</TT> &quot;dave'a&quot; powinien zatem mieæ postaæ:</P>
<PRE>
|/var/qmail/bin/preline /usr/local/bin/qmail-procmail dave
</PRE>
<H2><A NAME="pop-imap-servers">5.2. Serwery POP i IMAP</A></H2>
<P><I>qmail</I> zawiera serwer POP o nazwie <I>qmail-pop3d</I>, jednak nie jest on instalowany automatycznie w trakcie instalacji <I>qmail'a</I>. Mo¿esz tak¿e u¿yæ innego serwer'a POP lub IMPA jednak nale¿y zwróciæ uwagê, ¿e by³y one pisane tak by wspó³pracowa³y z <I>Sendmailem</I>, zatem dostosowanie ich do pracy z <I>qmail'em</I> bêdzie wymaga³o w³o¿enia trochê wysi³ku.</P>
<H3><A NAME="qmail-pop3d">5.2.1. <I>qmail-pop3d</I></A></H3>
<P>Jest to serwer POP dostarczany razem z <I>qmail'em</I>. <I>qmail-pop3d</I> to dobry serwer i u¿ywany jest w wielu miejscach gdzie u¿ywa siê <I>qmail'a</I>. Ma budowê modularn±. Umo¿liwia ró¿ne schematy autentykacji poprzez ró¿ne modu³y.</P>
<P><HR WIDTH="80%" ALIGN="Left">
<STRONG>Uwaga: </STRONG><I>qmail-pop3d</I> pracuje <B>jedynie</B> ze skrzynkami pocztowymi w formacie maildir zatem je¶li masz u¿ytkowników loguj±cych sie na serwer i u¿ywaj±cych MUA lokalnie, musz± one pracowaæ ze skrzynkami w formacie maildir. Je¶li wszyscy u¿ytkownicy ¶ci±gaj± pocztê poprzez POP nie jest to problemem.
<HR WIDTH="80%" ALIGN="Left"></P>
<H4><A NAME="pop3d-arch">5.2.1.1. Architektura <I>qmail-pop3d</I></A></H4>
<P>Serwer <I>qmail-pop3d</I> sk³ada siê z modu³ów:</P>
<UL>
<LI><TT>qmail-popup</TT> pobiera nazwê u¿ytkownika i has³o
<LI><TT>checkpassword</TT> zajmuje siê autentykacj± u¿ytkownik/has³o
<LI><TT>qmail-pop3d</TT> demon POP</UL>
<P>Zwykle <TT>qmail-popup</TT> jest uruchamiany poprzez inetd lub tcpserver, nas³uchuje na porcie 110, porcie POP3. W momencie nawi±zania po³±czenia prosi o podanie nazwy u¿ytkownika oraz has³a. Nastêpnie wywo³uje <TT>checkpassword</TT>, które zajmuje siê weryfikacj± u¿ytkownika i has³a i wywo³uje <TT>qmail-pop3d</TT> je¶li autentykacja zakoñczy³a siê pomy¶lnie.</P>
<H4><A NAME="pop3d-installation">5.2.1.2. Instalacja <I>qmail-pop3d</I></A></H4>
<P>1. Zainstaluj i przetestuj <I>qmail'a</I>. Je¶li chcesz by wszyscy u¿ytkownicy mogli ¶ci±gaæ pocztê poprzez POP upewnij siê, ¿e <I>defaultdelivery</I> jest ustawione do <TT>./Maildir/</TT>. Je¶li zainstalowa³e¶ skrypt uruchamiaj±cy <I>qmail'a</I> z rozdzia³u &quot;Instalacja&quot; jest to konfigurowane w <TT>control/defaultdelivery</TT>. Je¶li nie najprawdopodobniej w <TT>/var/qmail/rc</TT> w linij uruchamiaj±cej <TT>qmail-start</TT>.</P>
<P>2. ¦ci±gnij program <TT>checkpassword</TT> z <A HREF="http://www.qmail.org/top.html#checkpassword">http://www.qmail.org/top.html#checkpassword</A>. Dobrym wyborem jest tak¿e standardowy <TT>checkpassword</TT> <A HREF="http://cr.yp.to/checkpwd.html">http://cr.yp.to/checkpwd.html</A> je¶li nie potrzebujesz wersji bardziej skomplikowanej.</P>
<P>3. Skompiluj i zainstaluj <TT>checkpassword'a</TT> zgodnie z instrukcj±. Sprawd¼ czy zainstalowa³ siê jako <TT>/bin/checkpassword</TT>.</P>
<P>4. Utwórz skrypt <TT>/var/qmail/supervise/qmail-pop3d/run</TT>:</P>
<PRE>
    #!/bin/sh
    exec /usr/local/bin/softlimit -m 2000000 \
        /usr/local/bin/tcpserver -v -R -H -l 0 0 110 /var/qmail/bin/qmail-popup \
            <I>FQDN</I> /bin/checkpassword /var/qmail/bin/qmail-pop3d Maildir 2&gt;&amp;1
</PRE>
<P>gdzie <I>FQDN</I> jst pe³n± nazw± domeny serwera POP, który konfigurujesz np., <TT>pop.example.net</TT>.</P>
<P>5. Utwórz skrypt <TT>/var/qmail/supervise/qmail-pop3d/log/run</TT>:</P>
<PRE>
    #!/bin/sh
    exec /usr/local/bin/setuidgid qmaill /usr/local/bin/multilog t \
        /var/log/qmail/pop3d
</PRE>
<P>6. Utwórz katalog zawieraj±cy logi, ustaw uprawnienia dla skryptu <TT>run</TT> i zlinkuj t± us³ugê z <TT>/service</TT>:</P>
<PRE>
    chmod +t /var/qmail/supervise/qmail-pop3d   <I># if daemontools &lt; 0.75</I>
    mkdir /var/log/qmail/pop3d
    chown qmaill /var/log/qmail/pop3d
    chmod 755 /var/qmail/supervise/qmail-pop3d/run
    chmod 755 /var/qmail/supervise/qmail-pop3d/log/run
    ln -s /var/qmail/supervise/qmail-pop3d /service
</PRE>
<P>7. Dodaj poni¿sze do skryptu <TT>qmailctl</TT> do sekcji &quot;start&quot; :</P>
<PRE>
    if svok /service/qmail-pop3d ; then
      svc -u /service/qmail-pop3d
    else
      echo qmail-pop3d supervise not running
    fi
</PRE>
<P>8. Dodaj poni¿sze do skryptu <TT>qmailctl</TT> do sekcji &quot;stop&quot; :</P>
<PRE>
    echo &quot;  qmail-pop3d&quot;
    svc -d /service/qmail-pop3d
</PRE>
<P>9. Dodaj poni¿sze do skryptu <TT>qmailctl</TT> do sekcji &quot;stat&quot; :</P>
<PRE>
    svstat /service/qmail-pop3d
    svstat /service/qmail-pop3d/log
</PRE>
<P>10. Dodaj poni¿sze do skryptu <TT>qmailctl</TT> do sekcji &quot;pause&quot; :</P>
<PRE>
    echo &quot;Pausing qmail-pop3d&quot;
    svc -p /service/qmail-pop3d
</PRE>
<P>11. Dodaj poni¿sze do skryptu <TT>qmailctl</TT> do sekcji &quot;cont&quot; :</P>
<PRE>
    echo &quot;Continuing qmail-pop3d&quot;
    svc -c /service/qmail-pop3d
</PRE>
<P>12. Dodaj poni¿sze do skryptu <TT>qmailctl</TT> do sekcji &quot;restart&quot; :</P>
<PRE>
    echo &quot;* Restarting qmail-pop3d.&quot;
    svc -t /service/qmail-pop3d
</PRE>
<H3><A NAME="qpopper">5.2.2. <I>qpopper</I></A></H3>
<P>Je¶li potrzebujesz demona POP, który pracuje ze skrzynkami w formacie mbox mo¿esz u¿yæ <I>qpopper'a</I> z Qualcomm'u. Qpopper jest dostêpny z <A HREF="http://www.eudora.com/qpopper_general/">http://www.eudora.com/qpopper_general/</A>.</P>
<H3><A NAME="solid">5.2.3. <I>SolidPOP</I></A></H3>
<P>Serwer <I>SolidPOP</I> obs³uguje zarówno formaty maildir jak i mbox. Mo¿na go ¶ci±gn±æ z <A HREF="http://solidpop3d.pld.org.pl/">http://solidpop3d.pld.org.pl/</A></P>
<H3><A NAME="courier-imap">5.2.4. <I>Courier-IMAP</I></A></H3>
<P>Sam Varshavchik napisa³ serwer IMAP, który pracuje <B>jedynie</B> w formacie maildir. Mo¿na go ¶ci±gn±æ z <A HREF="http://www.inter7.com/courierimap/">http://www.inter7.com/courierimap/</A>.</P>
<H2><A NAME="pop-imap-clients">5.3. Klienci POP i IMAP</A></H2>
<H3><A NAME="fetchmail">5.3.1. <I>fetchmail</I></A></H3>
<P><I>fetchmail</I> jest programem, który pobiera pocztê z serwerów POP i IMAP i przekazuje j± do dostarczenia lokalnego. Nie ma on wiêkszych problemów ze ¶ci±ganiem poczty z serwerów <I>qmail'owych</I> jest jednak kilka sztuczek, których zastosowanie polepszy ich wspó³pracê.</P>
<P>Oto przyk³adowy plik <TT>.fetchmailrc</TT> dla u¿ytkownika w systemie z <I>qmail'em</I>:</P>
<PRE>
poll mail.example.net proto pop3 nodns
    user dsill with password flubgart is dave here
    fetchall forcecr to * here
</PRE>
<P>Instruuje on <I>fetchmail'a</I> do po³±czenia siê z mail.example.net poprzez POP3, zalogowania siê jako <TT>dsill</TT>, podania has³a <TT>flubgart</TT>, ¶ci±gniêcia wszystkich wiadomo¶ci i dostarczenia ich do dave@localhost. Polecenie <TT>forcecr</TT> powoduje, ¿e <I>fetchmail</I> bêdzie koñczy³ ka¿d± liniê znakiem karetki w momencie przekazywania wiadomo¶ci do qmail'a pracuj±cego na lokalnym ho¶cie. <I>qmail</I> wymaga tego.</P>
<H3><A NAME="getmail">5.3.2. <I>getmail</I></A></H3>
<P><I>getmail</I> jest programem, który ¶ci±ga pocztê z serwera POP i dostarcza j± do skrzynki w postaci maildir. Jest to skrypt napisany w Python'ie zatem musisz zainstalowaæ jego interpreter w celu u¿ywania <I>getmail'a</I>.</P>
<P>Jego autorem jest Charles Cazabon, a stron± domow± <A HREF="http://www.qcc.sk.ca/~charlesc/software/getmail-2.0/getmail.html">http://www.qcc.sk.ca/~charlesc/software/getmail-2.0/getmail.html</A></P>
<H2><A NAME="multi-rcpt">5.4. Dostarczanie wiadomo¶ci do kilku u¿ytkowników na raz czy dostarczanie tylko jednej na raz.</A></H2>
<P>Powiedzmy, ¿e jeste¶ MTA, i jeden z twoich u¿ytkowników wysy³a wiadomo¶æ do trzech osób na hostx.example.com. Jest kilka mo¿liwo¶ci w jaki sposób dostarczyæ t± wiadomo¶æ.</P>
<OL>
<LI>Mo¿esz otworzyæ po³±cznie poprzez SMTP do hostx, wys³aæ wiadomo¶æ do pierwszego u¿ytkownika, wys³aæ wiadomo¶æ do drugiego, do trzeciego i zamkn±æ po³±czenie.
<LI>Mo¿esz uruchomiæ trzy procesu, z których ka¿dy otworzy po³±czenie z hostx, wy¶le kopie wiadomo¶ci do jednego z u¿ytkowników i nastêpnie zamknie po³±czenie.
<LI>Mo¿esz nawi±zaæ po³±czenie z hostem, wys³aæ kopiê wiadomo¶ci zaadresowan± do <I>wszystkich trzech u¿ytkowników</I> i zamkn±æ po³±czenie.</OL>
<P>Pierwsza metoda jest wyra¼nie gorsza od pozosta³ych. Nawet je¶li wiadomo¶æ jest ma³a zajmie to przynajmniej tyle samo czasu co w pozosta³ych metodach. A je¶li wiadomo¶æ jest d³uga zajmie to znacznie wiêcej czasu *i* wygeneruje znacznie wiêcej ruchu w sieci.</P>
<P>Zatem pomiñmy pierwsz±.</P>
<P>Druga i trzecia s± bardziej interesuj±ce.</P>
<P>Trzecia otwiera tylko jedno po³±czenie i tylko raz przesy³a wiadomo¶æ. W ten sposób generowana jest ma³a ilo¶æ ruchu.</P>
<P>Druga metoda u¿ywa kilku po³±czeñ i przesy³a kilka kopii wiadomo¶ci. W ten sposób generuje du¿o ruchu, ale jednocze¶nie traci mniej czasu na nawi±zywanie po³±czeñ zatem jest szybsza od metody trzeciej. Jest od niej tak¿e prostsza, wiêc tak¿e proces kodowania MTA jest ³atwiejszy. Ostatnim argumentem jest to, ¿e poniewa¿ ka¿dy u¿ytkownik dostaje w³asn± kopiê wiadomo¶ci MTA mo¿e u¿ywaæ VERP (opis w kolejnym rozdziale).</P>
<P><I>qmail</I> <I>zawsze</I> u¿ywa metody drugiej (pojedyñczy odbiorca). Nie ma patchy które umo¿liwia³yby mu zaimplementowanie metody trzeciej (wielu odbiorców) - wymaga³oby to <B>wiele</B> pracy.</P>
<P>Mimo, ¿e w bardzo rzadkich przypadkach mo¿liwe jest ¿eby metoda trzecia by³a szybsza od drugiej, to jednak prostota i VERP powoduj± ¿e rozwi±zanie drugie jest lepsze.</P>
<P>Dostarczanie poczty do pojedyñczego odbiorcy <I>generuje</I> wiêkszy ruch, jednak jest go mniej ni¿ siê zwykle s±dzi. Wiêkszo¶æ wiadomo¶ci, które s± skierowane do kilku odbiorców nie mo¿e wykorzystaæ z metody trzeciej, gdy¿ odbiorcy ci znajduj± siê na ró¿nych hostach. Nawet na serwerze grup dyskusyjnych gdzie teoretycznie móg³by byæ sens zastosowaæ t± metodê zyski sa niewielkie, gdy¿ wiêkszo¶æ ruchu w sieci generowana jest przez HTTP, natomiast SMTP zu¿ywa jego ma³± czê¶æ.</P>
<P>Przyk³adowo, je¶li do 10% procent ³±cza wykorzystywane jest na SMTP i zu¿ycie ³±cza na SMTP mog³oby byæ zredukowane o 25 % przez zastosowanie przesy³ania wiadomo¶ci do kilku odbiorców na raz, spowoduje to ¿e SMTP bêdzie nadal zu¿ywaæ 7,5 % ³±cza.</P>
<H2><A NAME="verp">5.5. VERP</A></H2>
<P>Je¶li wiadomo¶æ nie mo¿e zostaæ dostarczona MTA powinien zwróciæ bounce do adresu zwrotnego z jej nag³ówka (ERP). Wiadomo¶æ ta powinna zawieraæ pierwotny adres odbiorcy, powód niedostarczenia oraz informacjê czy problem jest chwilowy czy sta³y. Mimo to niektóre MTA nie robi± tego poprawnie. Mog± odes³aæ odbit± wiadomo¶æ na podstawie pola From z nag³ówka albo wiadomo¶æ odbita mo¿e nie zawieraæ adresu pierwotnego odbiorcy.</P>
<P>Dla wiêkszo¶ci wiadomo¶ci przesy³anych pomiêdzy u¿ytkownikami nie jest to wielki problem. S± oni zwykle w stanie okre¶liæ dlaczego wiadomo¶æ nie dosz³a na podstawie zawarto¶ci wiadomo¶ci odbitej. Jednak¿e w przypadku list dyskusyjnych problem jest znacznie bardziej powa¿ny. Subskrybenci przenosz± siê, forwarduj± pocztê do swego nowego adresu. Je¶li nowy adres zacznie stwarzaæ problemy mo¿e okazaæ siê ¿e jest niemo¿liwe okre¶lenie który z subskrybentów ma problem je¶li wiadomo¶æ odbita zawiera tylko nowy adres.</P>
<P>Dave Bernstein stworzy³ co¶ o nazwie VERP (zmienny adres zwrotna). U¿ywaj±c VERP ka¿da wiadomo¶æ wys³ana do ka¿dego z subskrybentów listy dyskusyjnej ma unikalny adres zwrotny. Pozwala to na ³atwe zidentyfikowanie subskrybenta który ma problem ze skrzynk±.</P>
<P>Przyk³adowo typowa lista nieu¿ywaj±ca VERP ma adres zwrotny postaci <TT><I>listname</I>-owner@<I>domain</I></TT>. Natomiast dla listy u¿ywaj±cej VERP jest on taki <TT><I>listname</I>-owner-<U><I>subscriber</I>=<I>sdomain</I></U>@<I>ldomain</I></TT>, gdzie adres subskrybenta <TT><I>subscriber</I>@<I>sdomain</I></TT> zawarty jest pomiêdzy &quot;owner&quot; i &quot;@&quot;. (&quot;@&quot; w adresie subskrybenta zast±piona jest znakiem &quot;=&quot;).</P>
<P><I><A HREF="#ezmlm">ezmlm</A></I> jest programem do obs³ugi list dyskusyjnych, który automatycznie obs³uguje wiadomo¶ci niedostarczone. Jest on nawet w stanie zapamiêtaæ których wiadomo¶ci u¿ytkownik z chwilowymi problemami z poczt± nie przeczyta³, tak by w przyslo¶ci móg³ je znale¿æ w archiwum.</P>
<P>Russell Nelson napisa³ program zajmuj±cy siê obs³ug± wiadomo¶ci niedostarczonych dla <I>Majordomo</I> pracuj±cego z <I>qmail'em</I> jednak nie pracuje on ju¿ nad nim. Mo¿na go znale¼æ pod adresem <A HREF="http://www.qmail.org/bounceman-0.4.shar">http://www.qmail.org/bounceman-0.4.shar</A></P>
<H2><A NAME="troubleshooting">5.6. Rozwi±zywanie problemów</A></H2>
<H3><A NAME="processes">5.6.1. Procesy</A></H3>
<P>Prawid³owo pracuj±ca, kompletna, minimalna instalacja <I>qmail'a</I> powinna zawsze mieæ uruchomione poni¿sze cztery procesy:</P>
<UL>
<LI><TT>qmail-send</TT> pracuj±cy jako u¿ytkownik <TT>qmails</TT>
<LI><TT>qmail-clean</TT> pracuj±cy jako u¿ytkownik <TT>qmailq</TT>
<LI><TT>qmail-rspawn</TT> pracuj±cy jako u¿ytkownik <TT>qmailr</TT>
<LI><TT>qmail-lspawn</TT> pracuj±cy jako u¿ytkownik <TT>root</TT></UL>
<P>W zale¿no¶ci od tego jakiej wersji UNIXa u¿ywasz jedna z dwóch poni¿szych komend powinna pokazaæ wszystkie te procesy i byæ mo¿e jeszcze inne:</P>
<PRE>
    ps -ef | grep qmail
    ps waux | grep qmail

[dave@sparge dave]$ <B>ps waux|grep qmail</B>
dave      2222  0.0  0.8   836   348  p4 S    10:25   0:00 grep qmail
qmaild     351  0.0  1.0   840   400  ?  S N  12:43   0:00 /usr/local/bin/tcpse
rver -v -x /etc/tcp.smtp.cdb -u 49491 -g 31314 0 smtp /var/qmail/bin/qmail-smtp
d-
qmaild    2220  0.0  1.0   844   420  ?  S N  10:25   0:00 /usr/local/bin/tcpse
rver -v -x /etc/tcp.smtp.cdb -u 49491 -g 31314 0 smtp /var/qmail/bin/qmail-smtp
d-
qmaill     365  0.0  0.8   748   344  ?  S N  12:43   0:00 splogger qmail
<B>qmailq     368  0.0  0.7   736   292  ?  S N  12:43   0:00 qmail-clean</B>
<B>qmailr     367  0.0  0.6   732   272  ?  S N  12:43   0:00 qmail-rspawn</B>
<B>qmails     350  0.0  0.8   776   336  ?  S N  12:43   0:00 qmail-send</B>
root       340  0.0  0.6   724   252  ?  S N  12:43   0:00 /usr/local/sbin/supe
rvise /var/supervise/qmail-send /var/qmail/rc
root       341  0.0  0.6   724   252  ?  S N  12:43   0:00 /usr/local/sbin/supe
rvise /var/supervise/tcpserver-qmail /usr/local/bin/tcpserver -v -x /etc/tcp.sm
tp
<B>root       366  0.0  0.7   736   276  ?  S N  12:43   0:00 qmail-lspawn ./Mailbox</B>
[dave@sparge dave]$
</PRE>
<P>Je¶li w twoim systemie <I>qmail</I> lub <TT>qmail-smtpd</TT> pracuje pod <TT>supervise</TT> powiniene¶ zobaczyæ te procesy tak¿e. A je¶li <TT>qmail-smtpd</TT> pracuje pod <TT>tcpserver'em</TT> powiniene¶ zobaczyæ proces rodzica <TT>tcpserver</TT> oraz <I>dodatkowo</I> jeden proces <TT>tcpserver</TT> dla ka¿dego z aktywnych <I>nadchodz±cych</I> po³±czeñ SMTP.</P>
<P>Je¶li u¿ywasz <TT>splogger'a</TT> (lub <TT>multilog'a</TT> lub <TT>cyclog'a</TT>)  do logowania zobaczysz procesy <TT>splogger'a</TT> (lub <TT>multilog'a</TT> lub <TT>cyclog'a</TT>) pracuj±ce jako u¿ytkownik <TT>qmaill</TT>.</P>
<P>Ponadto, je¶li <I>qmail</I> jest zajêty dostarczaniem wiadomo¶ci lokalnie albo na zewn±trz zobaczysz procesy <TT>qmail-local</TT> lub <TT>qmail-remote</TT>.</P>
<H3><A NAME="logs">5.6.2. Logi</A></H3>
<H4><A NAME="multilog">5.6.2.1. <TT>multilog</TT></A></H4>
<P><TT>multilog</TT> jest czê¶ci± pakietu <I><A HREF="#daemontools">daemontools</A></I>, loguje komunikaty do plików znajduj
±cych sie w okre¶lonym katalogu.</P>
<P>Katalog docelowy podaje siê w linii poleceñ <TT>multilog'a</TT>, wiêc mo¿esz go znale¼æ przegl±daj±c plik uruchomieniowy
<I>qmail'a</I>.</P>
<P>Ilo¶æ plików w katalogu oraz ich wielko¶æ uzale¿nione s± od opcji przekazanych do <TT>multilog'a</TT>. Nazwy plików sa znacznikami czasu w formacie TAI (Temps Atomique International) i oznaczaja moment w którym dany plik zosta³ za³o¿ony. Polecenie <TT>tai64nlocal</TT>, tak¿e z pakietu <TT>daemontools</TT>, konwertuje znacznik TAI do postaci czytelnej dla cz³owieka.</P>
<P>Zwykle wpis <TT>multilog'a</TT> wygl±da tak:</P>
<PRE>
@4000000038c3eeb104a6ecf4 delivery 153: success: did_1+0+0/
</PRE>
<P>&quot;@4000000038c3eeb104a6ecf4&quot; jest opcjonalnym ale zalecanym znacznikiem czasu TAI &quot;delivery 153: success: did_1+0+0/&quot; jest tre¶ci± wiadomo¶ci</P>
<H4><A NAME="splogger">5.6.2.2. <TT>splogger</TT></A></H4>
<P><TT>splogger</TT> u¿ywa <I>syslog'a</I> w celu okre¶lenia czasu danego wpisu i nastêpnie przesy³a taki wpis do demona <I>syslog</I>. <I>Syslog</I> konfigurowany jest w <TT>/etc/syslog.conf</TT>. Komunikaty wysy³ane do <I>syslog'a</I> maj± typ i priorytet. Wpisy w <TT>/etc/syslog.conf</TT> filtruj± komunikaty na podstawie typu i priorytetu w celu skierowania ich do odpowiednich plików logów, innego hostu lub konsoli. <TT>splogger</TT> domy¶lnie przypisuje komunikatom typ 'mail' zatem po przejrzeniu <TT>syslog.conf</TT> i znalezieniu w nim dyspozycji dla 'mail' powinni¶my wiedzieæ gdzie trafiaj± logi z <I>qmail'a</I>.</P>
<P>Zwykle s± to :</P>
<UL>
<LI><TT>/var/log/syslog</TT>
<LI><TT>/var/adm/SYSLOG</TT>
<LI><TT>/var/log/maillog</TT></UL>
<P>Standardowy wpis dokonany przez <I>syslog'a</I>:</P>
<PRE>
Jun  3 11:35:23 sparge qmail: 928424123.963558 delivery 153: success: did_1+0+0 /
</PRE>
<P>&quot;Jun 3 11:35:23&quot; jest okre¶leniem czasu dodanym przez <I>syslog'a</I> &quot;sparge&quot; jest nazw± systemu który wys³a³ komunikat &quot;qmail:&quot; t± nazwê dopisuje <TT>splogger</TT> zawsze na pocz±tku &quot;928424123.963558&quot; jest opcjonalnym oznaczeniem czasu (zob. w nastêpnym rozdziale) &quot;delivery 153: success: did_1+0+0/&quot; tre¶æ komunikatu</P>
<H4><A NAME="log-messages">5.6.2.3. Logowane komunikaty</A></H4>
<P>Oto typowa sekwencja komunikatów w przypadku wysy³ania wiadomo¶ci do odleg³ego hostu z systemu lokalnego:</P>
<PRE>
<B>1</B> @4000000038c3eeb027f41c7c new msg 93869
<B>2</B> @4000000038c3eeb027f6b0a4 info msg 93869: bytes 2343 from &lt;dave@sill.org&gt;
qp 18695 uid 49491
<B>3</B> @4000000038c3eeb02877ee94 starting delivery 2392: msg 93869 to remote lwq@
w3.to
<B>4</B> @4000000038c3eeb0287b55ac status: local 0/10 remote 1/20
<B>5</B> @4000000038c3eeb104a13804 delivery 2392: success: 209.85.127.177_accepted_
message.
   /Remote_host_said:_250_CAA01516_Message_accepted_for_delivery/
<B>6</B> @4000000038c3eeb104a4492c status: local 0/10 remote 0/20
<B>7</B> @4000000038c3eeb104a6ecf4 end msg 93869
</PRE>
<P>Linia 1 oznacza, ¿e <I>qmail</I> otrzyma³ now± wiadomo¶æ, a jej numer w kolejce wynosi 93869. Numer ten okre¶la numer i-nodu w którym znajduje siê plik <TT>/var/qmail/queue/mess/<I>NN</I>/</TT> zawieraj±cy wiadomo¶æ. Numer ten jest unikalny tak d³ugo jak d³ugo wiadomo¶æ przebywa w kolejce.</P>
<P>Linia 2 mówi, ¿e wiadomo¶æ jest od <TT>dave@sparge.sill</TT> i ¿e ma rozmiar 189 bajtów.</P>
<P>Linia 3 mówi, ¿e <TT>qmail-remote</TT> zaczyna dostarczaæ wiadomo¶æ do <TT>lwq@w3.to</TT> oraz, ¿e proces dostarczania otrzyma³ numer 2392.</P>
<P>Linia 4 mówi, ¿e obecnie trwa dostarczanie 0 wiadomo¶ci lokalnie i 1 wiadomo¶ci na zewn±trz.</P>
<P>Linia 5 mówi, ¿e dostarczanie wiadomo¶ci na zewn±trz o numerze 2392 zosta³o zakoñczone sukcesem, zwraca odpowie\d¼ tamtego serwera, która czêsto pomaga administratorowi zewnêtrznego serwera w sprawdzeniu dalszych losów tej wiadomo¶ci. W tym przypadku &quot;CAA01516&quot; jest nazw± jak± otrzyma³a ta wiadomo¶æ na systemie zewnêtrznym.</P>
<P>Linia 6 mówi, ¿e obecnie odbywa siê dostarczanie 0 wiadomo¶ci lokalnie i 0 na zewn±trz, czyli ¿e dostarczanie zakoñczy³o siê.</P>
<P>Linia 7 mówi, ¿e wiadomo¶æ zosta³a dostarczona i usuniêta z kolejki. W tym momencie numer 93869 zosta³ zwolniony i mo¿e zostaæ u¿yty do dostarczania innej wiadomo¶ci.</P>
<H2><A NAME="big-servers">5.7. Du¿e serwery</A></H2>
<P>zob. tak¿e <I><A HREF="#qmail-ldap">qmail-ldap</A></I></P>
<H3><A NAME="scalable-parallelism">5.7.1. Przetwarzanie równoleg³e</A></H3>
<P>U¿yj szybkiego serwera plików NFS na którym bêdziesz przechowywa³ katalogi u¿ytkowników. Skonfiguruj kilka serwerów SMTP o identycznym priorytecie dostarczania poczty. Serwery te bêd± dostarczaæ pocztê do formatu maildir na serwerze plików.</P>
<H2><A NAME="migrating-to-qmail">5.8. Przej¶cie z <I>Sendmail'a</I> do <I>qmail'a</I></A></H2>
<P>Zajrzyj na stronê Dan'a Bernstein'a <I>Sendmail</I>-&gt;<I>qmail</I> <A HREF="http://cr.yp.to/qmail/sendmail.html">http://cr.yp.to/qmail/sendmail.html</A></P>
<H2><A NAME="mailing-list-managers">5.9. Menad¿erowie list dyskusysyjnych (MLM)</A></H2>
<P>MLM s± programami które pomagaj± prowadziæ listy dyskusyjne. Spe³niaj± one dwa zadania: prowadz± spis subskrybentów oraz zajmuj± siê rozsy³aniem wiadomo¶ci do wszystkich subskrybentów.</P>
<P>Wiêkszo¶æ (wszystkich?) menad¿erów list mo¿na skonfigurowaæ by wspó³pracowa³y z <I>qmail'em</I>.</P>
<H3><A NAME="mlm-ezmlm">5.9.1. <I>ezmlm</I></A></H3>
<P><I>ezmlm</I> zosta³ napisany przez Dan'a Bernstein'a autora <I>qmail'a</I>. Jest on specjalnie skonfigurowany by pracowaæ z <I>qmail'em</I> i wykorzystuje kilka jego cech. Przede wszystkim u¿ywa <A HREF="#verp">VERP</A> po to by wiarygodnie obs³ugiwaæ wiadomo¶ci niedostarczone. Cech± odró¿niaj±c± <I>ezmlm</I> od innych MLM jest to, ¿e nie wykonuje on komend zawartych w tre¶ci wiadomo¶ci, w jego przypadku komendy zawarte s± w adresie listy. Przyk³ad, by zapisaæ siê na listê  &quot;foo@list.example.net&quot; nale¿y wys³aæ wiadomo¶æ na adres &quot;foo-subscribe@list.example.net&quot;.</P>
<P>W celu uzyskania wiêkszej ilo¶ci informacji o <I>ezmlm</I> zajrzyj na stronê <A HREF="http://www.ezmlm.org">http://www.ezmlm.org</A>, nieoficjaln± stronê <I>ezmlm'a</I>, a oficjaln± stronê <I>ezmlm-idx</I>, bardzo przyjemnego dodatku, który rozszerza jego mo¿liwo¶ci o wiele nowych cech.</P>
<H3><A NAME="mlm-majordomo">5.9.2. <I>Majordomo</I></A></H3>
<P><I>Majordomo</I> jest najpopularniejszym MLM pod UNIXem. Pracuje bardzo dobrze z <I>qmail'em</I> pod warunkiem spatchowania go pod tym k±tem. Russ Allbery napisa³ FAQ o <I>qmail</I>/<I>Majordomo</I> dostêpne pod adresem <A HREF="http://www.eyrie.org/~eagle/faqs/mjqmail.html">http://www.eyrie.org/~eagle/faqs/mjqmail.html</A></P>
<H2><A NAME="patches">5.10. Patche</A></H2>
<P>Kody ¼ród³owe ró¿nych patch'y dostêpne s± dla <I>qmail'a</I>. By spatchowaæ <I>qmail'a</I> ¶ci±gnij patcha, przejd¼ do katalogu ze ¼ród³ami <I>qmail'a</I> i zastosuj go u¿ywaj±c komendy <TT>patch</TT>.</P>
<PRE>
    cd /usr/local/src/qmail/qmail-1.03
    patch -p0 &lt;/tmp/patchfile
</PRE>
<P>Zatrzymaj <I>qmail'a</I> zabijaj'±c <TT>qmail-send</TT> lub je¶li zainstalowa³e¶ skrypt z rozdzia³u Instalacja wykonaj:</P>
<PRE>
    qmailctl stop
</PRE>
<P>Nastêpnie przekompiluj i zainstaluj zmienione ¼ród³a:</P>
<PRE>
    make setup check
</PRE>
<P>Zrestartuj <I>qmail'a</I>:</P>
<PRE>
    qmailctl start
</PRE>
<P>Wreszcie przetestuj <I>qmail'a</I> a zw³aszcza to co patchowa³e¶.</P>
<P><HR WIDTH="80%" ALIGN="Left">
<STRONG>Uwaga: </STRONG>Chocia¿ <A HREF="http://www.qmail.org/">http://www.qmail.org/</A> przedstawia wiele patch dla <I>qmail'a</I>, <B>¿aden</B> z nich nie zosta³ zatwierdzony przez autora qmail'a. Mog± one wprowadzaæ problemy zwi±zane z bezpieczeñstwem, wiarygodno¶ci±, wydajno¶cia i funkcjonalno¶cia które nie by³y obecne w <I>qmail'u</I>. Wiêkszo¶æ istalacji <I>qmail'a</I> nie wymaga instalowania ¿adnych patchy. <B>Nie powiniene¶ instalowaæ nic czego wyra¼nie nie potrzebujesz. </B></P>
<P><HR WIDTH="80%" ALIGN="Left"></P>

<H3><A NAME="dns-patches">5.10.1. DNS</A></H3>
<P>Z powodów historycznych odpowiedzi DNS'a by³y ograniczone do 512 bajtów. Niektóre du¿e instytucje zaczê³y u¿ywaæ odpowiedzi MX d³u¿szych od tego ograniczenia. <I>qmail</I> i wiele innych programów ma problem z zapytaniami do DNS, które zwracaj± bardzo du¿e odpowiedzi. S± trzy mo¿liwe sposoby naprawienia tego:</P>
<H4><A NAME="dnscache">5.10.1.1. Korzystaj z <TT>dnscache</TT> który wchodzi w sk³ad pakietu <I>djbdns</I></A></H4>
<P><TT>dnscache</TT> jest, jak to wynika z nazwy serwerem cachuj±cym DNS. Potrafi poradziæ sobie z d³ugimi odpowiedziami DNS, poza tym jest szybki. Nie wymaga tak¿e patchowania <I>qmail'a</I>, zatem jest to zdecydowanie najlepsze rozwi±zanie. Zob. <A HREF="#djbdns">djbdns</A> w <A HREF="#related-packages">Dodatkowe pakiety</A> by dowiedzieæ siê wiêcej.</P>
<H4><A NAME="dns-bump">5.10.1.2. Zwiêkszenie rozmiaru bufora do 65536</A></H4>
<P>Dzia³a z najnowszymi wersjami resolvwera BIND'a, który automatycznie wykonuj± zapytanie poprzez TCP, je¶li odpowied¼ wraca z ustawionym bitem truncation (obciêcie). Jest to najprostsza poprawka, mimo to <I>potencjalnie</I> mo¿na w ten sposób marnowaæ wiele pamiêci, w zale¿no¶ci od tego jak twój system j± przydziela. By zastosowaæ ten sposób po prostu zamieñ <TT>PACKETSZ</TT> na 65536 w <TT>dns.c</TT> i przekompiluj <I>qmail'a</I>.</P>
<H4><A NAME="dns-davis"> </A>5.10.1.3. Patch Christopher'a K. Davis'a <A HREF="http://www.ckdhr.com/ckd/qmail-103.patch">http://www.ckdhr.com/ckd/qmail-103.patch</A></H4>
<P>Jest to zastosowanie patch'a Chuck'a Foster'a, powinno dzia³aæ z ka¿d± wersj± resolwera niewa¿ne jak star±. U¿ywa specjalnego bajtu by unikn±æ bug'a zwi±zanego z ilo¶ci± bajtów znajduj±cych siê w buforze. Realokuje pamiêæ tylko raz do 65536, a nie do takiej ilo¶ci danych jaka nadesz³a, zatem jest mniej efektywny pod wzglêdem wykorzystania pamiêci ni¿ patch Chuck'a. Mimo to podobnie jak tamten patch realokacja jest wykonywana tylko wówczas gdy d³ugo¶æ odpowiedzi jest wiêksza ni¿ PACKETSZ, który domy¶lnie ma warto¶æ 512. Po realokacji wykonuje zapytanie poprzez TCP, zamiast zmuszania resolwera do zrobienia tego (unika w ten sposób dodatkowej komunikacji pomiêdzy qmail'em i serwerem nazw, chocia¿ je¶li znajduj± siê one na tej samej maszynie lub w tej samej sieci lokalnej nie jest to wielkie zmartwienie).</P>
<H3><A NAME="qmail-ldap">5.10.2. <I>qmail-ldap</I></A></H3>
<P>Ten patch napisany przez Andre Oppermann'a implementuje Lightweight Directory Access Protocol (LDAP) w qmail'u. LDAP jest jak ksi±¿ka telefoniczna. U¿ywaj±c <I>qmail-ldap</I> powinno byæ mo¿liwe obs³ugiwanie tysiêcy u¿ytkowników poprzez serwer POP. zob. <A HREF="http://www.nrg4u.com/">http://www.nrg4u.com/</A></P>
<H2><A NAME="qmtp">5.11. QMTP</A></H2>
<P>QMTP to Quick Mail Transfer Protocol (szybki protokó³ przesy³ania poczty), zastêpuje on STMP. Napisany zosta³ przez Dana Bernstein'a. Jego definicjê mo¿na znale¼æ na <A HREF="http://cr.yp.to/proto/qmtp.txt">http://cr.yp.to/proto/qmtp.txt</A>. QMTP jest podobny do SMTP, jednak jest prostszy, szybszy i niekompatybilny z SMTP. <I>qmail</I> zawiera serwer QMTP, <TT>qmail-qmtp</TT>, który dzia³a podobnie do <TT>qmail-smtp</TT>. QMTP zwykle u¿ywa portu 209.</P>
<P><I>qmail</I> nie zawiera klienta QMTP, jest on natomiast zawarty w pakiecie <I>serialmail</I>. <TT>maildir2qmtp</TT> dostarcza wiadomo¶ci znajduj±ce siê w skrzynce o formacie maildir do oznaczonego serwera QMTP poprzez QMTP.</P>
<P>QMTP nie dzia³a jak SMTP, zatem nie mo¿na go zainstalowaæ zamiast SMTP. Nie jest on tak¿e zbyt rozpowszechniony w internecie.</P>
<P>Russ Nelson napisa³ patch'a dla <TT>qmail-remote</TT> który uruchamia QMTP. Jest on dostêpny z <A HREF="http://www.qmail.org/qmail-1.03-qmtpc.patch">http://www.qmail.org/qmail-1.03-qmtpc.patch</A>. Mo¿na go tak¿e ¶ci±gn±æ w postaci spakowanej tar'em do rozpakowania w <TT>/service</TT> by w³±czyæ us³ugê  QMTP spod adresu <A HREF="http://www.qmail.org/qmtpd-service.tar.gz">http://www.qmail.org/qmtpd-service.tar.gz</A>.</P>
<HR>
<H1><A NAME="acknowledgments">A. Podziêkowania</A></H1>
<P>Przede wszystkim chcia³bym podziêkowaæ Dan'owi Bernstein'owi za napisanie tak du¿ego i eleganckiego programu. Mimo u¿ywania <I>qmail'a</I> przez piêæ lat ci±gle jestem pod jego wra¿eniem.</P>
<P>Chcia³bym tak¿e podziêkowaæ cz³onkom listy po¶wiêconej <I>qmail'owi</I>. Russell Nelson zas³uguje na specjalne uznanie jako najbardziej  pomocny, cierpliwy, weso³y i obdarzony du¿a wiedz± jej uczestnik. Jedynym którego ceniê wiêcej jest DJB.</P>
<P>Dziêkujê tak¿e wszystkim którzy przejrzeli i przyczynili siê do powstania tego dokumentu, a w szczególno¶ci:</P>
<UL>
<LI>Vince Vielhaber
<LI>Chris Green
<LI>Christopher K. Davis
<LI>Scott Schwartz
<LI>Fred Lindberg
<LI>Russell P. Sutherland
<LI>Alex Miller
<LI>Tim Hunter
<LI>Frank D. Cringle
<LI>Mahlon Smith
<LI>Rogerio Brito
<LI>Tony Hansmann
<LI>Matthias Andree
<LI>Tillman Hodgson
<LI>Stefan Witzel
<LI>Scott Gifford
<LI>i wielu innym</UL>
<P><U>Life with qmail</U> zosta³o napisane przy u¿yciu Simple Document Format (SDF), bardzo wygodnego opartego na perlu jêzyka &quot;markup &quot;który generuje HTML, zwyk³y tekst, PostScript, POD i inne formaty. <I>Znacznie</I> u³ati³ mi pracê. Zajrzyj na strone <A HREF="http://search.cpan.org/author/IANC/sdf-2.001/">http://search.cpan.org/author/IANC/sdf-2.001/</A></P>
<HR>
<H1><A NAME="related-packages">B. Dodatkowe pakiety</A></H1>
<H2><A NAME="dot-forward">B.1. <I>dot-forward</I></A></H2>
<P><I>Sendmail</I> u¿ywa plików <TT>.forward</TT>, co wymawia siê jako <I>dot forward</I>, by umo¿liwiæ  u¿ytkownikom kontrolê nad dostarczaniem wiadomo¶ci która otrzymali. <I>qmail</I> u¿ywa podobnego mechanizmu: plików <TT>.qmail</TT>. Pakiet <I>dot-forward</I> pozwala <I>qmail'owi</I> na u¿ywanie plików <TT>.forward</TT>. Systemy na których u¿ywano <I>Sendmail'a</I> albo innego MTA, który u¿ywa plików <TT>.forward</TT> mog± zastosowaæ ten pakiet po to by nie trzeba by³o konwertowaæ wszystkich istniej±cych plików <TT>.forward</TT> do ich <TT>qmailowego</TT> odpowiednika <TT>.qmail</TT>. W ten sposób przej¶cie na <I>qmail'a</I> mo¿e byæ mniej bolesne dla u¿ytkowników.</P>
<P><I>dot-forward</I> jest ma³ym pakietem, ³atwym do instalacji i konfiguracji. ¬ród³a s± dostêpne pod adresem <A HREF="ftp://cr.yp.to/software/dot-forward-0.71.tar.gz">ftp://cr.yp.to/software/dot-forward-0.71.tar.gz</A></P>
<P>Jego autorem jest Dan Bernstein, który prowadzi stronê www na jego temat <A HREF="http://cr.yp.to/dot-forward.html">http://cr.yp.to/dot-forward.html</A></P>
<H2><A NAME="fastforward">B.2. <I>fastforward</I></A></H2>
<P>Jest to kolejny dodatek umo¿liwiaj±cy wspó³pracê z plikami konfiguracyjnymi <I>Sendmail'a</I>. <I>Sendmail</I> u¿ywa centralnej bazy aliasów trzymanej w pojedyñczym pliku zwykle jest nim <TT>/etc/aliases</TT>. <I>qmail</I> u¿ywa wielu plików <TT>dot-qmail</TT> w <TT>/var/qmail/alias</TT>, jeden plik jest jednym aliasem. Je¶li zmieniasz MTA na <I>qmail'a</I> i masz aliasy w postaci <I>Sendmail'owej</I> których nie chcesz konwertowaæ wówczas mo¿esz u¿yæ <I>fastforward</I> by nadal z nich korzystaæ.</P>
<P>¬ród³a s± dostêpne z <A HREF="ftp://cr.yp.to/software/fastforward-0.51.tar.gz">ftp://cr.yp.to/software/fastforward-0.51.tar.gz</A></P>
<P>Autorem jest Dan Bernstein, który prowadzi tak¿e stronê na jego temat <A HREF="http://cr.yp.to/fastforward.html">http://cr.yp.to/fastforward.html</A></P>
<H2><A NAME="ucspi-tcp">B.3. <I>ucspi-tcp</I></A></H2>
<P>Serwer SMTP <I>qmail'a</I> nie pracuje jako niezale¿ny demon. Korzysta on z pomocy takich programów <I>inetd</I>, <I>xinetd</I> lub <TT>tcpserver</TT> które s± uruchamiane jako demony. Gdy taki demon otrzymuje po³±czenie na porcie 25, porcie SMTP, wówczas uruchamia kopiê <TT>qmail-smtpd</TT>.</P>
<P><I>Inetd</I> jest standardowym serwerem sieci &quot;super-serwerem&quot;. Mo¿na go skonfigurowaæ u¿ywaj±c pliku <TT>/etc/inetd.conf</TT> tak by uruchamia³ <TT>qmail-smtpd</TT> jednak programem zalecanym jest <TT>tcpserver</TT>, który jest czê¶ci± pakietu <I>ucspi-tcp</I>. <I>ucspi-tcp</I> jest akronimem UNIX Client-Server Program Interface for TCP, a wymawia siê go jako <I>ooks-pie tee see pee</I>.</P>
<P><TT>tcpserver</TT> jest lepszy od <I>inetd</I> gdy¿:</P>
<UL>
<LI>pozwala administratorowi na ustalenie limitu jednoczesnych po³±czeñ z dan± us³ug±. <I>Inetd</I> ma natomiast mechanizm chwilowego wy³±czania us³ug które s± zbyt zajête.
<LI><TT>tcpserver</TT> mo¿e byæ skonfigurowany tak by odmawiaæ dostêpu niektórym hostom lub by rozpoznawaæ hosty lokalne i oznaczaæ je po to by <TT>qmail-smtpd</TT> móg³ traktowaæ je inaczej.
<LI><TT>tcpserver</TT> jest jedynym serwerem wspieranym przez autora <I>qmail'a</I></UL>
<P>¬ród³a mo¿na pozyskaæ z <A HREF="ftp://cr.yp.to/ucspi-tcp/ucspi-tcp-0.88.tar.gz">ftp://cr.yp.to/ucspi-tcp/ucspi-tcp-0.88.tar.gz</A></P>
<P>Gerrit Pape przygotowa³ dokumentacjê dla <I>ucspi-tcp</I> w postaci stron <TT>man</TT> na <A HREF="http://smarden.org/pape/djb/">http://smarden.org/pape/djb/</A>.</P>
<P><I>ucspi-tcp</I> zosta³ napisany przez Dan'a Bernstein'a który prowadzi na jego <A HREF="http://cr.yp.to/ucspi-tcp.html">http://cr.yp.to/ucspi-tcp.html</A></P>
<H2><A NAME="daemontools">B.4. <I>daemontools</I></A></H2>
<P>Pakiet <I>daemontools</I> zawiera zbiór narzêdzi do kontrolowania i monitorowania us³ug. Nie jest on konieczny, mimo to jest bardzo zalecany, zw³aszcza dla bardzo obci±¿onych systemów. W jego sk³ad wchodz±:</P>
<UL>
<LI><TT>supervise</TT>, który monitoruje us³ugi i restartuje je je¶li przestan± dzia³aæ
<LI><TT>svc</TT>, który komunikuje siê z <TT>supervise</TT> i pozwala u¿ytkownikowi na wy³±czenie, zatrzymanie lub zrestartowanie us³ugi
<LI><TT>multilog</TT>, który zajmuje siê logowaniem komunikatów pochodz±cych od danej us³ugi, i jednocze¶nie prowadzi rotacjê plików logów tak by nie przekroczy³y wyznaczonej wielko¶ci
<LI><TT>setuidgid</TT>, który uruchamia programy z UID I GID innym ni¿ root</UL>
<P>¬ród³a <I>daemontools</I> s± dostêpne z <A HREF="http://cr.yp.to/daemontools/daemontools-0.76.tar.gz">http://cr.yp.to/daemontools/daemontools-0.76.tar.gz</A></P>
<P>Gerrit Pape przygotowa³ dokumentacjê dla <I>ucspi-tcp</I> w postaci stron <TT>man</TT> na <A HREF="http://smarden.org/pape/djb/">http://smarden.org/pape/djb/</A>.</P>
<P><I>daemontools</I> zosta³y napisane przez Dana Bernstein'a, który prowadzi na ich temat stronê <A HREF="http://cr.yp.to/daemontools.html">http://cr.yp.to/daemontools.html</A></P>
<H2><A NAME="qmailanalog">B.5. <I>qmailanalog</I></A></H2>
<P><I>qmailanalog</I> przetwarza logi <I>qmail'a</I> w celu stworzenia raportów mówi±cych jak wiele i jakiego rodzaju pracy wykonuje system. Je¶li potrzebujesz statystyk mówi±cych jak wiele wiadomo¶ci jest wysy³anych lub przysy³anych, jakiej wielko¶ci i jak szybko s± one przetwarzane, <I>qmailanalog</I> jest narzêdziem dla ciebie.</P>
<P>Dodatkowo program <TT>matchup</TT> skleja wiele linii <I>qmail'a</I> opisuj±cych wys³anie wiadomo¶ci w jedn± podobn± do tych jakie generuje <I>Sendmail</I>.</P>
<P>¬ród³a <I>qmailanalog</I> mo¿na znale¼æ na <A HREF="http://cr.yp.to/software/qmailanalog-0.70.tar.gz">http://cr.yp.to/software/qmailanalog-0.70.tar.gz</A></P>
<P><I>qmailanalog</I> zosta³ napisany przez Dana Bernstein'a, a jego stron± domow± jest <A HREF="http://cr.yp.to/qmailanalog.html">http://cr.yp.to/qmailanalog.html</A></P>
<P><HR WIDTH="80%" ALIGN="Left">
<STRONG>Uwaga: </STRONG><I>qmailanalog</I> korzysta ze znaczników czasu znajduj±cych siê w logach w postaci dziesiêtnych czê¶ci sekundy u¿ywanych przez <TT>accustamp'a</TT>. Je¶li chcesz u¿ywaæ go wraz z logami wygenerowanymi przez <TT>multilog'a</TT>, które s± w formacie TAI64N, bêdziesz potrzebowa³ przet³umaczyæ je do starego formatu. Jednym z programów, których mo¿esz u¿yc jest <A HREF="http://www.qmail.org/tai64nfrac">http://www.qmail.org/tai64nfrac</A>
<HR WIDTH="80%" ALIGN="Left"></P>
<H2><A NAME="rblsmtpd">B.6. <I>rblsmtpd</I></A></H2>
<P>Je¶li nigdy nie otrzyma³e¶ spamu <I>masz szczê¶cie</I>. Wiêkszo¶æ u¿ytkowników poczty czêsto go otrzymuje. Zwykle s± to reklamy stron po¶wiêconych seksowi, ³añcuszki szczê¶cia itp. Od pocz±tku powstania internetu do roku 1998 wiêkszo¶æ MTA by³a <I>open relay'ami</I>, czyli przyjmowa³y pocztê od ka¿dego <I>dla</I> ka¿dego, nawet je¶li ani nadawca, ani odbiorca nie byli u¿ytkownikami lokalnymi. Spammerzy u¿ywaj± open relay'ow, gdy¿ zacieraj± one ich ¶lady, wskazuj±c na &quot;niewinne&quot; serwery open relay oraz oszczêdzaj± im wiele czasu procesora i nie obci±¿aj± ich ³±cza.</P>
<P>Obecnie open relay'e s± uznawane za <B>bardzo</B> z³e, powsta³o kilka grup anty-spamowych, które stworzy³y mechanizmy identyfikacji open relay'ów i innych ¼róde³ spamu po to by unikaæ po³±czeñ przychodz±cych z takich miejsc.</P> 
<P><I>rblsmtpd</I> jest demonem RBL SMTP. Pracuje on pomiêdzy <TT>tcpserver'em</TT> i <TT>qmail-smtpd</TT> i odrzuca po³±czenia od systemów znajduj±cych sie na jednej z tych list.</P>
<P>Przyk³adowo by uruchomiæ <TT>rblsmtpd</TT> pod <TT>tcpserver'em</TT>, napisz:</P>
<PRE>
    #!/bin/sh
    QMAILDUID=`id -u qmaild`
    NOFILESGID=`id -g qmaild`
    MAXSMTPD=`cat /var/qmail/control/concurrencyincoming`
    exec /usr/local/bin/softlimit -m 2000000 \
    /usr/local/bin/tcpserver -v -R -H -l 0 -x /etc/tcp.smtp.cdb -c &quot;$MAXSMTPD&quot; \
        -u &quot;$QMAILDUID&quot; -g &quot;$NOFILESGID&quot; 0 smtp /usr/local/bin/rblsmtpd\
        -r relays.ordb.org /var/qmail/bin/qmail-smtpd 2&gt;&amp;1
</PRE>
<P><I>rblsmtpd</I> by³ wcze¶niej dostêpny jako osobne narzêdzie, jednak obecnie jest rozprowadzany razem z <A HREF="#ucspi-tcp">ucspi-tcp</A>.</P>
<P><I>rblsmtpd</I> zosta³ napisany przez Dan'aBernstein'a, który prowadzi stronê na jego temat pod adresem <A HREF="http://cr.yp.to/ucspi-tcp/rblsmtpd.html">http://cr.yp.to/ucspi-tcp/rblsmtpd.html</A>.</P>
<H2><A NAME="serialmail">B.7. <I>serialmail</I></A></H2>
<P><I>qmail</I> zosta³ stworzony dla serwerów maj±cych sta³e i szybkie po³±czenie z internetem. <I>serialmail</I> jest zbiorem narzêdzi które dostosowuj± <I>qmail'a</I> do pracy na wolnym i pracuj±cym z przerwami ³±czu. Konfiguruje on <I>qmail'a</I> do dostarczania ca³ej poczty wysy³anej na zewn±trz do jednego konta w formacie maildir. W jego sk³ad wchodzi polecenie <TT>maildir2smtp</TT> u¿ywane do rozpoczêcia wysy³ania poczty poprzez hub'a ISP w momencie w którym wstaje ³±cze. Je¶li ISP u¿ywa QMTP (zajrzyj do rozdzia³u po¶wiêconego <A HREF="#qmtp">QMTP</A>) mo¿na u¿yæ polecenia <TT>maildir2qmtp</TT>.</P>
<P><I>serialmail</I> mo¿e byæ tak¿e u¿yty w celu implementacji <I>AutoTURN</I>: po³±czenie SMTP od klienta powoduje, ¿e serwer nawi±zuje po³±czenie w drug± stronê w celu przes³ania wiadomo¶ci znajduj±cych sie kolejce, a przeznaczonych dla klienta. Jest to podobne do funkcji ETRN w SMTP.</P>
<P>¬ród³a <I>serialmail</I> s± dostêpne z <A HREF="http://cr.yp.to/software/serialmail-0.75.tar.gz">http://cr.yp.to/software/serialmail-0.75.tar.gz</A></P>
<P><I>serialmail</I> zosta³ napisany przez Dana Bernstein'a, a jego stron± jest <A HREF="http://cr.yp.to/serialmail.html">http://cr.yp.to/serialmail.html</A></P>
<H2><A NAME="mess822">B.8. <I>mess822</I></A></H2>
<P><I>mess822</I> jest bibliotek± i zbiorem aplikacji analizuj±cych wiadomo¶ci zgodne z RFC 822. W jej sk³ad wchodz±:</P>
<UL>
<LI><TT>ofmipd</TT>: demon który przyjmuje wiadomo¶ci od klientów i zmienia pole From na podstawie bazy danych.
<LI><TT>new-inject</TT>: zastêpuje <TT>qmail-inject</TT> i umo¿liwia u¿ytkownikowi na zmienianie nazwy hosta
<LI><TT>iftocc</TT>: narzêzie sprawdzaj±ce czy wiadomo¶æ zosta³a wys³ana do okre¶lonego adresu
<LI><TT>822header</TT>, <TT>822field</TT>, <TT>822date</TT>, i <TT>822received</TT>: s³u¿± do wyci±gania informacji z wiadomo¶ci
<LI><TT>822print</TT>: drukuje wiadomo¶ci</UL>
<P>¬ród³a <I>mess822</I> s± dostêpne na <A HREF="http://cr.yp.to/software/mess822-0.58.tar.gz">http://cr.yp.to/software/mess822-0.58.tar.gz</A></P>
<P>Jego autorem jest Dan Bernstein, który utrzymuje stronê po¶wiêcon± temu programowi na <A HREF="http://cr.yp.to/mess822.html">http://cr.yp.to/mess822.html</A></P>
<H2><A NAME="ezmlm">B.9. <I>ezmlm</I></A></H2>
<P><I>ezmlm</I> jest wydajnym, ³atwym w u¿yciu menad¿erem list dyskusyjnych (MLM) dla <I>qmail'a</I>. Je¶li mia³e¶ styczno¶æ z <I>LISTSERV'em</I> lub <I>Majordomo</I> wiesz dobrze czym zajmuje sie MLM. Je¶li nie wiesz zajrzyj do rozdzia³u po¶wiêconego <A HREF="#mailing-list-managers">Menad¿erowie list dyskusysyjnych</A></P>
<P>¬ród³a <I>ezmlm</I> znajduj± siê na <A HREF="http://cr.yp.to/software/ezmlm-0.53.tar.gz">http://cr.yp.to/software/ezmlm-0.53.tar.gz</A></P>
<P>Program ten zosta³ napisany przez Dana Bernstein'a, adresem jego strony jest <A HREF="http://cr.yp.to/ezmlm.html">http://cr.yp.to/ezmlm.html</A></P>
<P>Fred Lindberg i Fred B. Ringel stworzyli rozszerzenie dla <I>ezmlm</I> nazwane <I>ezmlm-idx</I>. Ma ono wiele dodatkowych cech i jest bardzo zalecane. Mo¿na je pobraæ z <A HREF="http://www.ezmlm.org/">http://www.ezmlm.org/</A>.</P>
<H2><A NAME="safecat">B.10. <I>safecat</I></A></H2>
<P><I>safecat</I> wiarygodnie zapisuje plik do skrzynki pocztowej w formacie maildir. Jest u¿yteczny zw³aszcza je¶li u¿ywasz <I>procmail'a</I>. Przyk³adowo poni¿sze linie zapisuj± wszystkie wiadomo¶ci do <TT>Maildir</TT>:</P>
<PRE>
:0w
|safecat Maildir/tmp Maildir/new
</PRE>
<P>Autorem <I>safecat</I> jest Len Budney, a jego stron± domow± <A HREF="http://www.pobox.com/~lbudney/linux/software/safecat.html">http://www.pobox.com/~lbudney/linux/software/safecat.html</A>.</P>
<H2><A NAME="djbdns">B.11. <I>djbdns</I></A></H2>
<P><I>djbdns</I> jest serwerem DNS napisanym przez autora <I>qmail'a</I>. W jego sk³ad wchodzi <TT>tinydns</TT>, serwer nazw DNS oraz <TT>dnscache</TT>, cachuj±cy serwer DNS.</P>
<P>Oficjaln± stron± <I>djbdns</I> jest <A HREF="http://cr.yp.to/djbdns.html">http://cr.yp.to/djbdns.html</A>.</P>
<H2><A NAME="maildrop">B.12. <I>maildrop</I></A></H2>
<P><I>maildrop</I> jest filtrem pocztowym podobnym do <I>procmail'a</I>. 
<P>Autorem maildrop jest Sam Varshavchik, adres strony to <A HREF="http://www.flounder.net/~mrsam/maildrop">http://www.flounder.net/~mrsam/maildrop</A></P>
<H2><A NAME="syncdir">B.13. <I>syncdir</I></A></H2>
<P><I>syncdir</I> jest ma³± blibliotek± która wykonuje synchronicznie wywo³ania systemowe <TT>link()</TT>. Jest ona przydatna gdy u¿ywasz <I>qmail'a</I> z kolejka przechowywan± w systemie plików który nie wykonuje <TT>link()</TT> synchronicznie czyli przyk³adowo w ext2fs, Reiserfs, XFS w SGI i FFS z softupdates w BSD.</P>
<P><I>syncdir</I> zosta³ napisany przez Bruce'a Guenter'a i jest do ¶ci±gniêcia z <A HREF="http://untroubled.org/syncdir/">http://untroubled.org/syncdir/</A>. Instalacja opisana jest na <A HREF="http://www.ornl.gov/its/archives/mailing-lists/qmail/2001/12/msg00949.html">http://www.ornl.gov/its/archives/mailing-lists/qmail/2001/12/msg00949.html</A>.</P>

<HR>
<H1><A NAME="how-mail-works">C. Jak dzia³a poczta w internecie</A></H1>
<H2><A NAME="from-a-to-b">C.1. W jaki sposób wiadomo¶æ jest przekazywana z punktu A do B</A></H2>
<P>Je¶li u¿ytkownik z jednego hostu wysy³a wiadomo¶æ do u¿ytkownika znajduj±cego siê na innym ho¶cie wydarza siê wiele rzeczy z których byæ mo¿e nie zdajesz sobie sprawy.</P>
<P>Powiedzmy, ¿e Alice, <TT>alice@alpha.example.com</TT>, chce wys³aæ wiadomo¶æ do Bob'a <TT>bob@beta.example.com</TT>. Oto co siê dzieje:</P>
<OL>
<LI>Alice tworzy wiadomo¶æ przy u¿yciu jej programu pocztowego (MUA), czego¶ podobnego do <I>pine'a</I> lub <I>mutt'a</I>. Podaje odbiorcê w polu <I>To</I>, temat w polu <I>Subject</I> oraz wpisuje tre¶æ wiadomo¶ci. Wygl±da to mniej wiêcej tak:</OL>
<PRE>
    To: bob@beta
    Subject: lunch

    Mo¿e zjemy pizzê ?
</PRE>
<OL>
<LI>Gdy ju¿ zakoñczy³a pisanie maila, wydaje polecenie MUA by j± wys³a³.
<LI>W tym momencie MUA mo¿e dodaæ dodatkowe pola jak <I>Date</I> i <I>Message-Id</I> a tak¿e zmodyfikowaæ niektóre z warto¶ci które Alice wpisa³a, np. zamieniæ <TT>bob@beta</TT> na <TT>&quot;Bob &lt;bob@beta.example.com</TT>&gt;&quot;. Nastêpnie MUA <I>wprowadza</I> wiadomo¶æ do systemu pocztowego. S± dwa mo¿liwe sposoby których mo¿e u¿yæ: mo¿e uruchomiæ program znajduj±cy siê w systemie pocztowym przeznaczony do tego celu, lub mo¿e nawi±zaæ po³±czenie do portu SMTP do serwera lokalnego lub zewnêtrznego. W tym przyk³adzie przyjmijmy, ¿e MUA u¿y³ pierwszego z tych sposobów, by przes³aæ wiadomo¶æ do MTA. W zale¿no¶ci od MTA wprowadzanie wiadomo¶ci mo¿e siê nieco ró¿niæ ale na systemach UNIX'owych standardem jest metoda <I>Sendmail'owa</I>. W tej metodzie MUA zapisuje do jednego pliku nag³ówek oraz tre¶æ wiadomo¶ci oddzielaj±c je pust± lini±, i przekazuje ten plik do <TT>Sendmail'a</TT>.
<LI>Je¶li wprowadzanie wiadomo¶ci zakoñczy siê sukcesem - wiadomo¶æ okaza³a siê sk³adniowo poprawna, a <TT>Sendmail</TT> zosta³ poprawnie wywo³any - od tego momentu za wiadomo¶æ odpowiada MTA. Szczegó³y s± w du¿ej mierze uzale¿nione od MTA, ale generalnie MTA na alpha sprawdza nag³ówek by dowiedzieæ siê gdzie wys³aæ wiadomo¶æ, nawi±zuje po³±czenie SMTP do beta i przesy³a wiadomo¶æ do MTA na beta. W trakcie przekazywania wiadomo¶ci poprzez SMTP wysy³ana jest ona w dwóch czê¶ciach: <I>koperta</I>, która okre¶la adres odbiorcy (<TT>bob@beta.example.com</TT>) i adres zwrotny (<TT>alice@alpha.example.com</TT>), a nastêpnie sam± wiadomo¶æ, która sk³ada siê z nag³ówka i tre¶ci.
<LI>Je¶li MTA na beta odrzuci wiadomo¶æ, chocia¿by dlatego ¿e nie ma na tym systemie u¿ytkownika o nazwie <I>bob</I>, wówczas MTA na alpha wysy³a <I>bounce</I> do adresu zwrotnego, <TT>alice@alpha</TT>, by zawiadomiæ j± o problemie.
<LI>Je¶li MTA na beta zaakceptuje wiadomo¶æ, sprawdza adres odbiorcy, by oceniæ czy jest to u¿ytkownik lokalny. W naszym przyk³adzie jest to prawda zatem MTA sam zajmuje siê dostarczeniem wiadomo¶ci lub przekazuje j± do MDA - programu dostarczaj±cego pocztê - takiego jak <TT>/bin/mail</TT> lub <TT>procmail</TT>.
<LI>Je¶li proces dostarczania zakoñczy siê niepowodzeniem, gdy¿ Bob móg³ np. przekroczyæ wielko¶æ swojej skrzynki pocztowej, wówczas beta wysy³a bounce do adresu zwrotnego z koperty <TT>alice@alpha</TT>.
<LI>Je¶li dostarczanie zakoñczy siê sukcesem, wiadomo¶æ czeka w skrzynce pocztowej Boba, a¿ jego MUA przeczyta j± i wy¶wietli.</OL>
<H2><A NAME="more-information">C.2. Wiêcej informacji</A></H2>
<P>By dowiedzieæ siê bardziej szczegó³owo jak dzia³a poczta w Internecie, skorzystaj z jednego z poni¿szych ¼róde³:</P>
<UL>
<LI>Internet mail, autora <I>qmail'a</I>. <I>qmail</I>. <A HREF="http://cr.yp.to/im.html">http://cr.yp.to/im.html</A>
<LI>SMTP, autora <I>qmail'a</I>. <I>qmail</I>. <A HREF="http://cr.yp.to/smtp.html">http://cr.yp.to/smtp.html</A>
<LI>Internet mail message header format, autora <I>qmail'a</I>. <I>qmail</I>. <A HREF="http://cr.yp.to/immhf.html">http://cr.yp.to/immhf.html</A></UL>
<H3><A NAME="rfcs">C.2.1. </A></H3>
<P>RFC (internetowe pro¶by o komentarze) s± oficjaln± dokumentacj± Internetu. Wiêkszo¶æ z nich to znacznie wiêcej ni¿ zwyk³e komentarze, gdy¿ opisuje protoko³y u¿ywane w Internecie takie jak TCP, FTP, Telnet oraz ró¿ne standardy poczty i protoko³y.</P>
<UL>
<LI>RFC 821, Simple Mail Transfer Protocol. <A HREF="http://www.ietf.org/rfc/rfc0821.txt">http://www.ietf.org/rfc/rfc0821.txt</A>
<LI>RFC 822, Standard for the Format of ARPA Internet Text Messages. <A HREF="http://www.ietf.org/rfc/rfc0822.txt">http://www.ietf.org/rfc/rfc0822.txt</A>
<LI>RFC 931, Authentication Server. <A HREF="http://www.ietf.org/rfc/rfc0931.txt">http://www.ietf.org/rfc/rfc0931.txt</A>
<LI>RFC 974, Mail Routing and the Domain System. <A HREF="http://www.ietf.org/rfc/rfc0974.txt">http://www.ietf.org/rfc/rfc0974.txt</A>
<LI>RFC 1123, Requirements for Internet Hosts -- Application and Support. <A HREF="http://www.ietf.org/rfc/rfc1123.txt">http://www.ietf.org/rfc/rfc1123.txt</A>
<LI>RFC 1413, Identification Protocol. <A HREF="http://www.ietf.org/rfc/rfc1413.txt">http://www.ietf.org/rfc/rfc1413.txt</A>
<LI>RFC 1423, Privacy Enhancement for Internet Electronic Mail: Part III: Algorithms, Modes, and Identifiers. <A HREF="http://www.ietf.org/rfc/rfc1423.txt">http://www.ietf.org/rfc/rfc1423.txt</A>
<LI>RFC 1651, SMTP Service Extensions. <A HREF="http://www.ietf.org/rfc/rfc1651.txt">http://www.ietf.org/rfc/rfc1651.txt</A>
<LI>RFC 1652, SMTP Service Extension for 8bit-MIMEtransport. <A HREF="http://www.ietf.org/rfc/rfc1652.txt">http://www.ietf.org/rfc/rfc1652.txt</A>
<LI>RFC 1806, Content disposition. header. <A HREF="http://www.ietf.org/rfc/rfc1806.txt">http://www.ietf.org/rfc/rfc1806.txt</A>
<LI>RFC 1854, SMTP Service Extension for Command Pipelining. <A HREF="http://www.ietf.org/rfc/rfc1854.txt">http://www.ietf.org/rfc/rfc1854.txt</A>
<LI>RFC 1891, SMTP Service Extension for Delivery Status Notifications. <A HREF="http://www.ietf.org/rfc/rfc1891.txt">http://www.ietf.org/rfc/rfc1891.txt</A>
<LI>RFC 1892, The Multipart/Report Content Type for the Reporting of Mail System Administrative
<LI>RFC 1893, Enhanced mail system status codes. <A HREF="http://www.ietf.org/rfc/rfc1893.txt">http://www.ietf.org/rfc/rfc1893.txt</A>
<LI>RFC 1894, An Extensible Message Format for Delivery Status Notifications. <A HREF="http://www.ietf.org/rfc/rfc1894.txt">http://www.ietf.org/rfc/rfc1894.txt</A>
<LI>RFC 1939, Post Office Protocol - Version 3. <A HREF="http://www.ietf.org/rfc/rfc1939.txt">http://www.ietf.org/rfc/rfc1939.txt</A>
<LI>RFC 1985, SMTP Service Extension for Remote Message Queue Starting (ETRN). <A HREF="http://www.ietf.org/rfc/rfc1985.txt">http://www.ietf.org/rfc/rfc1985.txt</A>
<LI>RFC 1991, PGP Message Exchange Formats. <A HREF="http://www.ietf.org/rfc/rfc1991.txt">http://www.ietf.org/rfc/rfc1991.txt</A>
<LI>RFC 2015, MIME Security with Pretty Good Privacy. (PGP). <A HREF="http://www.ietf.org/rfc/rfc2015.txt">http://www.ietf.org/rfc/rfc2015.txt</A>
<LI>RFC 2045, MIME Internet message bodies. <A HREF="http://www.ietf.org/rfc/rfc2045.txt">http://www.ietf.org/rfc/rfc2045.txt</A>
<LI>RFC 2046, MIME Media Types. <A HREF="http://www.ietf.org/rfc/rfc2046.txt">http://www.ietf.org/rfc/rfc2046.txt</A>
<LI>RFC 2047, MIME Headers. <A HREF="http://www.ietf.org/rfc/rfc2047.txt">http://www.ietf.org/rfc/rfc2047.txt</A>
<LI>RFC 2048, MIME Registration Procedures. <A HREF="http://www.ietf.org/rfc/rfc2048.txt">http://www.ietf.org/rfc/rfc2048.txt</A>
<LI>RFC 2049, MIME Conformance Criteria. <A HREF="http://www.ietf.org/rfc/rfc2049.txt">http://www.ietf.org/rfc/rfc2049.txt</A>
<LI>RFC 2142, Mailbox names for common services. <A HREF="http://www.ietf.org/rfc/rfc2142.txt">http://www.ietf.org/rfc/rfc2142.txt</A>
<LI>RFC 2183, Content Disposition header. <A HREF="http://www.ietf.org/rfc/rfc2183.txt">http://www.ietf.org/rfc/rfc2183.txt</A></UL>
<LI>RFC 2821, Simple Mail Transfer Protocol. <A HREF="http://www.ietf.org/rfc/rfc2821.txt">http://www.ietf.org/rfc/rfc2821.txt</A>
<LI>RFC 2822, Internet Message Format <A HREF="http://www.ietf.org/rfc/rfc2822.txt">http://www.ietf.org/rfc/rfc2822.txt</A></UL>
<P>Wyczerpuj±ca lista RFC zwi±zanych z poczt± jest dostêpna na stronie Internet Mail Consortium, <A HREF="http://www.imc.org/mail-standards.html">http://www.imc.org/mail-standards.html</A></P>
<HR>
<H1><A NAME="architecture-apdx">D. Architektura</A></H1>
<H2><A NAME="modular">D.1. Modularna architektura systemu</A></H2>
<P>Internetowe MTA wykonuj± ró¿ne zadania. Wcze¶niejsze z tych programów jak <I>Sendmail</I> czy <I>smail</I> maj± budowê <I>monolityczn±</I>. Innymi s³owy, zbudowane s± z jednego, wielkiego programu, który spe³nia wszystkie funkcje: jest serwerem MTA, klientem MTA, dostarcza wiadomo¶ci lokalnie, obs³uguje kolejkê itp.</P>
<P><I>qmail</I> ma budowê <I>modularn±</I>. Ka¿da z tych funkcji wykonywana jest przez oddzielny program. W efekcie programy s± mniejsze, prostsze i jest mniej prawdopodobne, ¿e bêd± zawiera³y b³êdy funkcjonalne lub zwi±zane z bezpieczeñstwem. By jeszcze bardziej zwiêkszyæ bezpieczeñstwo modu³y <I>qmail'a</I> pracuj± z ró¿nymi uprawnieniami, &quot;nie ufaj±&quot; sobie wzajemnie: nie zak³adaj± ¿e inne modu³y robi± tylko to do czego zosta³y przeznaczone.</P>
<P>Najwa¿niejsze modu³y:</P>
<TABLE CLASS="columns" BORDER>
<TR CLASS="heading">
<TD>
<STRONG>Nazwa</STRONG>
</TD>
<TD>
<STRONG>Funkcja</STRONG>
</TD>
</TR>
<TR>
<TD>
<TT>qmail-smtpd</TT>
</TD>
<TD>
akceptuje/odrzuca wiadomo¶ci poprzez SMTP
</TD>
</TR>
<TR>
<TD>
<TT>qmail-inject</TT>
</TD>
<TD>
pobiera wiadomo¶ci lokalne do dostarczenia
</TD>
</TR>
<TR>
<TD>
<TT>qmail-rspawn/qmail-remote</TT>
</TD>
<TD>
dostarcza wiadomo¶ci na zewn±trz
</TD>
</TR>
<TR>
<TD>
<TT>qmail-lspawn/qmail-local</TT>
</TD>
<TD>
dostarcza wiadomo¶ci lokalnie
</TD>
</TR>
<TR>
<TD>
<TT>qmail-send</TT>
</TD>
<TD>
przetwarza kolejkê
</TD>
</TR>
<TR>
<TD>
<TT>qmail-clean</TT>
</TD>
<TD>
czy¶ci kolejkê
</TD>
</TR>
</TABLE>

<P>S± tak¿e pewne minusy zwi±zane z budow± modularn±. Inaczej ni¿ w przypadku monolitycznych MTA, kontakty pomiêdzy modu³ami s± dobrze zdefiniowane, a modu³y wymieniaj± miêdzy sob± tylko minimum potrzebnych informacji. Generalnie jest to Dobra Rzecz, ale czasami utrudnia ¿ycie. Przyk³adowo flaga &quot;-v&quot; w <TT>Sendailu</TT> powoduje, ¿e wypisuje on na wyj¶cie standardowe informacje o swoim dzia³aniu co mo¿e u³atwiæ wyszukiwanie b³êdów. Poniewa¿ jeden program robi wszystko, wiêc z ³atwo¶ci± mo¿e on informowaæ o podejmowanych przez siebie dzia³aniach w celu dostarczenia wiadomo¶ci. <I>qmail</I> nie ma podobnych mo¿liwo¶ci, w celu ich dodania nale¿a³oby dokonaæ sporych zmian w kodzie, by poinformowac modu³y ¿e obecnie jeste¶my w trybie debuggowania.</P>
<H2><A NAME="file-structure">D.2. Struktura plików</A></H2>
<P><TT>/var/qmail</TT> jest g³ównym katalogiem <I>qmail'a</I>. Mo¿na to zmieniæ w momencie kompilacji <I>qmail'a</I>, jednak¿e najlepiej pozostawiæ go bez zmian, wówczas inni administratorzy bêd± wiedzieli gdzie szukaæ jakich plików. Je¶li bardzo zale¿y ci na zmianie niektórych jego katalogów najlepiej zrobiæ to przy u¿yciu symbolicznych linków. Zobacz do podrozdzia³u <A HREF="#create-dirs">Tworzenie katalogów</A> w rozdziale po¶wiêconym Instalacji.</P>
<P>Podkatalogi g³ównego katalogu:</P>
<TABLE CLASS="columns" BORDER>
<TR CLASS="heading">
<TD>
<STRONG>Katalog</STRONG>
</TD>
<TD>
<STRONG>Zawarto¶æ</STRONG>
</TD>
</TR>
<TR>
<TD>
<TT>alias</TT>
</TD>
<TD>
pliki <TT>.qmail</TT> aliasów systemowych
</TD>
</TR>
<TR>
<TD>
<TT>bin</TT>
</TD>
<TD>
binaria i skrypty
</TD>
</TR>
<TR>
<TD>
<TT>boot</TT>
</TD>
<TD>
skrypty startowe
</TD>
</TR>
<TR>
<TD>
<TT>control</TT>
</TD>
<TD>
pliki konfiguracyjne
</TD>
</TR>
<TR>
<TD>
<TT>doc</TT>
</TD>
<TD>
dokumentacja (oprócz stron man)
</TD>
</TR>
<TR>
<TD>
<TT>man</TT>
</TD>
<TD>
strony man
</TD>
</TR>
<TR>
<TD>
<TT>queue</TT>
</TD>
<TD>
kolejka nie wys³anych wiadomo¶ci
</TD>
</TR>
<TR>
<TD>
<TT>users</TT>
</TD>
<TD>
pliki bazy danych <TT>qmail-users</TT>
</TD>
</TR>
</TABLE>

<H2><A NAME="queue-structure">D.3. Struktura kolejki</A></H2>
<P>Plik <TT>INTERNALS</TT> w katalogu w którym znajduj± siê pliki ¼ród³owe <I>qmail'a</I> opisuje szczegó³owo proces kolejkowania. Mo¿na tam znale¼æ na ten temat wiêcej informacji.</P>
<TABLE CLASS="columns" BORDER>
<TR CLASS="heading">
<TD>
<STRONG>Podkatalog</STRONG>
</TD>
<TD>
<STRONG>Zawarto¶æ</STRONG>
</TD>
</TR>
<TR>
<TD>
bounce
</TD>
<TD>
trwa³e b³êdy w dostarczaniu
</TD>
</TR>
<TR>
<TD>
info*
</TD>
<TD>
adres nadawcy z koperty
</TD>
</TR>
<TR>
<TD>
intd
</TD>
<TD>
koperta w trakcie tworzenia przez <TT>qmail-queue</TT>
</TD>
</TR>
<TR>
<TD>
local*
</TD>
<TD>
adresy odbiorców z kopert lokalnych
</TD>
</TR>
<TR>
<TD>
lock
</TD>
<TD>
pliki blokady (lock files)
</TD>
</TR>
<TR>
<TD>
mess*
</TD>
<TD>
pliki z wiadomo¶ciami
</TD>
</TR>
<TR>
<TD>
pid
</TD>
<TD>
u¿ywane przez <TT>qmail-queue</TT> by uzyskaæ numer i-nodu
</TD>
</TR>
<TR>
<TD>
remote*
</TD>
<TD>
adresy nadawców z kopert zewnêtrznych
</TD>
</TR>
<TR>
<TD>
todo
</TD>
<TD>
kompletne koperty
</TD>
</TR>
</TABLE>

<P><HR WIDTH="80%" ALIGN="Left">
<STRONG>Uwaga: </STRONG>katalogi oznaczone &quot;*&quot; zawieraj± wiele podkatalogów o nazwach &quot;0&quot;, &quot;1&quot;, ..., a¿ do (<I>conf-split</I>-1), gdzie <I>conf-split</I> jest zmienn± ustawian± w trakcie kompilacji zawart± w pliku <TT>conf-split</TT> w katalogu ze ¼ród³ami <I>qmail'a</I>. Domy¶lnie jest to 23. Celem podzielenia tego katalogu na podkatalogi jest zmniejszenie liczby plików znajduj±cych siê w pojedyñczym katalogu na bardzo zat³oczonych serwerach.
<HR WIDTH="80%" ALIGN="Left"></P>
<P>Pliki w katalogu <TT>mess</TT> nazwane s± na podstawie numeru i-node. Oznacza to, ¿e nie mo¿esz rêcznie ich przenosiæ u¿ywaj±c standardowych narzêdzi UNIXa takich jak <TT>mv</TT>, <TT>dump</TT>/<TT>restore</TT>, i <TT>tar</TT>. Istnieje kilka narzêdzi napisanych przez u¿ytkowników qmail'a na <A HREF="http://www.qmail.org">http://www.qmail.org</A> które potrafi± prawdid³owo zmieniaæ nazwy plików w kolejce.</P>
<P><HR WIDTH="80%" ALIGN="Left">
<STRONG>Uwaga: </STRONG><B>nie jest bezpiecznie modyfikowaæ pliki z kolejki jesli <I>qmail</I> pracuje</B>. Je¶li chcesz zmodyfikowaæ kolejkê, najpierw zatrzymaj <I>qmail'a</I>, ostro¿nie wprowad¼ zmiany, a nastêpnie go uruchom.
<HR WIDTH="80%" ALIGN="Left"></P>
<H2><A NAME="pictures">D.4. Szkice</A></H2>
<P>W katalogu <TT>/var/qmail/doc</TT> znajduj± siê pliki o nazwach zaczynaj±cych siê na <TT>PIC</TT>. S± to tekstowe &quot;obrazy&quot; ró¿nych sytuacji wystêpuj±cych w trakcie dzia³ania <I>qmail'a</I>. Pokazuj± w jaki sposób kontaktuj± siê ze sob± poszczególne modu³y i s± bardzo pomocne w trakcie debuggowania oraz tworzenia z³o¿onych konfiguracji.</P>
<TABLE CLASS="columns" BORDER>
<TR CLASS="heading">
<TD>
<STRONG>Nazwa pliku</STRONG>
</TD>
<TD>
<STRONG>Zawarto¶æ</STRONG>
</TD>
</TR>
<TR>
<TD>
PIC.local2alias
</TD>
<TD>
wiadomo¶ci wprowadzone lokalnie dostarczane do lokalnego aliasa
</TD>
</TR>
<TR>
<TD>
PIC.local2ext
</TD>
<TD>
wiadomo¶ci wprowadzone lokalnie dostarczane do adresu rozszerzonego
</TD>
</TR>
<TR>
<TD>
PIC.local2local
</TD>
<TD>
wiadomo¶ci wprowadzone lokalnie dostarczane do u¿ytkownika lokalnego
</TD>
</TR>
<TR>
<TD>
PIC.local2rem
</TD>
<TD>
wiadomo¶ci wprowadzone lokalnie dostarczane do adresu zewnêtrznego
</TD>
</TR>
<TR>
<TD>
PIC.local2virt
</TD>
<TD>
wiadomo¶ci wprowadzone lokalnie dostarczane do adresu w lokalnej domenie wirtualnej
</TD>
</TR>
<TR>
<TD>
PIC.nullclient
</TD>
<TD>
wiadomo¶ci wprowadzone lokalnie on a null client
</TD>
</TR>
<TR>
<TD>
PIC.relaybad
</TD>
<TD>
nieudana próba wykorzystania hostu lokalnego jako relay'a
</TD>
</TR>
<TR>
<TD>
PIC.relaygood
</TD>
<TD>
udana próba wykorzystania hostu lokalnego jako relay'a
</TD>
</TR>
<TR>
<TD>
PIC.rem2local
</TD>
<TD>
wiadomo¶æ dostarczona poprzez SMTP dla u¿ytkownika lokalnego
</TD>
</TR>
</TABLE>

<P>Pliki te s± dostêpne tak¿e on-line:</P>
<UL>
<LI><A HREF="http://www.qmail.org/man/index.html">http://www.qmail.org/man/index.html</A></UL>
<P>Je¶li chcesz zobaczyæ <I>prawdziwe</I> obrazki <I>qmail'a</I> sprawd¼ &quot;wielki obraz qmaila&quot; Andre Opperman'a na <A HREF="http://www.nrg4u.com/">http://www.nrg4u.com/</A></P>
<HR>
<H1><A NAME="IAQ">E. Nieczêsto zadawane pytania</A></H1>
<P>Poni¿sze pytania nie kwalifikuj± siê do <I>czêsto</I> (FAQ) zadawanych, ale s± wa¿ne i odpowiedzi na nie nie nale¿± do prostych.</P>
<H2><A NAME="retry-schedule">E.1. Jak czêsto qmail próbuje wys³aæ oczekuj±c± wiadomo¶æ ?</A></H2>
<P>Ka¿da wiadomo¶æ ma swój harmonogram prób dostarczenia. Im d³u¿ej wiadomo¶æ nie jest dostarczona, tym rzadziej <I>qmail</I> próbuje j± wys³aæ. Nie mo¿na zmieniæ harmonogramu dostarczania. Poni¿sza tabela pokazuje kiedy <I>qmail</I> próbuje wys³aæ wiadomo¶æ na zewn±trz a¿ do momentu gdy uzna j± za niedostarczon±. Warto¶ci dla dostarczeñ lokalnych s± podobne, tyle ¿e próby wystêpuj± czê¶ciej.</P>
<TABLE CLASS="columns" BORDER>
<TR CLASS="heading">
<TD>
<STRONG>proba dostarczenia</STRONG>
</TD>
<TD>
<STRONG>sekundy</STRONG>
</TD>
<TD>
<STRONG>dzieñ-godz:min:sek</STRONG>
</TD>
</TR>
<TR>
<TD>
1
</TD>
<TD>
0
</TD>
<TD>
0-00:00:00
</TD>
</TR>
<TR>
<TD>
2
</TD>
<TD>
400
</TD>
<TD>
0-00:06:40
</TD>
</TR>
<TR>
<TD>
3
</TD>
<TD>
1600
</TD>
<TD>
0-00:26:40
</TD>
</TR>
<TR>
<TD>
4
</TD>
<TD>
3600
</TD>
<TD>
0-01:00:00
</TD>
</TR>
<TR>
<TD>
5
</TD>
<TD>
6400
</TD>
<TD>
0-01:46:40
</TD>
</TR>
<TR>
<TD>
6
</TD>
<TD>
10000
</TD>
<TD>
0-02:46:40
</TD>
</TR>
<TR>
<TD>
7
</TD>
<TD>
14400
</TD>
<TD>
0-04:00:00
</TD>
</TR>
<TR>
<TD>
8
</TD>
<TD>
19600
</TD>
<TD>
0-05:26:40
</TD>
</TR>
<TR>
<TD>
9
</TD>
<TD>
25600
</TD>
<TD>
0-07:06:40
</TD>
</TR>
<TR>
<TD>
10
</TD>
<TD>
32400
</TD>
<TD>
0-09:00:00
</TD>
</TR>
<TR>
<TD>
11
</TD>
<TD>
40000
</TD>
<TD>
0-11:06:40
</TD>
</TR>
<TR>
<TD>
12
</TD>
<TD>
48400
</TD>
<TD>
0-13:26:40
</TD>
</TR>
<TR>
<TD>
13
</TD>
<TD>
57600
</TD>
<TD>
0-16:00:00
</TD>
</TR>
<TR>
<TD>
14
</TD>
<TD>
67600
</TD>
<TD>
0-18:46:40
</TD>
</TR>
<TR>
<TD>
15
</TD>
<TD>
78400
</TD>
<TD>
0-21:46:40
</TD>
</TR>
<TR>
<TD>
16
</TD>
<TD>
90000
</TD>
<TD>
1-01:00:00
</TD>
</TR>
<TR>
<TD>
17
</TD>
<TD>
102400
</TD>
<TD>
1-04:26:40
</TD>
</TR>
<TR>
<TD>
18
</TD>
<TD>
115600
</TD>
<TD>
1-08:06:40
</TD>
</TR>
<TR>
<TD>
19
</TD>
<TD>
129600
</TD>
<TD>
1-12:00:00
</TD>
</TR>
<TR>
<TD>
20
</TD>
<TD>
144400
</TD>
<TD>
1-16:06:40
</TD>
</TR>
<TR>
<TD>
21
</TD>
<TD>
160000
</TD>
<TD>
1-20:26:40
</TD>
</TR>
<TR>
<TD>
22
</TD>
<TD>
176400
</TD>
<TD>
2-01:00:00
</TD>
</TR>
<TR>
<TD>
23
</TD>
<TD>
193600
</TD>
<TD>
2-05:46:40
</TD>
</TR>
<TR>
<TD>
24
</TD>
<TD>
211600
</TD>
<TD>
2-10:46:40
</TD>
</TR>
<TR>
<TD>
25
</TD>
<TD>
230400
</TD>
<TD>
2-16:00:00
</TD>
</TR>
<TR>
<TD>
26
</TD>
<TD>
250000
</TD>
<TD>
2-21:26:40
</TD>
</TR>
<TR>
<TD>
27
</TD>
<TD>
270400
</TD>
<TD>
3-03:06:40
</TD>
</TR>
<TR>
<TD>
28
</TD>
<TD>
291600
</TD>
<TD>
3-09:00:00
</TD>
</TR>
<TR>
<TD>
29
</TD>
<TD>
313600
</TD>
<TD>
3-15:06:40
</TD>
</TR>
<TR>
<TD>
30
</TD>
<TD>
336400
</TD>
<TD>
3-21:26:40
</TD>
</TR>
<TR>
<TD>
31
</TD>
<TD>
360000
</TD>
<TD>
4-04:00:00
</TD>
</TR>
<TR>
<TD>
32
</TD>
<TD>
384400
</TD>
<TD>
4-10:46:40
</TD>
</TR>
<TR>
<TD>
33
</TD>
<TD>
409600
</TD>
<TD>
4-17:46:40
</TD>
</TR>
<TR>
<TD>
34
</TD>
<TD>
435600
</TD>
<TD>
5-01:00:00
</TD>
</TR>
<TR>
<TD>
35
</TD>
<TD>
462400
</TD>
<TD>
5-08:26:40
</TD>
</TR>
<TR>
<TD>
36
</TD>
<TD>
490000
</TD>
<TD>
5-16:06:40
</TD>
</TR>
<TR>
<TD>
37
</TD>
<TD>
518400
</TD>
<TD>
6-00:00:00
</TD>
</TR>
<TR>
<TD>
38
</TD>
<TD>
547600
</TD>
<TD>
6-08:06:40
</TD>
</TR>
<TR>
<TD>
39
</TD>
<TD>
577600
</TD>
<TD>
6-16:26:40
</TD>
</TR>
<TR>
<TD>
40
</TD>
<TD>
608400
</TD>
<TD>
7-01:00:00
</TD>
</TR>
</TABLE>

<H2><A NAME="dns-problem">E.2. Dlaczego nie mogê wys³aæ poczty do du¿ej instytucji z wieloma MX ?</A></H2>
<P>Je¶li otrzymujesz:</P>
<PRE>
deferral: CNAME_lookup_failed_temporarily._(#4.4.3)/
</PRE>
<P>Problem mo¿e byæ zwi±zany z tym, ¿e <I>qmail</I> nie potrafi obs³ugiwaæ d³ugich odpowiedzi od serwera nazw. Rozwi±zaniem tego problemu jest zainstalowanie <A HREF="#djbdns">djbdns</A>. Sprawd¼ w rozdziale <A HREF="#dns-patches">Patche</A>.</P>
<P>Pojawiaj± siê tak¿e pytania dlaczego niektórze serwery <I>nie</I> maj± tego problemu. Po prostu, w zale¿no¶ci od czasu i kolejno¶ci zapytañ do twego lokalnego serwera nazw, rozmiar odpowiedzi na zapytanie <TT>ANY</TT> do &quot;aol.com&quot;mo¿e byæ wiêkszy od limitu 512 bajtów w pakiecie UDP albo i nie.</P>
<P>&quot;Albo i nie&quot; najprawdopodobniej nast±pi je¶li rekordy A i MX przeterminuj± siê, a rekordy NS nie. Poniewa¿ serwery .COM ustawiaj± 2 dniowy TTL, a serwery AOL 1 godzinny, zwykle mo¿e to wyst±piæ na mniej obci±¿onych serwerach nazw. W przypadku serwerów bardziej obci±¿onych jest wiêksza szansa, ¿e bêd± one mia³y te rekordy w swoim cache'u uniemo¿liwiaj±c niespatchowanemu <I>qmail'owi</I> uzyskanie informacji o CNAME.</P>
<P>Lepszym testem jest wys³anie mail'a do <TT>nosuchuser@large-mx.ckdhr.com</TT>; je¶li opu¶ci kolejkê i powróci w wiadomo¶ci odbitej bêdzie to ¶wiadczy³o ¿e twoj MTA potrafi wysy³aæ pocztê do hostów, których lista MX jest d³u¿sza od 512 bajtów. (U¿ywaj±c pojedyñczego RRset, z pojedyñczym TTL, który przekracza 512 bajtów, problem ten mo¿e byæ zaobserwowany bez zdawania siê na czas i kolejno¶æ zapytañ).</P>
<H2><A NAME="queue_extra">E.3. Czym jest <TT>QUEUE_EXTRA</TT>?</A></H2>
<P><TT>QUEUE_EXTRA</TT> jest zmienn± ustawian± w trakcie kompilacji, która okre¶la dodatkowego odbiorcê ka¿dej z dostarczanych wiadomo¶ci. Zwykle jest to u¿ywane w celu logowania. W FAQ podany jest przyk³ad jak zastosowaæ <TT>QUEUE_EXTRA</TT> by przechowywaæ kopie wszystkich wys³anych i odebranych wiadomo¶ci.</P>
<P>By u¿yc <TT>QUEUE_EXTRA</TT>, dokonaj edycji <TT>extra.h</TT> i podaj dodatkowego odbiorcê postaci <TT>&quot;T<I>recipient</I>\0&quot;</TT>, oraz d³ugo¶æ stringu <TT>QUEUE_EXTRA</TT> w <TT>QUEUE_EXTRALEN</TT> (&quot;\0&quot; liczy siê jako jeden znak). Przyk³ad:</P>
<PRE>
    #define QUEUE_EXTRA &quot;Tlog\0&quot;
    #define QUEUE_EXTRALEN 5
</PRE>
<P>Zatrzymaj <I>qmail'a</I> je¶li pracuje. Je¶li zainstalowa³e¶ skrypt <TT>qmailctl</TT> z rozdzia³u Instalacja, mo¿esz to zrobiæ poprzez:</P>
<PRE>
        qmailctl stop
</PRE>
<P>Je¶li nie masz tego skryptu, powiniene¶ u¿yæ twojego w³asnego skryptu albo wys³aæ sygna³ <TT>TERM</TT> do <TT>qmail-send</TT>.</P>
<P>Nastêpnie przekompiluj <I>qmail'a</I> poprzez:</P>
<PRE>
    make setup check
</PRE>
<P>Wpisz do <TT>~alias/.qmail-log</TT> komendy, które bêd± logowa³y to co chcesz. Na przyk³ad by logowaæ Message-ID:</P>
<PRE>
    | awk '/^$/ { exit } /^[mM][eE][sS][sS][aA][gG][eE]-/ { print }'
</PRE>
<P>I na koñcu zrestartuj <I>qmail'a</I>.</P>
<HR>
<H1><A NAME="error-messages">F. Komunikaty o b³êdach.</A></H1>
<P>Komunikaty o b³êdach <I>qmail'a</I> i co one znacz±.</P>
<P>Zajrzyj tak¿e do <A HREF="#rfcs">RFC 1893</A> w celu wyja¶nienia znaczenia kodów b³êdów z nawiasów.</P>
<P><I>Ten dodatek nie jest kompletny</I>.</P>
<H1><A NAME="gotchas">G. B³êdy pope³niane przez pocz±tkuj±cych</A></H1>
<P>Poni¿sze rzeczy zwykle sprawiaj± problemy nowym u¿ytkownikom <I>qmail'a</I></P>
<H2><A NAME="root-delivery">G.1. <I>qmail</I> nie dostarcza poczty do superu¿ytkownika</A></H2>
<P>By uniemo¿liwiæ sytuacjê w której <TT>qmail-local</TT> uruchamia³by komendy jako u¿ytkownik uprzywilejowany, <I>qmail</I> ignoruje wszystkich u¿ytkowników którzy maj± UID równy 0. Jest to opisane na stronie man <TT>qmail-getpw</TT>.</P>
<P>Nie oznacza to, ¿e <I>qmail</I> nie dostarczy poczty do root'a, oznacza tylko ¿e takie dostarczenie musi nast±piæ do u¿ytkownika nieuprzywilejowanego. Zwykle nale¿y stworzyæ alias dla u¿ytkownika root poprzez utworzenie pliku <TT>~alias/.qmail-root</TT>.</P>
<H2><A NAME="home-dir-ownership">G.2. <I>qmail</I> nie dostarcza wiadomo¶ci do u¿ytkowników którzy nie s± w³a¶cicielami swoich katalogów domowych</A></H2>
<P>Kolejna cecha zwi±zana z bezpieczeñstwem. Jest to udokumentowane w stronie man qmail-getpw.</P>
<H2><A NAME="uppercase-usernames">G.3. <I>qmail</I> nie dostarcza poczty do u¿ytkowników którzy maj± w nazwie wielkie litery</A></H2>
<P><I>qmail</I> konwertuje wszystko co znajduje siê w &quot;czê¶ci lokalnej&quot; - wszystko na lewo od znaku &quot;@&quot; w adresie, do ma³ych liter. Nie ma strony man która by to opisywa³a ale jest to opisane w kodzie ¼ród³owym. Natomiast fakt ignorowania u¿ytkowników pisanych wielkimi literami opisany jest w stronie man qmail-getpw.</P>
<H2><A NAME="dots-in-extensions">G.4. <I>qmail</I> zastêpuje kropki (.) w adresach rozszerzonych dwukropkami (:).</A></H2>
<P>Kolejna cecha zwiêkszaj±ca bezpieczeñstwo. Celem jest zapobie¿enie wêdrówce po drzewie katalogów przy u¿yciu &quot;..&quot;. Poprzez zast±pienie kropek dwukropkami <I>qmail</I> upewnia siê, ¿e wszystkie pliki <TT>.qmail</TT> znajduj± siê w katalogach domowych u¿ytkowników. Udaokumentowane na stronie man qmail-local.</P>
<H2><A NAME="uppercase-in-extensions">G.5. <I>qmail</I> konwertuje du¿e litery w adresach rozszerzonych do ma³ych liter</A></H2>
<P>Jest to wynikiem faktu, ¿e <I>qmail</I> dokonuje konwersji ca³ej lokalnej czê¶ci adresu. Udaokumentowane na stronie man qmail-local.</P>
<H2><A NAME="etc-hosts">G.6. <I>qmail</I> nie u¿ywa <TT>/etc/hosts</TT>.</A></H2>
<P><I>qmail</I> <B>nigdy</B> nie u¿ywa <TT>/etc/hosts</TT> by okre¶liæ adres IP na podstawie nazwy hosta. Je¶li u¿ywasz nazw w plikach kontrolnych, <I>qmail</I> musi mieæ dostêp do serwera nazw.</P>
<P><I>Mo¿liwe jest</I> uruchomienie <I>qmail'a</I> w systemie bez dostêpu do serwera nazw. Hosty w plikach kontrolnych (control files) powinny byæ okre¶lone przez adresy IP zawarte w nawiasach kwadratowych ([]), np:</P>
<PRE>
        [10.1.2.219]
</PRE>
<P>W chwili obecnej nawiasy kwadratowe nie <I>zawsze</I> s± konieczne, jednak¿e mo¿e siê to zmieniæ w przysz³o¶ci wiêc lepiej ich u¿ywaæ.</P>
<H2><A NAME="no-smtp-logging">G.7. qmail nie loguje aktywno¶ci SMTP</A></H2>
<P>Z wielu powodów <I>qmail</I> nie loguje po³±czeñ SMTP, odrzuceñ, b³êdnych poleceñ ani poprawnych poleceñ. <TT>tcpserver</TT> mo¿e byæ u¿yty by logowaæ po³±czenia, a <TT>recordio</TT> by logowaæ ca³y ruch STMP. <TT>recordio</TT> jest czê¶ci± pakietu <I><A HREF="#ucspi-tcp">ucspi-tcp</A></I>. Procedura ta jest udokumentowana w FAQ na <A HREF="http://cr.yp.to/qmail/faq/servers.html#recordio">http://cr.yp.to/qmail/faq/servers.html#recordio</A></P>
<H2><A NAME="deferral-notices">G.8. <I>qmail</I> nie generuje informacji o opó¼nieniach</A></H2>
<P>Je¶li <I>Sendmail</I> nie jest w stanie dostarczyæ wiadomo¶ci w czasie kilku godzin, zwykle czterech, wysy³a informacjê do nadawcy. Te zawiadomienia wygl±daj± jak bounce, jednak¿e nie oznaczaj± ¿e dostarczenie na pewno siê nie powiedzie.</P>
<P><I>qmail</I> nie wysy³a takich ostrze¼eñ. Wiadomo¶ci niedostarczone wróc± do nadawcy dopiero po spêdzeniu czasu równego <A HREF="#queuelifetime"></A><TT>queuelifetime</TT> w kolejce.</P>
<H2><A NAME="trigger">G.9. <I>qmail</I> dzia³a powoli je¶li <TT>/var/qmail/queue/lock/trigger</TT> jest skasowany / ma ¼le ustawione uprawnienia / jest regularnym plikiem.</A></H2>
<P><TT>qmail-queue</TT> i <TT>qmail-send</TT> komunikuj± siê poprzez nazwany potok o nazwie <TT>/var/qmail/queue/lock/trigger</TT>. Je¶li co¶ stanie siê z tym potokiem <TT>qmail-send</TT> nie bêdzie widzia³ nowych wiadomo¶ci przez okres oko³o pó³ godziny.</P>
<P>Najlepszym sposobem by upewniæ siê ¿e jest on poprawnie ustawiony jest uruchomienie &quot;make check&quot; z katalogu ¼ród³owego. Je¶li nie jest to mo¿liwe upewnij siê ¿e wygl±da tak:</P>
<PRE>
# ls -l /var/qmail/queue/lock/trigger
prw--w--w-   1 qmails   qmail           0 Jul  5 21:25 /var/qmail/queue/lock/tr
igger
</PRE>
<P>Zwróæ szczególn± uwagê na &quot;p&quot; na pocz±tku linii (oznacza ono, ¿e jest to nazwany potok), tryb (zw³aszcza world writable) oraz w³a¶ciciela i grupê.</P>
<H2><A NAME="smtp-slow">G.10. zapytania DNS lub IDENT mog± spowolniaæ SMTP</A></H2>
<P>Je¶li <TT>qmail-smtpd</TT> wolno odpowiada na po³±czenia problem jest prawdopodobnie spowodowany z powodu odwrotnych zapytañ DNS lub zapytañ IDENT. Je¶li uruchamiasz <TT>qmail-smtpd</TT> spod <TT>tcpserver'a</TT>,usuñ opcje &quot;-h&quot;, &quot;-p&quot;, and &quot;-r&quot; a dodaj &quot;-H&quot;, &quot;-P&quot;, &quot;-R&quot;, and &quot;-l 0&quot; (<I>el zero</I>).</P>
<H2><A NAME="cr">G.11. Linie zakoñczone (CRLF) nie dzia³aj±</A></H2>
<P><TT>qmail-inject</TT> i inne lokalne mechanizmy wprowadzania wiadomo¶ci jak <TT>sendmail</TT> nie dzia³aj± gdy wprowadzana wiadomo¶c ma DOS-owe zakoñczenia linii (CRLF). Inaczej ni¿ <I>Sendmail</I>, <I>qmail</I> wymaga od wiadomo¶ci wprowadzanych lokalnie by u¿ywa³y unixowych zakoñczeñ linii (tylko CR). Jest to czêsty problem wystêpuj±cy ze skryptami PHP.</P>
<H2><A NAME="log-block">G.12. <TT>qmail-send</TT> lub <TT>tcpserver</TT> przestaj± pracowaæ gdy nie mog± generowaæ logów</A></H2>
<P>Je¶li logujesz do logów zarz±dzanych przez supervise, jak to opisano w rozdziale 2 i logi przestaj± siê zapisywaæ z jakiego¶ powodu: przepe³nienie dysku, literówka w skrypcie <TT>run</TT> script, ¼le za³o¿ony katalog z logami itp, potok przepe³ni siê i mo¿e spowodowaæ, ¿e us³uga zablokuje siê lub zawiesi. Napraw ten problem (zob. <A HREF="#troubleshooting">Rozwi±zywanie problemów</A>) a wszystko wróci do normy.</P>
<HR>
<H1><A NAME="lwq-faq">H. FAQ <U>Life with qmail</U></A></H1>
<H2><A NAME="lwq-version">H.1. Jaka jest aktualna wersja <U>Life with qmail</U>?</A></H2>
<P>Ta wersja nosi numer 2002-09-03.</P>
<H2><A NAME="lwq-copyright">H.2. Kto jest wla¶cicielem <U>Life with qmail</U>?</A></H2>
<P>Life with qmail is Copyright 1999-2002 David E. Sill <A HREF="http://Web.InfoAve.Net/~dsill/dave.html">http://Web.InfoAve.Net/~dsill/dave.html</A></P>
<H2><A NAME="lwq-license">H.3. Na jakiej licencji <U>Life with qmail</U> jest opublikowane ?</A></H2>
<P>Podlega ono OpenContent License w wersji 1.0. Mo¿na j± znale¼æ na <A HREF="http://www.opencontent.org/opl.shtml">http://www.opencontent.org/opl.shtml</A>. W skrócie: mo¿na kopiowaæ, rozdawaæ lub modyfikowaæ ten tekst pod warunkiem, ¿e je¶li bêdziesz chcia³ rozpowszechniaæ zmodyfikowan± wersjê to ona tak¿e musi podlegaæ OpenContent License.</P>
<H2><A NAME="lwq-announce-list">H.4. Czy mogê byæ zawiadamiany je¶li uka¿± siê nowe wersje ?</A></H2>
<P>Zapisz siê na listê <TT>lwq-announce</TT> wysy³aj±c wiadomo¶æ na adres <A HREF="mailto:lwq-announce-subscribe@sws1.ctd.ornl.gov">lwq-announce-subscribe@sws1.ctd.ornl.gov</A></P>
<H2><A NAME="lwq-list">H.5. Czy mo¿na gdzie¶ rozmawiaæ na temat LWQ ?</A></H2>
<P>Zapisz siê na listê <TT>lwq</TT> wysy³aj±c maila na adres <A HREF="mailto:lwq-subscribe@sws1.ctd.ornl.gov">lwq-subscribe@sws1.ctd.ornl.gov</A></P>
<H2><A NAME="lwq-translations">H.6. Czy <U>Life with qmail</U> zosta³o przet³umaczone na jaki¶ jêzyk ?</A></H2>
<P>Tak, LWQ zosta³o przet³umaczone na hiszpañski:</P>
<P><A HREF="http://www.es.qmail.org/documentacion/usuarios/lwq">http://www.es.qmail.org/documentacion/usuarios/lwq</A></P>
<P>koreañski:</P>
<P><A HREF="http://kldp.org/Translations/html/Life_With_Qmail-KLDP/Life_With_Qmai l-KLDP.html">http://kldp.org/Translations/html/Life_With_Qmail-KLDP/Life_With_Qmai l-KLDP.html</A></P>
<P>polski:</P>
<UL>
<LI><A HREF="http://globi.org/lwq/">http://globi.org/lwq/</A></UL>
<P>w³oski:</P>
<UL>
<LI><A HREF="http://medialab.freaknet.org/~elibus/lwq.html">http://medialab.freaknet.org/~elibus/lwq.html</A></UL>
<P>i rosyjski:</P>
<UL>
<LI><A HREF="http://reanand.terrashare.com/qmail/lwq.htm">http://reanand.terrashare.com/qmail/lwq.htm</A></UL>

<P>Inne t³umaczenia s± w toku.</P>
<P>Je¶li jeste¶ zainteresowany przet³umaczeniem <U>Life with qmail</U> daj mi znaæ, bêdê móg³ zaj±æ siê koordynacj± i zapobiegnê powieleniu pracy przez ciebie i kogo¶ innego. Ponadto mogê udostêpniæ t³umaczom wersjê pliku ¼ród³owego w formacie SDF po to by t³umaczenie tak¿e mog³o byæ wykonane w SDF. <I>zob. nastêpne pytanie w celu dowiedzenia siê dlaczego jest to </I> <I>wa¿ne.</I></P>
<P>Dobrze by by³o by osoby t³umacz±ce LWQ zapisa³y siê na listê <TT>lwq</TT> (zob. poprzednie pytanie) gdzie mo¿na dyskutowaæ sprawy zwi±zane z t³umaczeniem oraz og³osiæ zakoñczenie prac.</P>
<H2><A NAME="lwq-formats">H.7. Czy <U>Life with qmail</U> jest dostêpne w formacie PostScript, PDF, plain text oraz w innych poza HTML'em ?</A></H2>
<P>Tak, ró¿ne inne formaty mo¿na znale¼æ na <A HREF="http://Web.InfoAve.net/~dsill/qmail.html">http://Web.InfoAve.net/~dsill/qmail.html</A></P>
<H2><A NAME="lwq-warranty">H.8. U¿ywa³em <U>Life with qmail</U> i zawiesi³o mój komputer / skasowa³o mój dysk twardy / posiwia³em z jego powodu / zabi³o mojego psa / itd.</A></H2>
<P>Przepraszam, naprawdê przepraszam ale <U>Life with qmail</U> nie ma ¿adnej gwarancji. Zajrzyj do OpenContent License o której ju¿ by³a mowa. Nie dosta³em za nie ¿adnych pieniêdzy, napisa³em je po to by zrobiæ co¶ po¿ytecznego dla spo³eczno¶ci <I>qmail'owej</I>.</P>
<P>Prawdê mówi±c to pytanie nie jest czêsto zadawane. Mam nadziejê, ¿e nigdy nie bêdê musia³ na nie odpowiedzieæ.</P>
<H2><A NAME="contributions">H.9. W jaki sposób mogê co¶ wnie¶æ do LWQ ?</A></H2>
<P>Proszê nadsy³aæ poprawki, sugestie, krytykê itp do <A HREF="mailto:lwq@sill.org">lwq@sill.org</A>.</P>
<P>Je¶li chcia³by¶ wnie¶æ co¶ wiêcej jak np. napisaæ nowy rozdzia³ lub za³±cznik swietnie! Skontaktuj siê ze mn± by dowiedzieæ siê czy temat o którym chcesz pisaæ jest czym¶ co dodam do LWQ, a tak¿e ¿e nikt inny ju¿ nad tym nie pracuje.</P>
<P>Je¶li chcia³by¶ zap³aciæ mi za pracê któr± wykonujê tak¿e bardzo siê cieszê. :) Skontaktuj siê ze mn± by ustaliæ szczegó³y lub u¿yj elektronicznego systemu p³atniczego PayPal. Przy jego u¿yciu mo¿esz przes³aæ na mój adres <TT>paypal@dave.sill.org</TT> kwoty pocz±wszy od $0.01 i ani ty ani ja nie ponosiemy przy tym ¿adnych kosztów nawet je¶li bêdziesz u¿ywa³ karty kredytowej. Natomiast je¶li nie korzysta³e¶ jeszcze z PayPal dostanê od nich bonus za zareklamowanie ich us³ugi je¶li zarejestrujesz siê przy u¿yciu tego linku: <A HREF="https://secure.paypal.com/refer/pal=paypal%40dave.sill.org">https://secure.paypal.com/refer/pal=paypal%40dave.sill.org</A></P>
<P>Innym sposobem wspierania LWQ bez ponoszenia ¿adnych kosztów s± zakupy w amazon.com przy u¿yciu tego linku: <A HREF="http://www.amazon.com/exec/obidos/redirect-home/davesill">http://www.amazon.com/exec/obidos/redirect-home/davesill</A></P>
<a href="http://www.opencontent.org/"> <img
src="http://www.opencontent.org/takeone.gif" border=0 alt="Take One!"></a>
</DIV>
<DIV CLASS="footer">
<DIV CLASS="navigate">
</DIV>
</DIV>

</BODY>
</HTML>
